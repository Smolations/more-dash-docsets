<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US" xml:lang="en-US">
  <head>
  	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  	<title>Getting Started &#8212; Documentation &#8212; Puppet Labs</title>
  	<link rel="alternate" type="application/atom+xml" title="Puppet Labs Documentation Updates" href="https://github.com/puppetlabs/puppet-docs/commits/master.atom" />
    <link rel="alternate" type="application/atom+xml" title="Puppet Labs Blog Feed" href="http://puppetlabs.com/feed/atom/" />
    <link rel="index" title="Puppet Labs Documentation" href="http://docs.puppetlabs.com" />
    <link rel="icon" href="./../../../favicon.ico" />


  <meta name="description" content="  This Page is Deprecated  We&#8217;ve revamped our getting started documentation! Instead of this page, use one of the following:      Demo MColle..." />



    <!-- FIXME: absolute paths -->

    <script type="text/javascript" src="./../../../files/javascripts/html5.js"></script>
    <script type="text/javascript" src="./../../../files/javascripts/jquery-1.3.2.min.js"></script>
    <script type="text/javascript" src="./../../../files/javascripts/drop_down.js"></script>
    <script type="text/javascript" src="./../../../files/javascripts/cufon-yui.js"></script>
    <script type="text/javascript" src="./../../../files/fonts/Klavika_400-Klavika_600.font.js"></script>
    <script type="text/javascript" src="./../../../files/javascripts/ampersands.js"></script>
    <script type="text/javascript" src="./../../../files/javascripts/navigation-accordion.js"></script>

    <script type="text/javascript" src="http://puppetlabs.com/wp-content/themes/puppetlabs/javascripts/leadcapture.js"></script>

    <!-- All in One SEO Pack 1.6.10.1 by Michael Torbert of Semper Fi Web Design[127,146] -->
    <meta name="keywords" content="Puppet, puppet labs, reductive labs, open source, system administrator, ruby, data center, automation, support" />
    <!-- /all in one seo pack -->

    <!-- Give us the option of setting a canonical URL in yaml frontmatter -NF -->
    <link rel="canonical" href="http://docs.puppetlabs.com/mcollective/reference/basic/gettingstarted_debian.html" />

    <!-- FIXME: absolute paths -->

    <link rel="stylesheet" type="text/css" href="./../../../files/stylesheets/style.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="./../../../files/stylesheets/syntax.css" media="screen" /> <!-- index -->
    <link rel="stylesheet" type="text/css" href="./../../../files/stylesheets/adbanner.css" media="screen" />

    <!--[if IE 7]>
	  <link rel="stylesheet" type="text/css" href="/files/stylesheets/ie_7.css" media="screen"> <!-- index -->
    

    <!--[if IE 8]>
	    <link rel="stylesheet" type="text/css" href="/files/stylesheets/ie_8.css" media="screen"> <!-- index -->
    

  	<script type="text/javascript"><![CDATA[
      Cufon.replace('h1, h2', { fontWeight: '600' });
  	]]></script>
</head>




  <body id="puppetlabsdocs" class="docs">
  <style type="text/css"><![CDATA[h1, h2{ visibility : hidden }]]></style>
  <!--[if IE 8]>
    <style type="text/css">h1, h2{ visibility : visible }</style>
  <![endif]-->

  	<header id="header">
      <div class="site-width">
    		<h1><a href="http://puppetlabs.com/"><span>Puppet Labs</span></a></h1>
        <a class="screen-reader-content" href="#content">Skip navigation</a>
        <nav>
    		<ul id="global-navigation">
          <li id="puppet-tab" class="with-submenu">
            <a href="http://puppetlabs.com/puppet/puppet-enterprise">
              <span>Products</span>
              <span class="drop-down-trigger"></span>
            </a>
            <ul>
			<li>
                <ul>
                   <a href="http://puppetlabs.com/puppet/what-is-puppet/">What is Puppet?</a>
                </ul>
              </li>
			       <li>
                <ul>
                   <a href="http://puppetlabs.com/puppet/puppet-enterprise/">Puppet Enterprise</a>
                </ul>
              </li>
            <li>
                <ul>
                   <a href="http://puppetlabs.com/puppet/whats-new/">What's New in 2.5</a>
                </ul>
              </li>
            <li>
                <ul>
                   <a href="http://puppetlabs.com/puppet/puppet-open-source/">Puppet Open Source</a>
                </ul>
              </li>
            <li>
                <ul>
                   <a href="http://puppetlabs.com/puppet/enterprise-vs-open-source/">Enterprise vs. Open Source</a>
                </ul>
              </li>
              <li>
                <ul>
                  <a href="http://forge.puppetlabs.com">Puppet Forge</a>
                </ul>
              </li>
              <li>
                <ul>
                  <a href="http://puppetlabs.com/puppet/requirements/">Components &amp; Requirements</a>
                </ul>
              </li>
              <li>
                <ul>
                  <a href="http://puppetlabs.com/puppet/faq/">FAQ</a>
                </ul>
              </li>
			  <li>
                <ul>
                  <a href="http://puppetlabs.com/puppet/how-to-buy/">How to Buy</a>
                </ul>
              </li>
            </ul>
          </li>
          <li id="solutions-tab" class="with-submenu">
            <a href="http://puppetlabs.com/solutions/">
              <span>Solutions</span>
              <span class="drop-down-trigger"></span>
            </a>
            <ul>
              <li class="page_item page-item-12296"><a href="http://puppetlabs.com/solutions/configuration-management/">Configuration Management</a></li>
<li class="page_item page-item-986"><a href="http://puppetlabs.com/solutions/virtualization-management/">Virtualization Management</a></li>
<li class="page_item page-item-993"><a href="http://puppetlabs.com/solutions/cloud-management/">Cloud Management</a></li>
<li class="page_item page-item-996"><a href="http://puppetlabs.com/solutions/it-compliance/">IT Compliance</a></li>
<li class="page_item page-item-9520"><a href="http://puppetlabs.com/solutions/devops/">DevOps</a></li>
<li class="page_item page-item-991"><a href="http://puppetlabs.com/solutions/manage-os-x-resources/">OS X Desktops</a></li>
            </ul>
          </li>
          <li id="services-tab" class="with-submenu">
            <a href="http://puppetlabs.com/services/">
              <span>Services</span>
              <span class="drop-down-trigger"></span>
            </a>
            <ul>
              <li class="page_item page-item-783"><a href="http://puppetlabs.com/services/overview/">Overview</a></li>
<li class="page_item page-item-1052"><a href="http://puppetlabs.com/services/customer-support/">Customer Support</a></li>
<li class="page_item page-item-11022"><a href="http://puppetlabs.com/services/support-plans/">Support Plans</a></li>
<li class="page_item page-item-845"><a href="http://puppetlabs.com/services/training-workshops/">On-Site Education</a></li>
<li class="page_item page-item-4899"><a href="http://puppetlabs.com/services/consulting/">Professional Services</a></li>
<li class="page_item page-item-849"><a href="http://puppetlabs.com/category/events/upcoming/">Events &amp; Workshops</a></li>
<li class="page_item page-item-851"><a href="http://puppetlabs.com/services/partners/">Partners</a></li>
            </ul>
          </li>
                    <li id="resources-tab" class="with-submenu">
            <a href="http://puppetlabs.com/resources/">
              <span>Resources</span>
              <span class="drop-down-trigger"></span>
            </a>
            <ul>
              <li class="page_item page-item-1048"><a href="http://puppetlabs.com/resources/overview-2/">Overview</a></li>
<li class="page_item page-item-1040"><a href="http://docs.puppetlabs.com">Documentation</a></li>
<li class="page_item page-item-872"><a href="http://info.puppetlabs.com/register-download">Downloads</a></li>
<li class="page_item page-item-1961"><a href="http://forge.puppetlabs.com">Puppet Forge</a></li>
<li class="page_item page-item-835"><a href="http://info.puppetlabs.com/download-whitepapers.html">White Papers</a></li>
<li class="page_item page-item-1967"><a href="http://projects.puppetlabs.com/projects/puppet/wiki">Wiki</a></li>
<li class="page_item page-item-7279"><a href="http://puppetlabs.com/resources/webinars/">Upcoming Webinars</a></li>
<li class="page_item page-item-10183"><a href="http://puppetlabs.com/resources/newsletter/">Newsletter</a></li>
<li class="page_item page-item-12263"><a href="http://puppetlabs.com/resources/tech-notes/">Tech Notes</a></li>
<li class="page_item page-item-10265"><a href="http://info.puppetlabs.com/pe2-webinar.html">Webinars</a></li>
            </ul>
          </li>

          <li id="customers-tab" class="with-submenu">
            <a href="http://puppetlabs.com/customers/companies/">
              <span>Customers</span>
              <span class="drop-down-trigger"></span>
            </a>
            <ul>
			<li>
                <ul>
                  <a href="http://puppetlabs.com/customers/companies/">Companies</a>
                </ul>
              </li>
			  <li>
                <ul>
                  <a href="http://puppetlabs.com/customers/case-studies/">Case Studies</a>
                </ul>
              </li>
			  <li>
                <ul>
                  <a href="http://puppetlabs.com/customers/product-testimonials/">Product Testimonials</a>
                </ul>
              </li>
			    <li>
                <ul>
                  <a href="http://puppetlabs.com/customers/what-customers-are-saying/">Service Testimonials</a>
                </ul>
              </li>
            </ul>
          </li>
          <li id="community-tab" class="with-submenu">
            <a href="http://puppetlabs.com/community/">
              <span>Community</span>
              <span class="drop-down-trigger"></span>
            </a>

 <ul>
			<li>
                <ul>
                  <a href="http://puppetlabs.com/community/overview/">Overview</a>
                </ul>
              </li>
			<li>
                <ul>
                  <a href="http://puppetlabs.com/blog">Blog</a>
                </ul>
              </li>
			  <li>
                <ul>
                  <a href="http://puppetlabs.com/community/puppet-camp/">Puppet Camp</a>
                </ul>
              </li>
			  <li>
                <ul>
                  <a href="http://puppetlabs.com/community/user-groups-and-devops-groups/">Puppet User Groups &amp; DevOps Groups</a>
                </ul>
              </li>
	          <li>
                <ul>
                  <a href="http://puppetlabs.com/community/presentations/">Presentations</a>
                </ul>
              </li>
			    <li>
                <ul>
                  <a href="http://puppetlabs.com/community/videos/">Videos</a>
                </ul>
              </li>
            </ul>

          </li><li id="company-tab" class="with-submenu">
            <a href="http://puppetlabs.com/company/">
              <span>Company</span>
              <span class="drop-down-trigger"></span>
            </a>
            <ul>
              <li class="page_item page-item-2316"><a href="http://puppetlabs.com/company/overview/">Overview</a></li>
<li class="page_item page-item-2179"><a href="http://puppetlabs.com/company/news/">News</a>
<ul class="children">
	<li class="page_item page-item-2338"><a href="http://puppetlabs.com/company/news/press-releases/">Press Releases</a></li>
	<li class="page_item page-item-2383"><a href="http://puppetlabs.com/company/news/media-kit/">Media Kit</a></li>
</ul>
</li>
<li class="page_item page-item-1571"><a href="http://puppetlabs.com/company/careers/">Careers</a></li>
<li class="page_item page-item-10372"><a href="http://puppetlabs.com/company/management/">Management</a></li>
<li class="page_item page-item-10311"><a href="http://puppetlabs.com/company/board-and-advisors/">Board and Advisors</a></li>
<li class="page_item page-item-10367"><a href="http://puppetlabs.com/company/investors/">Investors</a></li>
<li class="page_item page-item-2313"><a href="http://puppetlabs.com/company/contact-us/">Contact Us</a></li>
<li class="page_item page-item-10579"><a href="http://puppetlabs.com/company/awards/">Awards</a></li>
            </ul>
          </li>
    		</ul>
          <div id="misc-navigation">
			  <ul>
				<li><a href="http://puppetlabs.com/security/">Security</a></li>
				<li><a href="http://docs.puppetlabs.com">Documentation</a></li>
				<li><a href="http://puppetlabs.com/resources/customer-support/">Support</a></li>
			        <li><a href="http://projects.puppetlabs.com/">Bug Tracker</a></li>
				<li><a href="http://puppetlabs.com/company/contact/contact-us">Contact Us</a></li>
				<li><a href="http://info.puppetlabs.com/download-pe2.html" class="gateway">Download</a></li>
			  </ul>
			<form action="http://www.google.com/cse" id="cse-search-box">
			  <div>
				<input type="hidden" name="cx" value="017668764424496204839:ubligvgbenm" />
				<input type="hidden" name="ie" value="UTF-8" />
				<input type="text" name="q" class="gsc-input" size="31" />
				<input type="submit" name="sa" class="searchbtn" value="Search" />
			  </div>
			</form>
			<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&amp;lang=en"></script>
          </div>
      </nav>
    	</div>
    </header>

      <section id="masthead">
        <div class="site-width">
          <h1>Docs: <span class="section-name">Getting Started</span></h1>
          <ul id="doc-navigation">
            <li><a href="./../../../index.html">Docs Home</a></li>
            <li class="with-submenu">
              <a href="#">
                <span>Quick Nav</span>
                <span class="drop-down-trigger"></span>
              </a>
               <!-- the following links can't be relative, unfortunately -->
               <!-- future: add some JS to disable this if running from file:// -->
                               <dl>
                  <dt>Puppet Documentation</dt>
                      <dd><a href="./../../../puppet/3/reference/index.html">Puppet 3 Reference Manual</a></dd>
                      <dd><a href="./../../../puppet/2.7/reference/index.html">Puppet 2.7 Reference Manual</a></dd>
                      <dd><a href="./../../../pe/latest/index.html">Puppet Enterprise User's Guide</a></dd>
                      <dd><a href="./../../../learning/index.html">Learning Puppet</a></dd>
                      <dd><a href="./../../../references/latest/type.html">Resource Types</a></dd>
                      <dd><a href="./../../../references/latest/function.html">Functions</a></dd>
                      <dd><a href="./../../../references/latest/configuration.html">Configuration</a></dd>
                      <dd><a href="./../../../references/latest/developer/index.html">Developer</a></dd>
                      <dd><a href="./../../../references/glossary.html">Glossary of Puppet Terms</a></dd>
                      <dd><a href="./../../../references/index.html">Older References</a></dd>
                  <dt>Facter</dt>
                      <dd><a href="./../../../facter/latest/core_facts.html">Core Facts Reference</a></dd>
                  <dt>PuppetDB</dt>
                      <dd><a href="./../../../puppetdb/1/index.html">PuppetDB 1 Manual</a></dd>
                  <dt>MCollective</dt>
                      <dd><a href="./../../../mcollective/index.html">Index</a></dd>
                      <dd><a href="./../../../mcollective/reference/index.html">References</a></dd>
                      <dd><a href="./../../../mcollective/simplerpc/index.html">Writing Plugins</a></dd>
                      <dd><a href="./../../../mcollective/releasenotes.html">Release Notes</a></dd>
                </dl>

            </li>
            <li><a href="./../../../contribute.html">Contribute</a></li>
          </ul>
        </div>
        <br />
      </section>

      <section id="content">
        <div class="site-width">
          <div class="primary-secondary-content">
            <div class="primary-content">
              <h1>Getting Started</h1>
              <nav class="in-page" id="page-nav">
<ol class="toc">
  <li class="toc-lv2"><a href="#this-page-is-deprecated">This Page is Deprecated</a></li>
  <li class="toc-lv2"><a href="#requirements">Requirements</a></li>
  <li class="toc-lv2"><a href="#packages">Packages</a></li>
  <li class="toc-lv2"><a href="#activemq">ActiveMQ</a>
<ol class="toc">
   <li class="toc-lv3"><a href="#install">Install</a></li>
   <li class="toc-lv3"><a href="#configuring">Configuring</a></li>
   <li class="toc-lv3"><a href="#starting">Starting</a></li>
</ol></li>
  <li class="toc-lv2"><a href="#marionette-collective">Marionette Collective</a>
<ol class="toc">
   <li class="toc-lv3"><a href="#installation">Installation</a></li>
</ol></li>
  <li class="toc-lv2"><a href="#configuring-1">Configuring</a>
<ol class="toc">
   <li class="toc-lv3"><a href="#create-facts">Create Facts</a></li>
   <li class="toc-lv3"><a href="#start-the-server">Start the Server</a></li>
   <li class="toc-lv3"><a href="#test-connectivity">Test connectivity</a></li>
   <li class="toc-lv3"><a href="#plugins">Plugins</a></li>
   <li class="toc-lv3"><a href="#further-reading">Further Reading</a></li>
</ol></li>
</ol></nav>

<blockquote>
  <h2 id="this-page-is-deprecated">This Page is Deprecated</h2>

  <p>We&#8217;ve revamped our getting started documentation! Instead of this page, use one of the following:</p>

  <ul>
    <li><a href="./../../../mcollective/deploy/demo.html">Demo MCollective with Vagrant</a></li>
    <li><a href="./../../../mcollective/deploy/standard.html">Deploy MCollective (Standard Deployment)</a></li>
  </ul>
</blockquote>

<p>Getting started using Debian based distribution like Debian squeeze and Ubuntu is easy as DEBs are available for most the required components.  This guide walks you through the process.</p>

<h2 id="requirements">Requirements</h2>
<p>We try to keep the requirements on external Gems to a minimum, you only need:</p>

<ul>
  <li>A Stomp server, tested against <a href="http://activemq.apache.org/">ActiveMQ</a></li>
  <li>Ruby</li>
  <li>RubyGems</li>
  <li><a href="http://stomp.codehaus.org/Ruby+Client">Ruby Stomp Client</a></li>
</ul>

<h2 id="packages">Packages</h2>

<p>We strongly recommend you set up a local Apt repository that will host all the packages on your LAN, you can get the prerequisite packages here:</p>

<ul>
  <li><a href="http://activemq.apache.org/">ActiveMQ</a></li>
  <li>Java - OpenJDK that is included with your distribution</li>
  <li>Ruby - included with your distribution</li>
  <li><a href="http://packages.debian.org/search?suite=default&amp;section=all&amp;arch=any&amp;searchon=names&amp;keywords=rubygems">RubyGems</a></li>
  <li>Stomp Ruby Gem</li>
  <li><a href="http://www.puppetlabs.com/downloads/mcollective/">MCollective</a> - mcollective-2.2.x-1_all.deb, mcollective-common-2.2.x-1_all.deb, mcollective-client-2.2.x-1_all.deb</li>
</ul>

<p>The rest of this guide will assume you set up a Apt repository.  Puppet Labs hosts a Apt repository with all these dependencies at <em>apt.puppetlabs.com</em>.</p>

<h2 id="activemq">ActiveMQ</h2>

<p>ActiveMQ is currently the most used and tested middleware for use with MCollective.</p>

<p>You need at least one ActiveMQ server on your network, all the nodes you wish to manage will connect to the central ActiveMQ server.
Later on you can <a href="./../../../mcollective/reference/integration/activemq_clusters.html">cluster the ActiveMQ servers for availability and scale</a>.</p>

<h3 id="install">Install</h3>

<p>On the server that you chose to configure as the ActiveMQ server:</p>

<div class="highlight"><pre><code class="console"><span class="gp">%</span> apt-get install openjdk-6-jre
</code></pre>
</div>

<p>ActiveMQ installation instructions can be found <a href="http://activemq.apache.org/getting-started.html">here</a>.</p>

<h3 id="configuring">Configuring</h3>

<p><a href="./../../../mcollective/deploy/middleware/activemq.html">The ActiveMQ config reference</a> describes all of the ActiveMQ settings that MCollective cares about. For best use, skim the sections you care about while comparing it to an example activemq.xml file.</p>

<p>We recommend that new users:</p>

<ul>
  <li>Start with the <a href="http://github.com/puppetlabs/marionette-collective/raw/master/ext/activemq/examples/single-broker/activemq.xml">single-broker example config</a>.</li>
  <li>Change the <a href="./../../../mcollective/deploy/middleware/activemq.html#authentication-users-and-groups">user account passwords</a>.</li>
  <li><a href="./../../../mcollective/deploy/middleware/activemq.html#tls-credentials">Set up TLS</a> and <a href="./../../../mcollective/deploy/middleware/activemq.html#transport-connectors">use a TLS Stomp transport connector</a>.</li>
</ul>

<p>Other example config files are also available from <a href="http://github.com/puppetlabs/marionette-collective/tree/master/ext/activemq/examples/">GitHub</a>.</p>

<h3 id="starting">Starting</h3>

<p>Start the ActiveMQ service:</p>

<div class="highlight"><pre><code class="console"><span class="go">  # /etc/init.d/activemq start</span>
</code></pre>
</div>

<p>You should see it running in the process list:</p>

<div class="highlight"><pre><code class="console"><span class="go"> # ps auxw|grep java</span>
<span class="go"> activemq  3012  0.1 14.5 1155112 152180 ?      Sl   Dec28   2:02 java -Dactivemq.home=/usr/share/activemq -Dactivemq.base=/usr/share/activemq -Dcom.sun.management.jmxremote -Dorg.apache.activemq.UseDedicatedTaskRunner=true -Xmx512m -Djava.library.path=/usr/lib:/usr/lib64 -classpath /usr/share/java/tanukiwrapper.jar:/usr/share/activemq/bin/run.jar -Dwrapper.key=eg4_VvENzCmvtAKg -Dwrapper.port=32000 -Dwrapper.jvm.port.min=31000 -Dwrapper.jvm.port.max=31999 -Dwrapper.pid=3000 -Dwrapper.version=3.2.3 -Dwrapper.native_library=wrapper -Dwrapper.service=TRUE -Dwrapper.cpu.timeout=10 -Dwrapper.jvmid=1 org.tanukisoftware.wrapper.WrapperSimpleApp org.apache.activemq.console.Main start</span>
</code></pre>
</div>

<p>You should also see it listening on port 61613 or 61614 in your network stack, depending on whether you turned on TLS.</p>

<p>You should open port 61613 or 61614 for all your nodes to connect to.</p>

<h2 id="marionette-collective">Marionette Collective</h2>

<p>There are a few packages supplied and you will have potentially two type of server:</p>

<ul>
  <li>Nodes that you wish to manage using mcollective need the mcollective and mcollective-common packages</li>
  <li>Nodes that you wish to use to initiate requests from also known as clients need mcollective-client and mcollective-common packages</li>
</ul>

<p>A machine can be both at once, in which case you need to install all 3 packages.  We&#8217;ll work on the assumption here that you wish to both manage your machine and use it as a client by installing all 3 packages on our initial node.</p>

<h3 id="installation">Installation</h3>

<div class="highlight"><pre><code class="console"><span class="go">  # apt-get install mcollective mcollective-client mcollective-common</span>
<span class="go">  # gem install stomp</span>
</code></pre>
</div>

<h2 id="configuring-1">Configuring</h2>
<p>You&#8217;ll need to tweak some configs in <em>/etc/mcollective/client.cfg</em>, a full reference of config settings can be
found <a href="./../../../mcollective/reference/basic/configuration.html">here</a>:</p>

<p>We&#8217;re assuming you called the machine running ActiveMQ <em>stomp.example.net</em>; please change as appropriate. Also note that the port should be 61614 if you turned on TLS.</p>

<div class="highlight"><pre><code class="ini">  <span class="c"># main config</span>
  <span class="na">libdir</span> <span class="o">=</span> <span class="s">/usr/libexec/mcollective</span>
<span class="s">  logfile = /dev/null</span>
<span class="s">  loglevel = error</span>

  <span class="c"># connector plugin config</span>
  <span class="na">connector</span> <span class="o">=</span> <span class="s">activemq</span>
<span class="s">  plugin.activemq.pool.size = 1</span>
<span class="s">  plugin.activemq.pool.1.host = stomp.example.net</span>
<span class="s">  plugin.activemq.pool.1.port = 61613</span>
<span class="s">  plugin.activemq.pool.1.user = mcollective</span>
<span class="s">  plugin.activemq.pool.1.password = marionette</span>

  <span class="c"># security plugin config</span>
  <span class="na">securityprovider</span> <span class="o">=</span> <span class="s">psk</span>
<span class="s">  plugin.psk = abcdefghj</span>
</code></pre>
</div>

<p>You should also create <em>/etc/mcollective/server.cfg</em> here&#8217;s a sample, a full reference of config settings can be found on the <a href="./../../../mcollective/configure/server.html">Server Configuration Reference</a>:</p>

<div class="highlight"><pre><code class="ini">  <span class="c"># main config</span>
  <span class="na">libdir</span> <span class="o">=</span> <span class="s">/usr/libexec/mcollective</span>
<span class="s">  logfile = /var/log/mcollective.log</span>
<span class="s">  daemonize = 1</span>
<span class="s">  loglevel = info</span>

  <span class="c"># connector plugin config</span>
  <span class="na">connector</span> <span class="o">=</span> <span class="s">activemq</span>
<span class="s">  plugin.activemq.pool.size = 1</span>
<span class="s">  plugin.activemq.pool.1.host = stomp.example.net</span>
<span class="s">  plugin.activemq.pool.1.port = 61613</span>
<span class="s">  plugin.activemq.pool.1.user = mcollective</span>
<span class="s">  plugin.activemq.pool.1.password = marionette</span>


  <span class="c"># facts</span>
  <span class="na">factsource</span> <span class="o">=</span> <span class="s">yaml</span>
<span class="s">  plugin.yaml = /etc/mcollective/facts.yaml</span>

  <span class="c"># security plugin config</span>
  <span class="na">securityprovider</span> <span class="o">=</span> <span class="s">psk</span>
<span class="s">  plugin.psk = abcdefghj</span>
</code></pre>
</div>

<p>Replace the <em>plugin.psk</em> in both these files with a Pre-Shared Key of your own.</p>

<h3 id="create-facts">Create Facts</h3>
<p>By default - and for this setup - we&#8217;ll use a simple YAML file for a fact source, later on you can use Puppet Labs Facter or something else.</p>

<p>Create <em>/etc/mcollective/facts.yaml</em> along these lines:</p>

<div class="highlight"><pre><code class="yaml">  <span class="l-Scalar-Plain">---</span>
  <span class="l-Scalar-Plain">location</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">devel</span>
  <span class="l-Scalar-Plain">country</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">uk</span>
</code></pre>
</div>

<h3 id="start-the-server">Start the Server</h3>

<p>The packages include standard init script, just start the server:</p>

<div class="highlight"><pre><code class="console"><span class="go">  # /etc/init.d/mcollective restart</span>
</code></pre>
</div>

<p>You should see in the log file somethig like:</p>

<div class="highlight"><pre><code class="console"><span class="go">  # tail /var/log/mcollective.log</span>
<span class="go">  I, [2010-12-29T11:15:32.321744 #11479]  INFO -- : mcollectived:33 The Marionette Collective 1.1.0 started logging at info level</span>
</code></pre>
</div>

<h3 id="test-connectivity">Test connectivity</h3>

<p>If all is fine and you see this log message you can test with the client code:</p>

<div class="highlight"><pre><code class="console"><span class="gp">%</span> mco ping
<span class="go">your.domain.com                           time=74.41 ms</span>

<span class="go">---- ping statistics ----</span>
<span class="go">1 replies max: 74.41 min: 74.41 avg: 74.41</span>
</code></pre>
</div>

<p>This sends out a simple &#8216;hello&#8217; packet to all the machines, as we only installed one you should have just one reply.</p>

<p>If you install the <em>mcollective</em> and <em>mcollective-common</em> packages along wit the facts and server.cfg you should see more nodes show up here.</p>

<p>You can explore other aspects of your machines:</p>

<div class="highlight"><pre><code class="console"><span class="gp">%</span> mco find --with-fact <span class="nv">country</span><span class="o">=</span>uk
<span class="go">your.domain.com</span>
</code></pre>
</div>

<p>This searches all systems currently active for ones with a fact <em>country=uk</em>, it got the data from the yaml file you made earlier.</p>

<p>If you use confiuration management tools like puppet and the nodes are setup with classes with <em>classes.txt</em> in <em>/var/lib/puppet</em> then you
can search for nodes with a specific class on them - the locations will configurable soon:</p>

<div class="highlight"><pre><code class="console"><span class="gp">%</span> mco find --with-class common::linux
<span class="go">your.domain.com</span>
</code></pre>
</div>

<p>The filter commands are important they will be the main tool you use to target only parts of your infrastructure with calls to agents.</p>

<p>See the <code>--help</code> option to the various <code>mco *</code> commands for available options.  You can now look at some of the available plugins and
play around, you might need to run the server process as root if you want to play with services etc.</p>

<h3 id="plugins">Plugins</h3>
<p>We provide limited default plugins, you can look on our sister project <a href="http://projects.puppetlabs.com/projects/mcollective-plugins/wiki">MCollective Plugins</a> where you will
find various plugins to manage packages, services etc.</p>

<h3 id="further-reading">Further Reading</h3>
<p>From here you should look at the rest of the wiki pages some key pages are:</p>

<ul>
  <li><a href="./../../../mcollective/screencasts.html">Screencasts</a> - Get a hands-on look at what is possible</li>
  <li><a href="./../../../mcollective/terminology.html">Terminology</a></li>
  <li><a href="./../../../mcollective/simplerpc/index.html">Introduction to Simple RPC</a> - a simple to use framework for writing clients and agents</li>
  <li><a href="./../../../mcollective/reference/basic/daemon.html">ControllingTheDaemon</a> - Controlling a running daemon</li>
  <li><a href="./../../../mcollective/reference/plugins/security_aes.html">AESSecurityPlugin</a> - Using AES+RSA for secure message encryption and authentication of clients</li>
  <li><a href="./../../../mcollective/reference/plugins/security_ssl.html">SSLSecurityPlugin</a> - Using SSL for secure message signing and authentication of clients</li>
</ul>

              <blockquote><p style="font-size: 1.3em; text-align: center;"><a href="#content">&#8593; Back to top</a></p></blockquote>
            </div>
            <nav class="main">
                  <div id="subCol">


<ul>
  <li><strong>Overview</strong>
    <ul>
      <li><a href="./../../../mcollective/index.html">Introduction</a></li>
      <li><a href="./../../../mcollective/overview_components.html">Overview of Components</a></li>
      <li><a href="./../../../mcollective/terminology.html">Terminology</a></li>
      <li><a href="./../../../mcollective/screencasts.html">Screencasts</a></li>
      <li><a href="./../../../mcollective/releasenotes.html">Release Notes</a></li>
      <li><a href="./../../../mcollective/changelog.html">Changelog</a></li>
    </ul>
  </li>
  <li><strong>Deploying MCollective</strong>
    <ul>
      <li><a href="./../../../mcollective/deploy/index.html">Index</a></li>
      <li><a href="./../../../mcollective/deploy/demo.html">Demo</a></li>
      <li><a href="./../../../mcollective/deploy/standard.html">Getting Started (Standard Deployment)</a></li>
    </ul>
  </li>
  <li><strong>Configuration / Deployment Topics</strong>
    <ul>
      <li><strong>Installation:</strong></li>
      <li><a href="./../../../mcollective/deploy/install.html">Installing MCollective</a></li>
      <li><a href="./../../../mcollective/deploy/plugins.html">Installing Plugins</a></li>
      <li><strong>Configuration:</strong></li>
      <li><a href="./../../../mcollective/configure/server.html">Server Config Reference</a></li>
      <li><a href="./../../../mcollective/configure/client.html">Client Config Reference</a></li>
      <li><a href="./../../../mcollective/reference/integration/puppet.html">Puppet Integration</a></li>
      <li><a href="./../../../mcollective/reference/integration/chef.html">Chef Integration</a></li>
      <li><strong>Middleware:</strong></li>
      <li><a href="./../../../mcollective/deploy/middleware/index.html">Middleware Types</a></li>
      <li><a href="./../../../mcollective/deploy/middleware/activemq.html">ActiveMQ Configs for MCollective</a></li>
      <li><a href="./../../../mcollective/deploy/middleware/activemq_keystores.html">ActiveMQ TLS Keystore Setup</a></li>
      <li><a href="./../../../mcollective/reference/integration/activemq_clusters.html">ActiveMQ Clustering</a></li>
      <li><a href="./../../../mcollective/reference/integration/activemq_ssl.html">ActiveMQ TLS</a></li>
      <li><a href="./../../../mcollective/reference/integration/activemq_security.html">ActiveMQ Security</a></li>
      <li><strong>Connector Plugins:</strong></li>
      <li><a href="./../../../mcollective/reference/plugins/connector_activemq.html">The ActiveMQ Connector</a></li>
      <li><a href="./../../../mcollective/reference/plugins/connector_rabbitmq.html">The RabbitMQ Connector</a></li>
      <li><strong>Security Plugins:</strong></li>
      <li><a href="./../../../mcollective/reference/plugins/security_ssl.html">Configuring SSL Validation Security</a></li>
      <li><strong>Advanced Features:</strong></li>
      <li><a href="./../../../mcollective/reference/basic/subcollectives.html">Subcollectives and Partitioning</a></li>
      <li><a href="./../../../mcollective/simplerpc/auditing.html">Auditing</a> <!-- contains plugin-writing info --></li>
    </ul>
  </li>
  <li><strong>Use and Administer MCollective</strong>
    <ul>
      <li><a href="./../../../mcollective/reference/basic/basic_cli_usage.html">Command Line Usage Instructions</a></li>
      <li><a href="./../../../mcollective/reference/ui/filters.html">Command Filtering and Discovery</a></li>
      <li><a href="./../../../mcollective/reference/basic/daemon.html">Controlling the MCollective Daemon</a></li>
      <li><a href="./../../../mcollective/reference/plugins/rpcutil.html">Controlling the MCollective Daemon with the rpcutil Agent</a></li>
      <li><a href="./../../../mcollective/reference/ui/nodereports.html">On-Demand Node Reports</a></li>
    </ul>
  </li>
  <li><strong>Write Agent Plugins</strong>
    <ul>
      <li><a href="./../../../mcollective/simplerpc/agents.html">Writing Agent Plugins</a></li>
      <li><a href="./../../../mcollective/reference/plugins/ddl.html">Writing DDL Files</a></li>
      <li><a href="./../../../mcollective/reference/plugins/aggregate.html">Aggregating Results</a> <!-- mixes DDL info with info about writing aggregate plugins --></li>
    </ul>
  </li>
  <li><strong>Write Clients and Applications</strong>
    <ul>
      <li><a href="./../../../mcollective/simplerpc/clients.html">Writing Clients</a></li>
      <li><a href="./../../../mcollective/reference/plugins/application.html">Writing New mco Subcommands</a></li>
    </ul>
  </li>
  <li><strong>Write Other Plugins</strong>
    <ul>
      <li><a href="./../../../mcollective/simplerpc/authorization.html">Writing Authorization Plugins and Enabling Authorization</a> <!-- contains deploy/config info --></li>
      <li><a href="./../../../mcollective/reference/plugins/data.html">Writing Data Plugins</a></li>
      <li><a href="./../../../mcollective/reference/plugins/discovery.html">Writing and Using Discovery Plugins</a> <!-- contains usage info --></li>
      <li><a href="./../../../mcollective/reference/plugins/facts.html">Writing Facts Plugins</a></li>
      <li><a href="./../../../mcollective/reference/plugins/registration.html">Writing Registration Plugins</a></li>
      <li><a href="./../../../mcollective/reference/plugins/validator.html">Writing Validator Plugins</a></li>
    </ul>
  </li>
  <li><a href="http://projects.puppetlabs.com/projects/mcollective-plugins/wiki">Plugin Directory</a></li>
  <li><strong>Internals</strong>
    <ul>
      <li><a href="./../../../mcollective/reference/basic/messageflow.html">Message Flow</a> <!-- needs more/needs update --></li>
      <li><a href="./../../../mcollective/simplerpc/index.html">SimpleRPC Overview</a></li>
      <li><a href="./../../../mcollective/simplerpc/messageformat.html">SimpleRPC Message Format</a></li>
      <li><a href="./../../../mcollective/reference/basic/messageformat.html">Core Message Format</a></li>
      <li><a href="./../../../mcollective/security.html">Security Overview</a></li>
    </ul>
  </li>
  <li><strong>Older and Non-Recommended Information</strong>
    <ul>
      <li><a href="./../../../mcollective/reference/plugins/security_aes.html">Configuring AES Security</a></li>
      <li><a href="./../../../mcollective/reference/plugins/connector_stomp.html">Configuring the Generic Stomp Connector</a></li>
      <li><a href="./../../../mcollective/reference/basic/basic_agent_and_client.html">Writing Old-Style Agent Plugins</a></li>
      <li><a href="./../../../mcollective/reference/index.html">Alternate Index</a></li>
    </ul>
  </li>
</ul>

                      <div style="margin-top: 1.5em; padding-bottom: 10px;">
                          <p style="font-family: 'Lucida Grande',Lucida,Verdana,sans-serif;font-size: 16px; font-weight: bold; line-height: 22px; margin-bottom: 10px;">Download the Docs</p>
                          <a href="http://info.puppetlabs.com/download-pdfs.html"><img src="./../../../images/smallbits_small_docs.png" alt="Puppet docs download" /></a>
                      </div>
                      <div style="margin-top: 0; padding-bottom: 10px;">
                          <p style="font-family: 'Lucida Grande',Lucida,Verdana,sans-serif;font-size: 16px; font-weight: bold; line-height: 22px; margin-bottom: 10px;">Download Puppet Enterprise</p>
                          <a href="http://info.puppetlabs.com/download-pe.html"><img src="./../../../images/puppet_cert_home.jpg" alt="Puppet Enterprise promo" /></a>
                      </div>
                  </div>
            </nav>
          </div>
        </div>
      </section>

		<footer id="footer">
      <div class="site-width">

        <div class="primary-secondary-content">
          <div class="primary-content">
            <section id="newsletter">
                 <h4>Puppet Labs is Hiring</h4>
                 <p><a href="http://www.puppetlabs.com/company/jobs/">Engineers, developers &amp; consultants</a>
                  </p><p>
		</p><h4>Newsletter</h4>

              <p>Stay up to date on all things puppet</p>

				<form class="lpeRegForm formNotEmpty" method="post" enctype="application/x-www-form-urlencoded" action="http://info.puppetlabs.com/index.php/leadCapture/save" id="mktForm_1013" name="mktForm_1013">

				<label>Email Address:</label><span class="mktInput"><input class="mktFormText mktFormEmail" name="Email" id="Email" type="text" value="" maxlength="255" /><span class="mktFormMsg"></span></span>

				<input id="mktFrmSubmit" type="submit" class="btn" style="width: auto; overflow: visible; padding-left: .25em; padding-right: .25em;" value="Subscribe" name="submitButton" onclick="formSubmit(document.getElementById(&quot;mktForm_1013&quot;)); return false;" />

				<input style="display: none;" id="mktFrmReset" type="reset" value="Clear" name="resetButton" onclick="formReset(document.getElementById(&quot;mktForm_1013&quot;)); return false;" />

				<span style="display:none;"><input type="text" name="_marketo_comments" value="" /></span>
				<input type="hidden" name="lpId" value="-1" />
				<input type="hidden" name="subId" value="100" />

				<input type="hidden" name="kw" value="" />
				<input type="hidden" name="cr" value="" />

				<input type="hidden" name="searchstr" value="" />
				<input type="hidden" name="lpurl" value="http://info.puppetlabs.com/testsubscription.html?cr={creative}&amp;kw={keyword}" />
				<input type="hidden" name="formid" value="1013" />
				<input type="hidden" name="returnURL" value="http://www.puppetlabs.com/misc/subscription-thank-you/" />
				<input type="hidden" name="retURL" value="http://www.puppetlabs.com/misc/subscription-thank-you/" />
				<input type="hidden" name="_mkt_disp" value="return" />
				<input type="hidden" name="_mkt_trk" value="" />

				</form>
				<script type="text/javascript" src="http://info.puppetlabs.com/js/mktFormSupport.js"></script>

				<script type="text/javascript"><![CDATA[
				function formSubmit(elt) {
				return Mkto.formSubmit(elt);
				}
				function formReset(elt) {
				return Mkto.formReset(elt);
				}
				]]></script>

<a href="http://info.puppetlabs.com/puppet-enterprise" class="fbtn">Try Puppet Enterprise FREE</a>

            </section>
            <section id="elsewhere">
              <h4>Get Involved</h4>
              <ul>

                <li class="chat"><a href="http://webchat.freenode.net/?channels=puppet" rel="external"><span class="indicator"></span><span>Chat with us on IRC</span></a></li>
		<li class="discussion"><a href="http://groups.google.com/group/puppet-dev" rel="external"><span class="indicator"></span><span>Join the Puppet Developer List</span></a></li>
                <li class="discussion"><a href="http://groups.google.com/group/puppet-users?pli=1" rel="external"><span class="indicator"></span><span>Join the Puppet User List</span></a></li>

                <li class="linkedin"><a href="http://www.linkedin.com/groups?about=&amp;gid=696467&amp;trk=anet_ug_grppro" rel="external"><span class="indicator"></span><span>Join the Puppet Users LinkedIn group</span></a></li>

              </ul>
		<p>
		              		</p><h4>Follow us&#8230;</h4>

              		<ul class="followus">


			<li><a href="http://feeds.feedburner.com/PuppetLabs" target="_blank"><img src="http://www.puppetlabs.com/wp-content/plugins/my-profiles/images/rss.png" border="0" /></a></li>
			<li><a href="http://www.facebook.com/pages/Puppet-Labs/219089920711" target="_blank"><img src="http://www.puppetlabs.com//wp-content/plugins/my-profiles/images/facebook.png" border="0" /></a></li>
			<li><a href="http://www.twitter.com/puppetlabs" target="_blank"><img src="http://www.puppetlabs.com//wp-content/plugins/my-profiles/images/twitter.png" border="0" /></a></li>
			<li><a href="http://www.linkedin.com/groups?about=&amp;gid=696467&amp;trk=anet_ug_grppro" target="_blank"><img src="http://www.puppetlabs.com//wp-content/uploads/2011/01/LinkedIn_IN_Icon_32px.png" border="0" /></a></li>    <li><a href="https://github.com/puppetlabs" target="_blank"><img src="http://www.puppetlabs.com//wp-content/uploads/2011/01/github_icon.png" border="0" /></a></li>
			<li><a href="https://plus.google.com/112682055028218091774?rel=author" target="_blank"><img src="https://puppetlabs.com/wp-content/uploads/2013/05/google_plus32x32.png" alt="Find Us on Google+" border="0" /></a></li>
					</ul>

              	

            </section>
          </div>
          <div class="secondary-content">
            <section id="book-it">
              <h4>Get the book!</h4>

              <p>James Turnbull and Jeff McCune's book <a href="http://www.apress.com/9781430230571" rel="nofollow">Pro Puppet</a> is a comprehensive and up-to-date look at Puppet and MCollective. </p>
              <a href="http://www.apress.com/9781430230571" rel="nofollow"><img src="http://www.puppetlabs.com/wp-content/uploads/2011/05/propuppetthumb.png" /></a>
            </section>
          </div>
        </div>
      </div>
		</footer>

    <div id="copyright">
      <div class="site-width">
        &#169; 2011 <a href="http://www.puppetlabs.com/" title="Puppet Labs">Puppet Labs</a>
        <span class="vcard">
         <span class="org"></span>
         <a class="email" href="mailto:info@puppetlabs.com">info@puppetlabs.com</a>

          <span class="adr">
           <span class="street-address">926 NW 13th Avenue #210</span>
           /
           <span class="locality">Portland</span>,
           <span class="region">OR</span>
           <span class="postal-code">97209</span>

          </span>

         <span class="tel">1-877-575-9775</span>
        </span>
      </div>
    </div>

  	<script type="text/javascript"><![CDATA[Cufon.now();]]></script>
  	<style type="text/css"><![CDATA[h1, h2, .btn { visibility : visible; }]]></style>


	</body>
</html>
