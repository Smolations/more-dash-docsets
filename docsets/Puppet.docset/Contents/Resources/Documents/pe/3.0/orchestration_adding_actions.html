<!DOCTYPE html>
<html dir="ltr" lang="en-US">
  <head>
  	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  	<title>PE 3.0 » Orchestration » Adding New Actions — Documentation — Puppet Labs</title>
  	<link rel="alternate" type="application/atom+xml" title="Puppet Labs Documentation Updates" href="https://github.com/puppetlabs/puppet-docs/commits/master.atom">
    <link rel="alternate" type="application/atom+xml" title="Puppet Labs Blog Feed" href="http://puppetlabs.com/feed/atom/">
    <link rel='index' title='Puppet Labs Documentation' href='http://docs.puppetlabs.com' />
    <link rel='icon' href='./../../favicon.ico' />


  <meta name="description" content="Actions and PluginsYou can extend Puppet Enterprise (PE)&#8217;s orchestration engine by adding new actions. Actions are distributed in MCollective...">



    <!-- FIXME: absolute paths -->

    <script type='text/javascript' src='./../../files/javascripts/html5.js'></script>
    <script type='text/javascript' src='./../../files/javascripts/jquery-1.3.2.min.js'></script>
    <script type='text/javascript' src='./../../files/javascripts/drop_down.js'></script>
    <script type='text/javascript' src='./../../files/javascripts/cufon-yui.js'></script>
    <script type='text/javascript' src='./../../files/fonts/Klavika_400-Klavika_600.font.js'></script>
    <script type='text/javascript' src='./../../files/javascripts/ampersands.js'></script>
    <script type='text/javascript' src='./../../files/javascripts/navigation-accordion.js'></script>

    <script type="text/javascript" src="http://puppetlabs.com/wp-content/themes/puppetlabs/javascripts/leadcapture.js"></script>

    <!-- All in One SEO Pack 1.6.10.1 by Michael Torbert of Semper Fi Web Design[127,146] -->
    <meta name="keywords" content="Puppet, puppet labs, reductive labs, open source, system administrator, ruby, data center, automation, support" />
    <!-- /all in one seo pack -->

    <!-- Give us the option of setting a canonical URL in yaml frontmatter -NF -->
    <link rel="canonical" href="http://docs.puppetlabs.com/pe/latest/orchestration_adding_actions.html" />

    <!-- FIXME: absolute paths -->

    <link rel="stylesheet" type="text/css" href="./../../files/stylesheets/style.css" media="screen">
    <link rel="stylesheet" type="text/css" href="./../../files/stylesheets/syntax.css" media="screen"> <!-- index -->
    <link rel="stylesheet" type="text/css" href="./../../files/stylesheets/adbanner.css" media="screen">

    <!--[if IE 7]>
	  <link rel="stylesheet" type="text/css" href="./../../files/stylesheets/ie_7.css" media="screen"> <!-- index -->
    <![endif]-->

    <!--[if IE 8]>
	    <link rel="stylesheet" type="text/css" href="./../../files/stylesheets/ie_8.css" media="screen"> <!-- index -->
    <![endif]-->

  	<script type="text/javascript">
      Cufon.replace('h1, h2', { fontWeight: '600' });
  	</script>
</head>




  <body id="puppetlabsdocs" class="docs">
  <style type="text/css">h1, h2{ visibility : hidden }</style>
  <!--[if IE 8]>
    <style type="text/css">h1, h2{ visibility : visible }</style>
  <![endif]-->

  	<header id="header">
      <div class="site-width">
    		<h1><a href="http://puppetlabs.com/"><span>Puppet Labs</span></a></h1>
        <a class="screen-reader-content" href="#content">Skip navigation</a>
        <nav>
    		<ul id="global-navigation">
          <li id="puppet-tab" class="with-submenu">
            <a href="http://puppetlabs.com/puppet/puppet-enterprise">
              <span>Products</span>
              <span class="drop-down-trigger"></span>
            </a>
            <ul>
			<li>
                <ul>
                   <a href="http://puppetlabs.com/puppet/what-is-puppet/">What is Puppet?</a>
                </ul>
              </li>
			       <li>
                <ul>
                   <a href="http://puppetlabs.com/puppet/puppet-enterprise/">Puppet Enterprise</a>
                </ul>
              </li>
            <li>
                <ul>
                   <a href="http://puppetlabs.com/puppet/whats-new/">What's New in 2.5</a>
                </ul>
              </li>
            <li>
                <ul>
                   <a href="http://puppetlabs.com/puppet/puppet-open-source/">Puppet Open Source</a>
                </ul>
              </li>
            <li>
                <ul>
                   <a href="http://puppetlabs.com/puppet/enterprise-vs-open-source/">Enterprise vs. Open Source</a>
                </ul>
              </li>
              <li>
                <ul>
                  <a href="http://forge.puppetlabs.com">Puppet Forge</a>
                </ul>
              </li>
              <li>
                <ul>
                  <a href="http://puppetlabs.com/puppet/requirements/">Components &amp; Requirements</a>
                </ul>
              </li>
              <li>
                <ul>
                  <a href="http://puppetlabs.com/puppet/faq/">FAQ</a>
                </ul>
              </li>
			  <li>
                <ul>
                  <a href="http://puppetlabs.com/puppet/how-to-buy/">How to Buy</a>
                </ul>
              </li>
            </ul>
          </li>
          <li id="solutions-tab" class="with-submenu">
            <a href="http://puppetlabs.com/solutions/">
              <span>Solutions</span>
              <span class="drop-down-trigger"></span>
            </a>
            <ul>
              <li class="page_item page-item-12296"><a href="http://puppetlabs.com/solutions/configuration-management/">Configuration Management</a></li>
<li class="page_item page-item-986"><a href="http://puppetlabs.com/solutions/virtualization-management/">Virtualization Management</a></li>
<li class="page_item page-item-993"><a href="http://puppetlabs.com/solutions/cloud-management/">Cloud Management</a></li>
<li class="page_item page-item-996"><a href="http://puppetlabs.com/solutions/it-compliance/">IT Compliance</a></li>
<li class="page_item page-item-9520"><a href="http://puppetlabs.com/solutions/devops/">DevOps</a></li>
<li class="page_item page-item-991"><a href="http://puppetlabs.com/solutions/manage-os-x-resources/">OS X Desktops</a></li>
            </ul>
          </li>
          <li id="services-tab" class="with-submenu">
            <a href="http://puppetlabs.com/services/">
              <span>Services</span>
              <span class="drop-down-trigger"></span>
            </a>
            <ul>
              <li class="page_item page-item-783"><a href="http://puppetlabs.com/services/overview/">Overview</a></li>
<li class="page_item page-item-1052"><a href="http://puppetlabs.com/services/customer-support/">Customer Support</a></li>
<li class="page_item page-item-11022"><a href="http://puppetlabs.com/services/support-plans/">Support Plans</a></li>
<li class="page_item page-item-845"><a href="http://puppetlabs.com/services/training-workshops/">On-Site Education</a></li>
<li class="page_item page-item-4899"><a href="http://puppetlabs.com/services/consulting/">Professional Services</a></li>
<li class="page_item page-item-849"><a href="http://puppetlabs.com/category/events/upcoming/">Events &amp; Workshops</a></li>
<li class="page_item page-item-851"><a href="http://puppetlabs.com/services/partners/">Partners</a></li>
            </ul>
          </li>
                    <li id="resources-tab" class="with-submenu">
            <a href="http://puppetlabs.com/resources/">
              <span>Resources</span>
              <span class="drop-down-trigger"></span>
            </a>
            <ul>
              <li class="page_item page-item-1048"><a href="http://puppetlabs.com/resources/overview-2/">Overview</a></li>
<li class="page_item page-item-1040"><a href="http://docs.puppetlabs.com">Documentation</a></li>
<li class="page_item page-item-872"><a href="http://info.puppetlabs.com/register-download">Downloads</a></li>
<li class="page_item page-item-1961"><a href="http://forge.puppetlabs.com">Puppet Forge</a></li>
<li class="page_item page-item-835"><a href="http://info.puppetlabs.com/download-whitepapers.html">White Papers</a></li>
<li class="page_item page-item-1967"><a href="http://projects.puppetlabs.com/projects/puppet/wiki">Wiki</a></li>
<li class="page_item page-item-7279"><a href="http://puppetlabs.com/resources/webinars/">Upcoming Webinars</a></li>
<li class="page_item page-item-10183"><a href="http://puppetlabs.com/resources/newsletter/">Newsletter</a></li>
<li class="page_item page-item-12263"><a href="http://puppetlabs.com/resources/tech-notes/">Tech Notes</a></li>
<li class="page_item page-item-10265"><a href="http://info.puppetlabs.com/pe2-webinar.html">Webinars</a></li>
            </ul>
          </li>

          <li id="customers-tab" class="with-submenu">
            <a href="http://puppetlabs.com/customers/companies/">
              <span>Customers</span>
              <span class="drop-down-trigger"></span>
            </a>
            <ul>
			<li>
                <ul>
                  <a href="http://puppetlabs.com/customers/companies/">Companies</a>
                </ul>
              </li>
			  <li>
                <ul>
                  <a href="http://puppetlabs.com/customers/case-studies/">Case Studies</a>
                </ul>
              </li>
			  <li>
                <ul>
                  <a href="http://puppetlabs.com/customers/product-testimonials/">Product Testimonials</a>
                </ul>
              </li>
			    <li>
                <ul>
                  <a href="http://puppetlabs.com/customers/what-customers-are-saying/">Service Testimonials</a>
                </ul>
              </li>
            </ul>
          </li>
          <li id="community-tab" class="with-submenu">
            <a href="http://puppetlabs.com/community/">
              <span>Community</span>
              <span class="drop-down-trigger"></span>
            </a>

 <ul>
			<li>
                <ul>
                  <a href="http://puppetlabs.com/community/overview/">Overview</a>
                </ul>
              </li>
			<li>
                <ul>
                  <a href="http://puppetlabs.com/blog">Blog</a>
                </ul>
              </li>
			  <li>
                <ul>
                  <a href="http://puppetlabs.com/community/puppet-camp/">Puppet Camp</a>
                </ul>
              </li>
			  <li>
                <ul>
                  <a href="http://puppetlabs.com/community/user-groups-and-devops-groups/">Puppet User Groups & DevOps Groups</a>
                </ul>
              </li>
	          <li>
                <ul>
                  <a href="http://puppetlabs.com/community/presentations/">Presentations</a>
                </ul>
              </li>
			    <li>
                <ul>
                  <a href="http://puppetlabs.com/community/videos/">Videos</a>
                </ul>
              </li>
            </ul>

          <li id="company-tab" class="with-submenu">
            <a href="http://puppetlabs.com/company/">
              <span>Company</span>
              <span class="drop-down-trigger"></span>
            </a>
            <ul>
              <li class="page_item page-item-2316"><a href="http://puppetlabs.com/company/overview/">Overview</a></li>
<li class="page_item page-item-2179"><a href="http://puppetlabs.com/company/news/">News</a>
<ul class='children'>
	<li class="page_item page-item-2338"><a href="http://puppetlabs.com/company/news/press-releases/">Press Releases</a></li>
	<li class="page_item page-item-2383"><a href="http://puppetlabs.com/company/news/media-kit/">Media Kit</a></li>
</ul>
</li>
<li class="page_item page-item-1571"><a href="http://puppetlabs.com/company/careers/">Careers</a></li>
<li class="page_item page-item-10372"><a href="http://puppetlabs.com/company/management/">Management</a></li>
<li class="page_item page-item-10311"><a href="http://puppetlabs.com/company/board-and-advisors/">Board and Advisors</a></li>
<li class="page_item page-item-10367"><a href="http://puppetlabs.com/company/investors/">Investors</a></li>
<li class="page_item page-item-2313"><a href="http://puppetlabs.com/company/contact-us/">Contact Us</a></li>
<li class="page_item page-item-10579"><a href="http://puppetlabs.com/company/awards/">Awards</a></li>
            </ul>
          </li>
    		</ul>
          <div id="misc-navigation">
			  <ul>
				<li><a href="http://puppetlabs.com/security/">Security</a></li>
				<li><a href="http://docs.puppetlabs.com">Documentation</a></li>
				<li><a href="http://puppetlabs.com/resources/customer-support/">Support</a></li>
			        <li><a href="http://projects.puppetlabs.com/">Bug Tracker</a></li>
				<li><a href="http://puppetlabs.com/company/contact/contact-us">Contact Us</a></li>
				<li><a href="http://info.puppetlabs.com/download-pe2.html" class="gateway">Download</a></li>
			  </ul>
			<form action="http://www.google.com/cse" id="cse-search-box">
			  <div>
				<input type="hidden" name="cx" value="017668764424496204839:ubligvgbenm" />
				<input type="hidden" name="ie" value="UTF-8" />
				<input type="text" name="q" class="gsc-input" size="31" />
				<input type="submit" name="sa" class="searchbtn" value="Search" />
			  </div>
			</form>
			<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&lang=en"></script>
          </div>
      </nav>
    	</div>
    </header>

      <section id="masthead">
        <div class="site-width">
          <h1>Docs: <span class="section-name">PE 3.0 » Orchestration » Adding New Actions</span></h1>
          <ul id="doc-navigation">
            <li><a href="./../../index.html">Docs Home</a></li>
            <li class="with-submenu">
              <a href="#">
                <span>Quick Nav</span>
                <span class="drop-down-trigger"></span>
              </a>
               <!-- the following links can't be relative, unfortunately -->
               <!-- future: add some JS to disable this if running from file:// -->
                               <dl>
                  <dt>Puppet Documentation</dt>
                      <dd><a href="./../../puppet/3/reference/index.html">Puppet 3 Reference Manual</a></dd>
                      <dd><a href="./../../puppet/2.7/reference/index.html">Puppet 2.7 Reference Manual</a></dd>
                      <dd><a href="./../../pe/latest/index.html">Puppet Enterprise User's Guide</a></dd>
                      <dd><a href="./../../learning/index.html">Learning Puppet</a></dd>
                      <dd><a href="./../../references/latest/type.html">Resource Types</a></dd>
                      <dd><a href="./../../references/latest/function.html">Functions</a></dd>
                      <dd><a href="./../../references/latest/configuration.html">Configuration</a></dd>
                      <dd><a href="./../../references/latest/developer/index.html">Developer</a></dd>
                      <dd><a href="./../../references/glossary.html">Glossary of Puppet Terms</a></dd>
                      <dd><a href="./../../references/index.html">Older References</a></dd>
                  <dt>Facter</dt>
                      <dd><a href="./../../facter/latest/core_facts.html">Core Facts Reference</a></dd>
                  <dt>PuppetDB</dt>
                      <dd><a href="./../../puppetdb/1/index.html">PuppetDB 1 Manual</a></dd>
                  <dt>MCollective</dt>
                      <dd><a href="./../../mcollective/index.html">Index</a></dd>
                      <dd><a href="./../../mcollective/reference/index.html">References</a></dd>
                      <dd><a href="./../../mcollective/simplerpc/index.html">Writing Plugins</a></dd>
                      <dd><a href="./../../mcollective/releasenotes.html">Release Notes</a></dd>
                </dl>

            </li>
            <li><a href="./../../contribute.html">Contribute</a></li>
          </ul>
        </div>
        <br />
      </section>

      <section id="content">
        <div class="site-width">
          <div class="primary-secondary-content">
            <div class="primary-content">
              <h1>Adding New Orchestration Actions to Puppet Enterprise</h1>
              <nav class="in-page" id="page-nav">
<ol class="toc">
  <li class="toc-lv2"><a href="#actions-and-plugins">Actions and Plugins</a>
<ol class="toc">
   <li class="toc-lv3"><a href="#related-topics">Related Topics</a></li>
   <li class="toc-lv3"><a href="#about-mcollective-agent-plugins">About MCollective Agent Plugins</a></li>
</ol></li>
  <li class="toc-lv2"><a href="#getting-new-plugins">Getting New Plugins</a>
<ol class="toc">
   <li class="toc-lv3"><a href="#downloading-mcollective-agent-plugins">Downloading MCollective Agent Plugins</a></li>
   <li class="toc-lv3"><a href="#writing-mcollective-agent-plugins">Writing MCollective Agent Plugins</a></li>
</ol></li>
  <li class="toc-lv2"><a href="#installing-plugins-on-puppet-enterprise-nodes">Installing Plugins on Puppet Enterprise Nodes</a>
<ol class="toc">
   <li class="toc-lv3"><a href="#in-the-mcollective-documentation">In the MCollective Documentation</a></li>
   <li class="toc-lv3"><a href="#overview-of-plugin-installation-process">Overview of Plugin Installation Process</a></li>
   <li class="toc-lv3"><a href="#step-1-create-a-module-for-your-plugins">Step 1: Create a Module for Your Plugin(s)</a></li>
   <li class="toc-lv3"><a href="#step-2-create-relationships-and-set-variables">Step 2: Create Relationships and Set Variables</a></li>
   <li class="toc-lv3"><a href="#step-3-put-files-in-place">Step 3: Put Files in Place</a></li>
   <li class="toc-lv3"><a href="#step-4-configure-the-plugin-optional">Step 4: Configure the Plugin (Optional)</a></li>
   <li class="toc-lv3"><a href="#step-5-assign-the-class-to-nodes">Step 5: Assign the Class to Nodes</a></li>
   <li class="toc-lv3"><a href="#step-6-run-puppet">Step 6: Run Puppet</a></li>
   <li class="toc-lv3"><a href="#step-7-confirm-the-plugin-is-installed">Step 7: Confirm the Plugin is Installed</a></li>
</ol></li>
  <li class="toc-lv2"><a href="#other-kinds-of-plugins">Other Kinds of Plugins</a></li>
  <li class="toc-lv2"><a href="#example">Example</a></li>
</ol></nav>

<h2 id="actions-and-plugins">Actions and Plugins</h2>

<p>You can extend Puppet Enterprise (PE)&#8217;s orchestration engine by adding new <strong>actions.</strong> Actions are distributed in <strong>MCollective agent plugins,</strong> which are bundles of several related actions. You can write your own agent plugins (or download ones created by other people), and use Puppet Enterprise to install and configure them on your nodes.</p>

<blockquote>
  <h3 id="related-topics">Related Topics</h3>

  <ul>
    <li>For an overview of orchestration topics, see <a href="./orchestration_overview.html#orchestration-fundamentals">the Orchestration Overview page</a>.</li>
    <li>To invoke actions in the PE console, see <a href="./console_navigating_live_mgmt.html">Navigating Live Management</a>.</li>
    <li>To invoke actions on the command line, see <a href="./orchestration_invoke_cli.html">Invoking Actions</a>.</li>
    <li>For a list of built-in actions, see <a href="./orchestration_actions.html">List of Built-In Orchestration Actions</a>.</li>
  </ul>
</blockquote>

<h3 id="about-mcollective-agent-plugins">About MCollective Agent Plugins</h3>

<h4 id="components">Components</h4>

<p>MCollective agent plugins consist of two parts:</p>

<ul>
  <li>A <code>.rb</code> file containing the MCollective agent code</li>
  <li>A <code>.ddl</code> file containing a description of plugin&#8217;s actions, inputs, and outputs</li>
</ul>

<p>Every <strong>agent node</strong> that will be using this plugin needs <strong>both</strong> files. The <strong>puppet master node</strong> and <strong>console node</strong> each need the <code>.ddl</code> file.</p>

<blockquote>
  <p><strong>Note:</strong> Additionally, some MCollective agent plugins may be part of a bundle of related plugins, which may include new subcommands, data plugins, and more.</p>

  <p><a href="./../../mcollective/deploy/plugins.html#about-plugins--available-plugin-types">A full list of plugin types and the nodes they should be installed on is available here.</a> Note that in MCollective terminology, &#8220;servers&#8221; refers to Puppet Enterprise agent nodes and &#8220;clients&#8221; refers to the puppet master and console nodes.</p>
</blockquote>

<h4 id="distribution">Distribution</h4>

<p>Not every agent node needs to use every plugin &#8212; the orchestration engine is built to gracefully handle an inconsistent mix of plugins across nodes.</p>

<p>This means you can distribute special-purpose plugins to only the nodes that need them, without worrying about securing them on irrelevant nodes. Nodes that don&#8217;t have a given plugin will ignore its actions, and you can also <a href="./orchestration_invoke_cli.html#filtering-by-fact-class-and-agent">filter orchestration commands by the list of installed plugins</a>.</p>

<h2 id="getting-new-plugins">Getting New Plugins</h2>

<p>You can write your own orchestration plugins, or download ones written by other people.</p>

<h3 id="downloading-mcollective-agent-plugins">Downloading MCollective Agent Plugins</h3>

<p>There isn&#8217;t a central repository of MCollective agent plugins, but there are several good places to start looking:</p>

<ul>
  <li><a href="http://projects.puppetlabs.com/projects/mcollective-plugins/wiki">A list of the plugins released by Puppet Labs is available here.</a></li>
  <li>If you use Nagios, <a href="https://github.com/puppetlabs/mcollective-nrpe-agent">the NRPE plugin</a> (from Puppet Labs) is a good first plugin to install.</li>
  <li><a href="https://github.com/search?q=mcollective+agent">Searching GitHub for &#8220;mcollective agent&#8221;</a> will turn up many plugins, including ones for <code>vmware_tools</code>, libvirt, junk filters in <code>iptables</code>, and more.</li>
</ul>

<h3 id="writing-mcollective-agent-plugins">Writing MCollective Agent Plugins</h3>

<p>Most people who use orchestration heavily will want custom actions tailored to the needs of their own infrastructure. You can get these by writing new MCollective agent plugins in Ruby.</p>

<p>The MCollective documentation has instructions for writing agent plugins:</p>

<ul>
  <li><a href="./../../mcollective/simplerpc/agents.html">Writing agent plugins</a></li>
  <li><a href="./../../mcollective/reference/plugins/ddl.html">Writing DDL files</a></li>
  <li><a href="./../../mcollective/reference/plugins/aggregate.html">Aggregating replies for better command line interfaces</a></li>
</ul>

<p>Additionally, you can learn a lot by reading the code of Puppet Enterprise&#8217;s built-in plugins. These are located in the <code>/opt/puppet/libexec/mcollective/mcollective/</code> directory on any *nix PE node.</p>

<h2 id="installing-plugins-on-puppet-enterprise-nodes">Installing Plugins on Puppet Enterprise Nodes</h2>

<p>Since orchestration actions need to be installed on many nodes, and since installing or upgrading an agent should always restart the <code>pe-mcollective</code> service, you should use Puppet to install MCollective agent plugins.</p>

<p>This page assumes that you are <strong>familiar with the Puppet language</strong> and have <strong>written modules previously.</strong></p>

<blockquote>
  <h3 id="in-the-mcollective-documentation">In the MCollective Documentation</h3>

  <p>The MCollective documentation <a href="./../../mcollective/deploy/plugins.html">includes a guide to installing plugins</a>. Puppet Enterprise users must use the <a href="/mcollective/deploy/plugins.html#method-2-copying-plugins-into-the-libdir">&#8220;copy into libdir&#8221; installation method</a>. The remainder of this page goes into more detail about using this method with Puppet Enterprise.</p>
</blockquote>

<h3 id="overview-of-plugin-installation-process">Overview of Plugin Installation Process</h3>

<p>To install a new agent plugin, you must write a Puppet module that does the following things:</p>

<ul>
  <li>On agent nodes: copy the plugin&#8217;s <code>.rb</code> and <code>.ddl</code> files into the <code>mcollective/agent</code> subdirectory of MCollective&#8217;s libdir. This directory&#8217;s location varies between *nix and Windows nodes.</li>
  <li>On the console and puppet master nodes: if you will not be installing this plugin on <em>every</em> agent node, copy the plugin&#8217;s <code>.ddl</code> file into the <code>mcollective/agent</code> subdirectory of MCollective&#8217;s libdir.</li>
  <li>If there are any other associated plugins included (such as data or validator plugins), copy them into the proper libdir subdirectories on agent nodes, the console node, and the puppet master node.</li>
  <li>If any of these files change, restart the <code>pe-mcollective</code> service, which is managed by the <code>pe_mcollective</code> module.</li>
</ul>

<p>To accomplish these, you will need to write some limited interaction with the <code>pe_mcollective</code> module, which is part of Puppet Enterprise&#8217;s implementation. We have kept these interactions as minimal as possible; if any of them change in a future version of Puppet Enterprise, we will provide a warning in the upgrade notes for that version&#8217;s documentation.</p>

<h3 id="step-1-create-a-module-for-your-plugins">Step 1: Create a Module for Your Plugin(s)</h3>

<p>You have several options for laying this out:</p>

<ul>
  <li><strong>One class for all of your custom plugins.</strong> This works fine if you have a limited number of plugins and will be installing them on every agent node.</li>
  <li><strong>One module with several classes for individual plugins or groups of plugins.</strong> This is good for installing certain plugins on only some of your agent nodes &#8212; you can split specialized plugins into a pair of <code>mcollective_plugins::&lt;name&gt;::agent</code> and <code>mcollective_plugins::&lt;name&gt;::client</code> classes, and assign the former to the affected agent nodes and the latter to the console and puppet master nodes.</li>
  <li><strong>A new module for each plugin.</strong> This is maximally flexible, but can sometimes get cluttered.</li>
</ul>

<p>Once the module is created, <strong>put the plugin files into its <code>files/</code> directory.</strong></p>

<h3 id="step-2-create-relationships-and-set-variables">Step 2: Create Relationships and Set Variables</h3>

<p>For any class that will be installing plugins <strong>on agent nodes,</strong> you should put the following four lines near the top of the class definition:</p>

<div class="highlight"><pre><code class="ruby">    <span class="no">Class</span><span class="o">[</span><span class="s1">&#39;pe_mcollective::server::plugins&#39;</span><span class="o">]</span> <span class="o">-&gt;</span> <span class="no">Class</span><span class="o">[</span><span class="vg">$title</span><span class="o">]</span> <span class="o">~&gt;</span> <span class="no">Service</span><span class="o">[</span><span class="s1">&#39;pe-mcollective&#39;</span><span class="o">]</span>
    <span class="kp">include</span> <span class="n">pe_mcollective</span>
    <span class="vg">$plugin_basedir</span> <span class="o">=</span> <span class="vg">$pe_mcollective</span><span class="o">::</span><span class="n">server</span><span class="o">::</span><span class="n">plugins</span><span class="o">::</span><span class="n">plugin_basedir</span>
    <span class="vg">$mco_etc</span>        <span class="o">=</span> <span class="vg">$pe_mcollective</span><span class="o">::</span><span class="n">params</span><span class="o">::</span><span class="n">mco_etc</span>
</code></pre>
</div>

<p>This will do the following:</p>

<ul>
  <li>Ensure that the necessary plugin directories already exist before we try to put files into them. (In certain cases, these directories are managed by resources in the <code>pe_mcollective::server::plugins</code> class.)</li>
  <li>Restart the <code>pe-mcollective</code> service whenever new plugins are installed or upgraded. (This service resource is declared in the <code>pe_mcollective::server</code> class.)</li>
  <li>Set variables that will correctly refer to the plugins directory and configuration directory on both *nix and Windows nodes.</li>
</ul>

<blockquote>
  <p><strong>Note:</strong> The <code>Class[$title]</code> notation seen above is a resource reference to the class that contains this statement; it uses the <code>$title</code> variable, which always contains the name of the surrounding container.</p>
</blockquote>

<!-- API WARNING: We are advising users to rely on the following promises:

* If any `agent` or `data`-like subdirectory of the libdir is going to be managed, it should be managed by the pe_mcollective::server::plugins class. Users shouldn't have to manage these directories, and should avoid doing so in case we decide to start managing more of them. (In practice, they're all created by the package that installs pe-mcollective and we don't manage them, but a comment in the module implied that we may start managing more of them in the future.)

* If a node has MCollective anyway, it is safe to use include on the pe_mcollective class, and that doing so will eventually cause the pe_mcollective::params class and the pe_mcollective::server::plugins class to be declared. Nothing weird will happen.

* The pe_mcollective::server::plugins class's $plugin_basedir variable will continue to be available and correct on all supported versions of all platforms.

* The pe-mcollective service's name is pe-mcollective. If a node has MCollective at all, this service will always be present, will have the right name, and can be safely notified.

* We also rely on the following variables from the params class:
    $pe_mcollective::params::mco_etc,
    $pe_mcollective::params::root_owner,
    $pe_mcollective::params::root_group,
    $pe_mcollective::params::root_mode,

* Implicitly, we're relying on the plugins.d directory already existing in MCollective's config directory.

If these promises change, we need a notification in pre-docs. Docs team will:

* Put a warning in the previous version's instructions.
* Change the upcoming version's instructions to match new behavior.
* Put a highly visible warning in the upgrade notes for the new version.
* Maintain that upgrade warning until the next MAJOR version, at which point we can roll it up into a "when upgrading from any prior version, make sure that..." type note.

-->

<h3 id="step-3-put-files-in-place">Step 3: Put Files in Place</h3>

<p>First, set file defaults: all of these files should be owned by root and only writable by root (or the Administrators user, on Windows). The <code>pe_mcollective</code> module has helpful variables for setting these:</p>

<div class="highlight"><pre><code class="ruby">    <span class="no">File</span> <span class="p">{</span>
      <span class="n">owner</span> <span class="o">=&gt;</span> <span class="vg">$pe_mcollective</span><span class="o">::</span><span class="n">params</span><span class="o">::</span><span class="n">root_owner</span><span class="p">,</span>
      <span class="n">group</span> <span class="o">=&gt;</span> <span class="vg">$pe_mcollective</span><span class="o">::</span><span class="n">params</span><span class="o">::</span><span class="n">root_group</span><span class="p">,</span>
      <span class="n">mode</span>  <span class="o">=&gt;</span> <span class="vg">$pe_mcollective</span><span class="o">::</span><span class="n">params</span><span class="o">::</span><span class="n">root_mode</span><span class="p">,</span>
    <span class="p">}</span>
</code></pre>
</div>

<p>Next, put all relevant plugin files into place, using the <code>$plugin_basedir</code> variable we set above:</p>

<div class="highlight"><pre><code class="ruby">    <span class="n">file</span> <span class="p">{</span><span class="s2">&quot;${plugin_basedir}/agent/nrpe.ddl&quot;</span><span class="p">:</span>
      <span class="k">ensure</span> <span class="o">=&gt;</span> <span class="n">file</span><span class="p">,</span>
      <span class="n">source</span> <span class="o">=&gt;</span> <span class="s1">&#39;puppet:///modules/mco_plugins/mcollective-nrpe-agent/agent/nrpe.ddl&#39;</span><span class="p">,</span>
    <span class="p">}</span>

    <span class="n">file</span> <span class="p">{</span><span class="s2">&quot;${plugin_basedir}/agent/nrpe.rb&quot;</span><span class="p">:</span>
      <span class="k">ensure</span> <span class="o">=&gt;</span> <span class="n">file</span><span class="p">,</span>
      <span class="n">source</span> <span class="o">=&gt;</span> <span class="s1">&#39;puppet:///modules/mco_plugins/mcollective-nrpe-agent/agent/nrpe.rb&#39;</span><span class="p">,</span>
    <span class="p">}</span>
</code></pre>
</div>

<h3 id="step-4-configure-the-plugin-optional">Step 4: Configure the Plugin (Optional)</h3>

<p>Some agent plugins require extra configuration to work properly. If present, these settings must be present on every <strong>agent node</strong> that will be using the plugin.</p>

<p>The main <code>server.cfg</code> file is managed by the <code>pe_mcollective</code> module. Although editing it is possible, it is <em>not supported.</em> Instead, you should take advantage of <a href="./../../mcollective/configure/server.html#plugin-config-directory-optional">the MCollective daemon&#8217;s plugin config directory</a>, which is located at <code>"${mco_etc}/plugin.d"</code>.</p>

<ul>
  <li>File names in this directory should be of the format <code>&lt;agent name&gt;.cfg</code>.</li>
  <li>Setting names in plugin config files are slightly different:</li>
</ul>

<table>
  <thead>
    <tr>
      <th>In server.cfg</th>
      <th>In ${mco_etc}/plugin.d/nrpe.conf</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td><code>plugin.nrpe.conf_dir = /etc/nagios/nrpe</code></td>
      <td><code>conf_dir = /etc/nagios/nrpe</code></td>
    </tr>
  </tbody>
</table>

<p>You can use a normal file resource to create these config files with the appropriate values. For simple configs, you can set the content directly in the manifest; for complex ones, you can use a template.</p>

<div class="highlight"><pre><code class="ruby">    <span class="n">file</span> <span class="p">{</span><span class="s2">&quot;${mco_etc}/plugin.d/nrpe.cfg&quot;</span><span class="p">:</span>
      <span class="k">ensure</span>  <span class="o">=&gt;</span> <span class="n">file</span><span class="p">,</span>
      <span class="n">content</span> <span class="o">=&gt;</span> <span class="s2">&quot;conf_dir = /etc/nagios/nrpe</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span>
    <span class="p">}</span>
</code></pre>
</div>

<h4 id="policy-files">Policy Files</h4>

<p>You can also distribute <a href="http://projects.puppetlabs.com/projects/mcollective-plugins/wiki/AuthorizationActionPolicy">policy files for the ActionPolicy authorization plugin</a>. This can be a useful way to completely disable certain unused actions, limit actions so they can only be used on a subset of your agent nodes, or allow certain actions from the command line but not from the live management page.</p>

<p>These files should be named for the agent plugin they apply to, and should go in <code>${mco_etc}/policies/&lt;plugin name&gt;.cfg</code>. Policy files should be distributed to every agent node that runs the plugin you are configuring.</p>

<blockquote>
  <p><strong>Note:</strong> The <code>policies</code> directory doesn&#8217;t exist by default; you will need to use a <code>file</code> resource with <code>ensure =&gt; directory</code> to initialize it.</p>
</blockquote>

<p><a href="http://projects.puppetlabs.com/projects/mcollective-plugins/wiki/AuthorizationActionPolicy">The policy file format is documented here.</a> When configuring caller IDs in policy files, note that PE uses the following two IDs by default:</p>

<ul>
  <li><code>cert=peadmin-public</code> &#8212; the command line orchestration client, as used by the <code>peadmin</code> user on the puppet master server.</li>
  <li><code>cert=puppet-dashboard-public</code> &#8212; the live management page in the PE console.</li>
</ul>

<p>Example: This code would completely disable the package plugin&#8217;s <code>update</code> option, to force users to do package upgrades through your centralized Puppet code:</p>

<div class="highlight"><pre><code class="ruby">    <span class="n">file</span> <span class="p">{</span><span class="s2">&quot;${mco_etc}/policies&quot;</span><span class="p">:</span> <span class="k">ensure</span> <span class="o">=&gt;</span> <span class="n">directory</span><span class="p">,}</span>

    <span class="n">file</span> <span class="p">{</span><span class="s2">&quot;${mco_etc}/policies/package.policy&quot;</span><span class="p">:</span>
      <span class="k">ensure</span> <span class="o">=&gt;</span> <span class="n">file</span><span class="p">,</span>
      <span class="n">content</span> <span class="o">=&gt;</span> <span class="s2">&quot;policy default allow</span>
<span class="s2">    deny	*	update	*	*</span>
<span class="s2">    &quot;</span><span class="p">,</span>
    <span class="p">}</span>
</code></pre>
</div>

<h3 id="step-5-assign-the-class-to-nodes">Step 5: Assign the Class to Nodes</h3>

<p>For plugins you are distributing to <strong>all agent nodes,</strong> you can use the PE console to assign your class to the special <code>mcollective</code> group. (This group is automatically maintained by the console, and contains all PE nodes which have not been added to the special <code>no mcollective</code> group.)</p>

<p>For plugins you are only distributing to <strong>some</strong> agent nodes, you must do the following:</p>

<ul>
  <li>Create two Puppet classes for the plugin: a main class that installs everything, and a &#8220;client&#8221; class that only installs the <code>.ddl</code> file and the supporting plugins.</li>
  <li>Assign the main class to any agent nodes that should be running the plugin.</li>
  <li>Assign the &#8220;client&#8221; class to the <code>puppet_console</code> and <code>puppet_master</code> groups in the console. (These special groups contain all of the console and puppet master nodes in your deployment, respectively.)</li>
</ul>

<h3 id="step-6-run-puppet">Step 6: Run Puppet</h3>

<p>You can either wait for the next scheduled Puppet run, or <a href="./orchestration_puppet.html">trigger an on-demand run using MCollective.</a></p>

<h3 id="step-7-confirm-the-plugin-is-installed">Step 7: Confirm the Plugin is Installed</h3>

<p>Follow <a href="./../../mcollective/deploy/plugins.html#verifying-installed-agent-plugins">the instructions in the MCollective documentation</a> to verify that your new plugins are properly installed.</p>

<h2 id="other-kinds-of-plugins">Other Kinds of Plugins</h2>

<p>In addition to installing MCollective agent plugins, you may occasionally need to install other kinds of plugin, such as data plugins. This process is effectively identical to installing agent plugins, although the concerns about restricting distribution of certain plugins to special nodes are generally not relevant.</p>

<h2 id="example">Example</h2>

<p>This is an example of a Puppet class that installs <a href="https://github.com/puppetlabs/mcollective-nrpe-agent">the Puppet Labs nrpe plugin</a>. The <code>files</code> directory of the module would simply contain a complete copy of <a href="https://github.com/puppetlabs/mcollective-nrpe-agent">the nrpe plugin&#8217;s Git repo</a>. In this example, we are not creating separate agent and client classes.</p>

<div class="highlight"><pre><code class="ruby">    <span class="c1"># /etc/puppetlabs/puppet/modules/mco_plugins/manifests/nrpe.pp</span>
    <span class="k">class</span> <span class="n">mco_plugins</span><span class="o">::</span><span class="n">nrpe</span> <span class="p">{</span>
      <span class="no">Class</span><span class="o">[</span><span class="s1">&#39;pe_mcollective::server::plugins&#39;</span><span class="o">]</span> <span class="o">-&gt;</span> <span class="no">Class</span><span class="o">[</span><span class="vg">$title</span><span class="o">]</span> <span class="o">~&gt;</span> <span class="no">Service</span><span class="o">[</span><span class="s1">&#39;pe-mcollective&#39;</span><span class="o">]</span>
      <span class="kp">include</span> <span class="n">pe_mcollective</span>
      <span class="vg">$plugin_basedir</span> <span class="o">=</span> <span class="vg">$pe_mcollective</span><span class="o">::</span><span class="n">server</span><span class="o">::</span><span class="n">plugins</span><span class="o">::</span><span class="n">plugin_basedir</span>
      <span class="vg">$mco_etc</span>        <span class="o">=</span> <span class="vg">$pe_mcollective</span><span class="o">::</span><span class="n">params</span><span class="o">::</span><span class="n">mco_etc</span>

      <span class="no">File</span> <span class="p">{</span>
        <span class="n">owner</span> <span class="o">=&gt;</span> <span class="vg">$pe_mcollective</span><span class="o">::</span><span class="n">params</span><span class="o">::</span><span class="n">root_owner</span><span class="p">,</span>
        <span class="n">group</span> <span class="o">=&gt;</span> <span class="vg">$pe_mcollective</span><span class="o">::</span><span class="n">params</span><span class="o">::</span><span class="n">root_group</span><span class="p">,</span>
        <span class="n">mode</span>  <span class="o">=&gt;</span> <span class="vg">$pe_mcollective</span><span class="o">::</span><span class="n">params</span><span class="o">::</span><span class="n">root_mode</span><span class="p">,</span>
      <span class="p">}</span>

      <span class="n">file</span> <span class="p">{</span><span class="s2">&quot;${plugin_basedir}/agent/nrpe.ddl&quot;</span><span class="p">:</span>
        <span class="k">ensure</span> <span class="o">=&gt;</span> <span class="n">file</span><span class="p">,</span>
        <span class="n">source</span> <span class="o">=&gt;</span> <span class="s1">&#39;puppet:///modules/mco_plugins/mcollective-nrpe-agent/agent/nrpe.ddl&#39;</span><span class="p">,</span>
      <span class="p">}</span>

      <span class="n">file</span> <span class="p">{</span><span class="s2">&quot;${plugin_basedir}/agent/nrpe.rb&quot;</span><span class="p">:</span>
        <span class="k">ensure</span> <span class="o">=&gt;</span> <span class="n">file</span><span class="p">,</span>
        <span class="n">source</span> <span class="o">=&gt;</span> <span class="s1">&#39;puppet:///modules/mco_plugins/mcollective-nrpe-agent/agent/nrpe.rb&#39;</span><span class="p">,</span>
      <span class="p">}</span>

      <span class="n">file</span> <span class="p">{</span><span class="s2">&quot;${plugin_basedir}/aggregate/nagios_states.rb&quot;</span><span class="p">:</span>
        <span class="k">ensure</span> <span class="o">=&gt;</span> <span class="n">file</span><span class="p">,</span>
        <span class="n">source</span> <span class="o">=&gt;</span> <span class="s1">&#39;puppet:///modules/mco_plugins/mcollective-nrpe-agent/aggregate/nagios_states.rb&#39;</span><span class="p">,</span>
      <span class="p">}</span>

      <span class="n">file</span> <span class="p">{</span><span class="s2">&quot;${plugin_basedir}/application/nrpe.rb&quot;</span><span class="p">:</span>
        <span class="k">ensure</span> <span class="o">=&gt;</span> <span class="n">file</span><span class="p">,</span>
        <span class="n">source</span> <span class="o">=&gt;</span> <span class="s1">&#39;puppet:///modules/mco_plugins/mcollective-nrpe-agent/application/nrpe.rb&#39;</span><span class="p">,</span>
      <span class="p">}</span>

      <span class="n">file</span> <span class="p">{</span><span class="s2">&quot;${plugin_basedir}/data/nrpe_data.ddl&quot;</span><span class="p">:</span>
        <span class="k">ensure</span> <span class="o">=&gt;</span> <span class="n">file</span><span class="p">,</span>
        <span class="n">source</span> <span class="o">=&gt;</span> <span class="s1">&#39;puppet:///modules/mco_plugins/mcollective-nrpe-agent/data/nrpe_data.ddl&#39;</span><span class="p">,</span>
      <span class="p">}</span>

      <span class="n">file</span> <span class="p">{</span><span class="s2">&quot;${plugin_basedir}/data/nrpe_data.rb&quot;</span><span class="p">:</span>
        <span class="k">ensure</span> <span class="o">=&gt;</span> <span class="n">file</span><span class="p">,</span>
        <span class="n">source</span> <span class="o">=&gt;</span> <span class="s1">&#39;puppet:///modules/mco_plugins/mcollective-nrpe-agent/data/nrpe_data.rb&#39;</span><span class="p">,</span>
      <span class="p">}</span>

      <span class="c1"># Set config: If this setting were in the usual server.cfg file, its name would</span>
      <span class="c1"># be plugin.nrpe.conf_dir</span>
      <span class="n">file</span> <span class="p">{</span><span class="s2">&quot;${mco_etc}/plugin.d/nrpe.cfg&quot;</span><span class="p">:</span>
        <span class="k">ensure</span>  <span class="o">=&gt;</span> <span class="n">file</span><span class="p">,</span>
        <span class="n">content</span> <span class="o">=&gt;</span> <span class="s2">&quot;conf_dir = /etc/nagios/nrpe</span><span class="se">\n</span><span class="s2">&quot;</span><span class="p">,</span>
      <span class="p">}</span>

    <span class="p">}</span>
</code></pre>
</div>

<hr />

<ul>
  <li><a href="./orchestration_config.html">Next: Configuring Orchestration</a></li>
</ul>


              <blockquote><p style="font-size: 1.3em; text-align: center;"><a href="#content">↑ Back to top</a></p></blockquote>
            </div>
            <nav class="main">
                  <div id="subCol">


<h3><a href="./index.html">Puppet Enterprise 3.0</a></h3>

<ul>
  <li><strong>Overview</strong>
    <ul>
      <li><a href="./overview_about_pe.html">About Puppet Enterprise</a></li>
      <li><a href="./overview_whats_new.html">New Features</a></li>
      <li><a href="./overview_getting_support.html">Getting Support</a></li>
    </ul>
  </li>
  <li><strong>Quick Start</strong>
    <ul>
        <li><a href="./quick_start.html">Quick Start: Using PE</a></li>
        <li><a href="./quick_writing.html">Quick Start: Writing Modules</a></li>
    </ul>
  </li>
  <li><strong>Installing Puppet Enterprise</strong>
    <ul>
      <li><a href="./install_system_requirements.html">System Requirements</a></li>
      <li><a href="./install_basic.html">Installing PE</a></li>
      <li><a href="./install_windows.html">Installing Windows Agents</a></li>
      <li><a href="./install_upgrading.html">Upgrading</a></li>
      <li><a href="./install_uninstalling.html">Uninstalling</a></li>
      <li><a href="./install_automated.html">Automated Installation</a></li>
      <li><a href="./install_answer_file_reference.html">Answer File Reference</a></li>
      <li><a href="./install_what_and_where.html">What gets installed where?</a></li>
    </ul>
  </li>
  <li><strong>The PE Console</strong>
    <ul>
      <li><a href="./console_accessing.html">Accessing the Console</a></li>
      <li><a href="./console_navigating.html">Navigating the Console</a></li>
      <li><a href="./console_navigating_live_mgmt.html">Navigating the Live Management Page</a></li>
      <li><a href="./console_cert_mgmt.html">Managing Node Requests</a></li>
      <li><a href="./console_classes_groups.html">Grouping & Classifying Nodes</a></li>
      <li><a href="./console_reports.html">Viewing Reports & Inventory Data</a></li>
      <li><a href="./console_auth.html">Managing Users</a></li>
      <li><a href="./console_inventory_search.html">Inventory Search</a></li>
      <li><a href="./console_rake_api.html">Rake API and List of Tasks</a></li>
      <li><a href="./console_rake_api_old.html">Rake API: List of Tasks (Old Argument Style)</a></li>
      <li><a href="./console_config.html">Configuring the Console</a></li>
    </ul>
  </li>
  <li><strong>Puppet Core</strong>
    <ul>
      <li><a href="./puppet_overview.html">Overview</a></li>
      <li><a href="./puppet_modules_manifests.html">Modules & Manifests</a></li>
      <li><a href="./puppet_assign_configurations.html">Assigning Configurations to Nodes</a></li>
      <li><a href="./puppet_tools.html">Tools</a></li>
      <li><a href="./puppet_data_library.html">Puppet Data Library</a></li>
      <li><a href="./puppet_references.html">References</a></li>
      <li><a href="./puppet_config.html">Configuring Puppet Core</a></li>
    </ul>
  </li>
  <li><strong>Orchestration</strong>
    <ul>
      <li><a href="./orchestration_overview.html">Overview</a></li>
      <li><a href="./orchestration_invoke_cli.html">Invoking Actions</a></li>
      <li><a href="./orchestration_puppet.html">Controlling Puppet</a></li>
      <li><a href="./orchestration_resources.html">Browsing Resources</a></li>
      <li><a href="./orchestration_actions.html">List of Built-In Actions</a></li>
      <li><span class="currentpage">Adding New Actions</span></li>
      <!-- <li><a href="./orchestration_integrating.html">Integrating Applications</a></li> -->
      <li><a href="./orchestration_config.html">Configuring Orchestration</a></li>
    </ul>
  </li>
  <li><strong>Cloud Provisioning</strong>
    <ul>
      <li><a href="./cloudprovisioner_overview.html">Overview</a></li>
      <li><a href="./cloudprovisioner_configuring.html">Installing & Configuring Cloud Provisioner</a></li>
      <li><a href="./cloudprovisioner_classifying_installing.html">Classifying Nodes & Remotely Installing Puppet</a></li>
      <li><a href="./cloudprovisioner_vmware.html">Provisioning with VMware</a></li>
      <li><a href="./cloudprovisioner_aws.html">Provisioning with AWS</a></li>
      <li><a href="./cloudprovisioner_workflow.html">Sample Workflow</a></li>
    </ul>
  </li>
  <li><strong>The PE Accounts Module</strong>
    <ul>
      <li><a href="./accounts_user_type.html">The pe_accounts::user Type</a></li>
      <li><a href="./accounts_class.html">The pe_accounts Class</a></li>
    </ul>
  </li>
   <li><strong>Maintenance</strong>
    <ul>
      <li> <a href="./maintain_console-db.html">Console & Database Maintenance</a></li>
      <!--
<li> <a href="./maintain_puppet.html">Puppet Core Maintenance</a></li>
      <li> <a href="./maintain_orchestration.html">Orchestration Maintenance</a></li>
 -->
    </ul>
  </li>
  <li><strong>Troubleshooting</strong>
    <ul>
     <li> <a href="./trouble_install.html">Troubleshooting the Installer</a></li>
     <li> <a href="./trouble_comms.html">Troubleshooting Connections & Communications</a></li>
     <li> <a href="./trouble_console-db.html">Troubleshooting the Console & Database</a></li>
     <li> <a href="./trouble_puppet.html">Troubleshooting the Puppet Core</a></li>
     <li> <a href="./trouble_orchestration.html">Troubleshooting Orchestration</a></li>
     <li> <a href="./trouble_cloudprovisioner.html">Troubleshooting Cloud Provisioner</a></li>
     <li> <a href="./trouble_windows.html">Troubleshooting Windows</a></li>
    </ul>
  </li>
  <li><strong>Appendix</strong>
    <ul>
      <li><a href="./appendix.html#release-notes">Release Notes</a></li>
      <li><a href="./appendix.html#known-issues">Known Issues</a></li>
       <li><a href="./compliance_alt.html">Compliance Alternate Workflow</a></li>
    <!--    <li><a href="./cloning_alt.html">Cloning Alternate Workflow</a></li> -->
    </ul>
  </li>
</ul>

                      <div style="margin-top: 1.5em; padding-bottom: 10px;">
                          <p style="font-family: 'Lucida Grande',Lucida,Verdana,sans-serif;font-size: 16px; font-weight: bold; line-height: 22px; margin-bottom: 10px;">Download the Docs</p>
                          <a href="http://info.puppetlabs.com/download-pdfs.html"><img src="./../../images/smallbits_small_docs.png" alt="Puppet docs download"></a>
                      </div>
                      <div style="margin-top: 0; padding-bottom: 10px;">
                          <p style="font-family: 'Lucida Grande',Lucida,Verdana,sans-serif;font-size: 16px; font-weight: bold; line-height: 22px; margin-bottom: 10px;">Download Puppet Enterprise</p>
                          <a href="http://info.puppetlabs.com/download-pe.html"><img src="./../../images/puppet_cert_home.jpg" alt="Puppet Enterprise promo"></a>
                      </div>
                  </div>
            </nav>
          </div>
        </div>
      </section>

		<footer id="footer">
      <div class="site-width">

        <div class="primary-secondary-content">
          <div class="primary-content">
            <section id="newsletter">
                 <h4>Puppet Labs is Hiring</h4>
                 <p><a href="http://www.puppetlabs.com/company/jobs/">Engineers, developers & consultants</a>
                  <p>
		<h4>Newsletter</h4>

              <p>Stay up to date on all things puppet</p>

				<form class="lpeRegForm formNotEmpty" method="post" enctype="application/x-www-form-urlencoded" action="http://info.puppetlabs.com/index.php/leadCapture/save"; id="mktForm_1013" name="mktForm_1013">

				<label>Email Address:</label><span class='mktInput'><input class='mktFormText mktFormEmail' name="Email" id="Email" type='text' value="" maxlength='255'  /><span class='mktFormMsg'></span></span>

				<input id='mktFrmSubmit' type='submit' class='btn' style="width: auto; overflow: visible; padding-left: .25em; padding-right: .25em;" value='Subscribe' name='submitButton' onclick='formSubmit(document.getElementById("mktForm_1013")); return false;' />

				<input style='display: none;' id='mktFrmReset' type='reset' value='Clear' name='resetButton' onclick='formReset(document.getElementById("mktForm_1013")); return false;' />

				<span style="display:none;"><input type="text" name="_marketo_comments" value="" /></span>
				<input type="hidden" name="lpId" value="-1" />
				<input type="hidden" name="subId" value="100" />

				<input type="hidden" name="kw" value="" />
				<input type="hidden" name="cr" value="" />

				<input type="hidden" name="searchstr" value="" />
				<input type="hidden" name="lpurl" value="http://info.puppetlabs.com/testsubscription.html?cr={creative}&kw={keyword}"; />
				<input type="hidden" name="formid" value="1013" />
				<input type="hidden" name="returnURL" value="http://www.puppetlabs.com/misc/subscription-thank-you/"; />
				<input type="hidden" name="retURL" value="http://www.puppetlabs.com/misc/subscription-thank-you/"; />
				<input type="hidden" name="_mkt_disp" value="return" />
				<input type="hidden" name="_mkt_trk" value="" />

				</form>
				<script type="text/javascript" src="http://info.puppetlabs.com/js/mktFormSupport.js"></script>

				<script type="text/javascript">
				function formSubmit(elt) {
				return Mkto.formSubmit(elt);
				}
				function formReset(elt) {
				return Mkto.formReset(elt);
				}
				</script>

<a href="http://info.puppetlabs.com/puppet-enterprise" class="fbtn">Try Puppet Enterprise FREE</a>

            </section>
            <section id="elsewhere">
              <h4>Get Involved</h4>
              <ul>

                <li class="chat"><a href="http://webchat.freenode.net/?channels=puppet" rel="external"><span class="indicator"></span><span>Chat with us on IRC</span></a></li>
		<li class="discussion"><a href="http://groups.google.com/group/puppet-dev" rel="external"><span class="indicator"></span><span>Join the Puppet Developer List</span></a></li>
                <li class="discussion"><a href="http://groups.google.com/group/puppet-users?pli=1" rel="external"><span class="indicator"></span><span>Join the Puppet User List</span></a></li>

                <li class="linkedin"><a href="http://www.linkedin.com/groups?about=&gid=696467&trk=anet_ug_grppro" rel="external"><span class="indicator"></span><span>Join the Puppet Users LinkedIn group</span></a></li>

              </ul>
		<p>
		              		<h4>Follow us&#8230;</h4>

              		<ul class="followus">


			<li><a href="http://feeds.feedburner.com/PuppetLabs" target="_blank"><img src="http://www.puppetlabs.com/wp-content/plugins/my-profiles/images/rss.png" border="0"></a></li>
			<li><a href="http://www.facebook.com/pages/Puppet-Labs/219089920711" target="_blank"><img src="http://www.puppetlabs.com//wp-content/plugins/my-profiles/images/facebook.png" border="0"></a></li>
			<li><a href="http://www.twitter.com/puppetlabs" target="_blank"><img src="http://www.puppetlabs.com//wp-content/plugins/my-profiles/images/twitter.png" border="0"></a></li>
			<li><a href="http://www.linkedin.com/groups?about=&amp;gid=696467&amp;trk=anet_ug_grppro" target="_blank"><img src="http://www.puppetlabs.com//wp-content/uploads/2011/01/LinkedIn_IN_Icon_32px.png" border="0"></a></li>    <li><a href="https://github.com/puppetlabs" target="_blank"><img src="http://www.puppetlabs.com//wp-content/uploads/2011/01/github_icon.png" border="0"></a></li>
			<li><a href="https://plus.google.com/112682055028218091774?rel=author" target="_blank"><img src="https://puppetlabs.com/wp-content/uploads/2013/05/google_plus32x32.png" alt="Find Us on Google+" border="0"></a></li>
					</ul>

              	</p>

            </section>
          </div>
          <div class="secondary-content">
            <section id="book-it">
              <h4>Get the book!</h4>

              <p>James Turnbull and Jeff McCune's book <a href="http://www.apress.com/9781430230571" rel="nofollow">Pro Puppet</a> is a comprehensive and up-to-date look at Puppet and MCollective. </p>
              <a href="http://www.apress.com/9781430230571" rel="nofollow"><img src="http://www.puppetlabs.com/wp-content/uploads/2011/05/propuppetthumb.png" /></a>
            </section>
          </div>
        </div>
      </div>
		</footer>

    <div id="copyright">
      <div class="site-width">
        &copy; 2011 <a href="http://www.puppetlabs.com/" title="Puppet Labs">Puppet Labs</a>
        <span class="vcard">
         <span class="org"></span>
         <a class="email" href="mailto:info@puppetlabs.com">info@puppetlabs.com</a>

          <span class="adr">
           <span class="street-address">926 NW 13th Avenue #210</span>
           /
           <span class="locality">Portland</span>,
           <span class="region">OR</span>
           <span class="postal-code">97209</span>

          </span>

         <span class="tel">1-877-575-9775</span>
        </span>
      </div>
    </div>

  	<script type="text/javascript">Cufon.now();</script>
  	<style type="text/css">h1, h2, .btn { visibility : visible; }</style>


	</body>
</html>
