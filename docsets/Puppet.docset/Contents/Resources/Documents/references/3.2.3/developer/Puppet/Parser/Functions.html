<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" xml:lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=c" />
<title>
  Module: Puppet::Parser::Functions
  
    &#8212; Documentation by YARD 0.8.4.1
  
</title>

  <link rel="stylesheet" href="../../css/style.css" type="text/css" media="screen" charset="utf-8" />

  <link rel="stylesheet" href="../../css/common.css" type="text/css" media="screen" charset="utf-8" />

<script type="text/javascript" charset="utf-8"><![CDATA[<![CDATA[<![CDATA[
  hasFrames = window.top.frames.main ? true : false;
  relpath = '../../';
  framesUrl = "../../frames.html#!" + escape(window.location.href);
]]]]]]><![CDATA[><![CDATA[>]]]]><![CDATA[>]]></script>


  <script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>

  <script type="text/javascript" charset="utf-8" src="../../js/app.js"></script>


  </head>
  <body>
    <div id="header">
      <div id="menu">
  
    <a href="../../_index.html">Index (F)</a> &#187;
    <span class="title"><span class="object_link">Puppet</span></span> &#187; <span class="title"><span class="object_link"><a href="../Parser.html" title="Puppet::Parser (module)">Parser</a></span></span>
     &#187; 
    <span class="title">Functions</span>
  

  <div class="noframes"><span class="title">(</span><a href="." target="_top">no frames</a><span class="title">)</span></div>
</div>

      <div id="search">
  
    <a class="full_list_link" id="class_list_link" href="../../class_list.html">
      Class List
    </a>
  
    <a class="full_list_link" id="method_list_link" href="../../method_list.html">
      Method List
    </a>
  
    <a class="full_list_link" id="file_list_link" href="../../file_list.html">
      File List
    </a>
  
</div>
      <div class="clear"></div>
    </div>

    <iframe id="search_frame"></iframe>

    <div id="content"><h1>Module: Puppet::Parser::Functions
  
  
  
</h1>

<dl class="box">
  
  
    
  
    
  
  
  
    <dt class="r1 last">Defined in:</dt>
    <dd class="r1 last">lib/puppet/parser/functions.rb<span class="defines">,<br />
  lib/puppet/parser/functions/hiera.rb,<br /> lib/puppet/parser/functions/split.rb,<br /> lib/puppet/parser/functions/extlookup.rb,<br /> lib/puppet/parser/functions/hiera_hash.rb,<br /> lib/puppet/parser/functions/hiera_array.rb,<br /> lib/puppet/parser/functions/hiera_include.rb</span>
</dd>
  
</dl>
<div class="clear"></div>

<h2>Overview</h2><div class="docstring">
  <div class="discussion">
    <p>A module for managing parser functions.  Each specified function
is added to a central module that then gets included into the Scope
class.</p>


  </div>
</div>
<div class="tags">
  

</div>
  <h2>Constant Summary</h2>
  







  
    <h2>
      Class Method Summary
      <small>(<a href="#" class="summary_toggle">collapse</a>)</small>
    </h2>

    <ul class="summary">
      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#arity-class_method" title="arity (class method)">+ (Integer) <strong>arity</strong>(name) </a>
    

    
  </span>
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline"><p>Return the number of arguments a function expects.</p>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#autoloader-class_method" title="autoloader (class method)">+ (Object) <strong>autoloader</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class="inline"><p>Accessor for singleton autoloader.</p>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#environment_module-class_method" title="environment_module (class method)">+ (Object) <strong>environment_module</strong>(env = nil) </a>
    

    
  </span>
  
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class="inline"><p>Get the module that functions are mixed into corresponding to an
environment.</p>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#function-class_method" title="function (class method)">+ (Symbol, false) <strong>function</strong>(name) </a>
    

    
  </span>
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline"><p>Determine if a function is defined.</p>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#newfunction-class_method" title="newfunction (class method)">+ (Hash) <strong>newfunction</strong>(name, options = {}, &amp;block) </a>
    

    
  </span>
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline"><p>Create a new Puppet DSL function.</p>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#reset-class_method" title="reset (class method)">+ (Object) <strong>reset</strong> </a>
    

    
  </span>
  
  
  
  
  
  
  
  <span class="private note title">private</span>

  
    <span class="summary_desc"><div class="inline"><p>Reset the list of loaded functions.</p>
</div></span>
  
</li>

      
        
<li class="public ">
  <span class="summary_signature">
    
      <a href="#rvalue%3F-class_method" title="rvalue? (class method)">+ (Boolean) <strong>rvalue?</strong>(name) </a>
    

    
  </span>
  
  
  
  
  
  
  
  

  
    <span class="summary_desc"><div class="inline"><p>Determine whether a given function returns a value.</p>
</div></span>
  
</li>

      
    </ul>
  


  
  
  
  
  
  
  
  
  <h3 class="inherited">Methods included from <span class="object_link">Util</span></h3>
  <p class="inherited"><span class="object_link"><a href="../Util.html#exit_on_fail-class_method" title="Puppet::Util.exit_on_fail (method)">exit_on_fail</a></span>, <span class="object_link"><a href="../Util.html#exit_on_fail-instance_method" title="Puppet::Util#exit_on_fail (method)">exit_on_fail</a></span>, <span class="object_link"><a href="../Util.html#which-class_method" title="Puppet::Util.which (method)">which</a></span>, <span class="object_link"><a href="../Util.html#which-instance_method" title="Puppet::Util#which (method)">which</a></span></p>

  
  
  
  
  
  

  <div id="class_method_details" class="method_details_list">
    <h2>Class Method Details</h2>

    
      <div class="method_details first">
  <h3 class="signature first" id="arity-class_method">
  
    + (<tt>Integer</tt>) <strong>arity</strong>(name) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Return the number of arguments a function expects.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class="name">name</span>
      
      
        <span class="type">(<tt><span class="object_link">Symbol</span></tt>)</span>
      
      
      
        &#8212;
        <div class="inline"><p>the function</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class="type">(<tt>Integer</tt>)</span>
      
      
      
        &#8212;
        <div class="inline"><p>The arity of the function. See <span class="object_link"><a href="#newfunction-class_method" title="Puppet::Parser::Functions.newfunction (method)">newfunction</a></span> for
the meaning of negative values.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


223
224
225
226</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/parser/functions.rb', line 223</span>

<span class="rubyid_def def kw">def</span> <span class="rubyid_self self kw">self</span><span class="dot token">.</span><span class="rubyid_arity identifier id">arity</span><span class="lparen token">(</span><span class="rubyid_name identifier id">name</span><span class="rparen token">)</span>
  <span class="rubyid_func identifier id">func</span> <span class="assign token">=</span> <span class="rubyid_get_function identifier id">get_function</span><span class="lparen token">(</span><span class="rubyid_name identifier id">name</span><span class="rparen token">)</span>
  <span class="rubyid_func identifier id">func</span> <span class="integer val">? </span><span class="rubyid_func identifier id">func</span><span class="lbrack token">[</span><span class="symbol val">:arity</span><span class="rbrack token">]</span> <span class="colon op">:</span> <span class="integer val">-1</span>
<span class="rubyid_end end kw">end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="autoloader-class_method">
  
    + (<tt><span class="object_link">Object</span></tt>) <strong>autoloader</strong> &#160;<span class="private note title">private</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>
<p>Accessor for singleton autoloader</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


35
36
37
38
39</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/parser/functions.rb', line 35</span>

<span class="rubyid_def def kw">def</span> <span class="rubyid_self self kw">self</span><span class="dot token">.</span><span class="rubyid_autoloader identifier id">autoloader</span>
  <span class="rubyid_@autoloader ivar id">@autoloader</span> <span class="opasgn op">||=</span> <span class="rubyid_Puppet constant id">Puppet</span><span class="colon2 op">::</span><span class="rubyid_Util constant id">Util</span><span class="colon2 op">::</span><span class="rubyid_Autoload constant id">Autoload</span><span class="dot token">.</span><span class="rubyid_new identifier id">new</span><span class="lparen token">(</span>
    <span class="rubyid_self self kw">self</span><span class="comma token">,</span> <span class="string val">"puppet/parser/functions"</span><span class="comma token">,</span> <span class="symbol val">:wrap</span> <span class="assign token">=</span><span class="gt op">&gt;</span> <span class="rubyid_false false kw">false</span>
  <span class="rparen token">)</span>
<span class="rubyid_end end kw">end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="environment_module-class_method">
  
    + (<tt><span class="object_link">Object</span></tt>) <strong>environment_module</strong>(env = nil) &#160;<span class="private note title">private</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>
<p>Get the module that functions are mixed into corresponding to an
environment</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


45
46
47
48
49
50
51
52</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/parser/functions.rb', line 45</span>

<span class="rubyid_def def kw">def</span> <span class="rubyid_self self kw">self</span><span class="dot token">.</span><span class="rubyid_environment_module identifier id">environment_module</span><span class="lparen token">(</span><span class="rubyid_env identifier id">env</span> <span class="assign token">=</span> <span class="rubyid_nil nil kw">nil</span><span class="rparen token">)</span>
  <span class="rubyid_if if kw">if</span> <span class="rubyid_env identifier id">env</span> <span class="rubyid_and and kw">and</span> <span class="notop op">!</span> <span class="rubyid_env identifier id">env</span><span class="dot token">.</span><span class="rubyid_is_a? fid id">is_a?</span><span class="lparen token">(</span><span class="rubyid_Puppet constant id">Puppet</span><span class="colon2 op">::</span><span class="rubyid_Node constant id">Node</span><span class="colon2 op">::</span><span class="rubyid_Environment constant id">Environment</span><span class="rparen token">)</span>
    <span class="rubyid_env identifier id">env</span> <span class="assign token">=</span> <span class="rubyid_Puppet constant id">Puppet</span><span class="colon2 op">::</span><span class="rubyid_Node constant id">Node</span><span class="colon2 op">::</span><span class="rubyid_Environment constant id">Environment</span><span class="dot token">.</span><span class="rubyid_new identifier id">new</span><span class="lparen token">(</span><span class="rubyid_env identifier id">env</span><span class="rparen token">)</span>
  <span class="rubyid_end end kw">end</span>
  <span class="rubyid_@modules ivar id">@modules</span><span class="dot token">.</span><span class="rubyid_synchronize identifier id">synchronize</span> <span class="lbrace token">{</span>
    <span class="rubyid_@modules ivar id">@modules</span><span class="lbrack token">[</span> <span class="lparen token">(</span><span class="rubyid_env identifier id">env</span> <span class="orop op">||</span> <span class="rubyid_Environment constant id">Environment</span><span class="dot token">.</span><span class="rubyid_current identifier id">current</span> <span class="orop op">||</span> <span class="rubyid_Environment constant id">Environment</span><span class="dot token">.</span><span class="rubyid_root identifier id">root</span><span class="rparen token">)</span><span class="dot token">.</span><span class="rubyid_name identifier id">name</span> <span class="rbrack token">]</span> <span class="opasgn op">||=</span> <span class="rubyid_Module constant id">Module</span><span class="dot token">.</span><span class="rubyid_new identifier id">new</span>
  <span class="rbrace token">}</span>
<span class="rubyid_end end kw">end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="function-class_method">
  
    + (<tt><span class="object_link">Symbol</span></tt>, <tt>false</tt>) <strong>function</strong>(name) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Determine if a function is defined</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class="name">name</span>
      
      
        <span class="type">(<tt><span class="object_link">Symbol</span></tt>)</span>
      
      
      
        &#8212;
        <div class="inline"><p>the function</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class="type">(<tt><span class="object_link">Symbol</span></tt>, <tt>false</tt>)</span>
      
      
      
        &#8212;
        <div class="inline"><p>The name of the function if it&#8217;s defined,
otherwise false.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


169
170
171
172
173
174
175
176
177
178
179
180
181
182
183
184
185</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/parser/functions.rb', line 169</span>

<span class="rubyid_def def kw">def</span> <span class="rubyid_self self kw">self</span><span class="dot token">.</span><span class="rubyid_function identifier id">function</span><span class="lparen token">(</span><span class="rubyid_name identifier id">name</span><span class="rparen token">)</span>
  <span class="rubyid_name identifier id">name</span> <span class="assign token">=</span> <span class="rubyid_name identifier id">name</span><span class="dot token">.</span><span class="rubyid_intern identifier id">intern</span>

  <span class="rubyid_func identifier id">func</span> <span class="assign token">=</span> <span class="rubyid_nil nil kw">nil</span>
  <span class="rubyid_@functions ivar id">@functions</span><span class="dot token">.</span><span class="rubyid_synchronize identifier id">synchronize</span> <span class="rubyid_do do kw">do</span>
    <span class="rubyid_unless unless kw">unless</span> <span class="rubyid_func identifier id">func</span> <span class="assign token">=</span> <span class="rubyid_get_function identifier id">get_function</span><span class="lparen token">(</span><span class="rubyid_name identifier id">name</span><span class="rparen token">)</span>
      <span class="rubyid_autoloader identifier id">autoloader</span><span class="dot token">.</span><span class="rubyid_load identifier id">load</span><span class="lparen token">(</span><span class="rubyid_name identifier id">name</span><span class="comma token">,</span> <span class="rubyid_Environment constant id">Environment</span><span class="dot token">.</span><span class="rubyid_current identifier id">current</span><span class="rparen token">)</span>
      <span class="rubyid_func identifier id">func</span> <span class="assign token">=</span> <span class="rubyid_get_function identifier id">get_function</span><span class="lparen token">(</span><span class="rubyid_name identifier id">name</span><span class="rparen token">)</span>
    <span class="rubyid_end end kw">end</span>
  <span class="rubyid_end end kw">end</span>

  <span class="rubyid_if if kw">if</span> <span class="rubyid_func identifier id">func</span>
    <span class="rubyid_func identifier id">func</span><span class="lbrack token">[</span><span class="symbol val">:name</span><span class="rbrack token">]</span>
  <span class="rubyid_else else kw">else</span>
    <span class="rubyid_false false kw">false</span>
  <span class="rubyid_end end kw">end</span>
<span class="rubyid_end end kw">end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="newfunction-class_method">
  
    + (<tt><span class="object_link">Hash</span></tt>) <strong>newfunction</strong>(name, options = {}, &amp;block) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Create a new Puppet DSL function.</p>

<p><strong>The <span class="object_link"><a href="#newfunction-class_method" title="Puppet::Parser::Functions.newfunction (method)">newfunction</a></span> method provides a public API.</strong></p>

<p>This method is used both internally inside of Puppet to define parser
functions.  For example, template() is defined in
<a href="../../file.template.html" title="template.rb">template.rb</a> using the
<span class="object_link"><a href="#newfunction-class_method" title="Puppet::Parser::Functions.newfunction (method)">newfunction</a></span> method.  Third party Puppet modules such as
<a href="https://forge.puppetlabs.com/puppetlabs/stdlib">stdlib</a> use this method to
extend the behavior and functionality of Puppet.</p>

<p>See also <a href="http://docs.puppetlabs.com/guides/custom_functions.html">Docs: Custom
Functions</a></p>


  </div>
</div>
<div class="tags">
  
  <div class="examples">
    <p class="tag_title">Examples:</p>
    
      
        <p class="example_title"></p><div class="inline"><p>Define a new Puppet DSL Function</p>
</div>
      
      <pre class="example code"><code><span class="rshft op">&gt;&gt;</span> <span class="rubyid_Puppet constant id">Puppet</span><span class="colon2 op">::</span><span class="rubyid_Parser constant id">Parser</span><span class="colon2 op">::</span><span class="rubyid_Functions constant id">Functions</span><span class="dot token">.</span><span class="rubyid_newfunction identifier id">newfunction</span><span class="lparen token">(</span><span class="symbol val">:double</span><span class="comma token">,</span> <span class="symbol val">:arity</span> <span class="assign token">=</span><span class="gt op">&gt;</span> <span class="integer val">1</span><span class="comma token">,</span>
     <span class="symbol val">:doc</span> <span class="assign token">=</span><span class="gt op">&gt;</span> <span class="string val">"Doubles an object, typically a number or string."</span><span class="comma token">,</span>
     <span class="symbol val">:type</span> <span class="assign token">=</span><span class="gt op">&gt;</span> <span class="symbol val">:rvalue</span><span class="rparen token">)</span> <span class="lbrace token">{</span><span class="bitor op">|</span><span class="rubyid_i identifier id">i</span><span class="bitor op">|</span> <span class="rubyid_i identifier id">i</span><span class="lbrack token">[</span><span class="integer val">0</span><span class="rbrack token">]</span><span class="mult op">*</span><span class="integer val">2</span> <span class="rbrace token">}</span>
<span class="assign token">=</span><span class="gt op">&gt;</span> <span class="lbrace token">{</span><span class="symbol val">:arity=</span><span class="gt op">&gt;</span><span class="integer val">1</span><span class="comma token">,</span> <span class="symbol val">:type=</span><span class="gt op">&gt;</span><span class="symbol val">:rvalue</span><span class="comma token">,</span>
    <span class="symbol val">:name=</span><span class="gt op">&gt;</span><span class="string val">"function_double"</span><span class="comma token">,</span>
    <span class="symbol val">:doc=</span><span class="gt op">&gt;</span><span class="string val">"Doubles an object, typically a number or string."</span><span class="rbrace token">}</span>
</code></pre>
    
      
        <p class="example_title"></p><div class="inline"><p>Invoke the double function from irb as is done in RSpec examples:</p>
</div>
      
      <pre class="example code"><code><span class="rshft op">&gt;&gt;</span> <span class="rubyid_scope identifier id">scope</span> <span class="assign token">=</span> <span class="rubyid_Puppet constant id">Puppet</span><span class="colon2 op">::</span><span class="rubyid_Parser constant id">Parser</span><span class="colon2 op">::</span><span class="rubyid_Scope constant id">Scope</span><span class="dot token">.</span><span class="rubyid_new_for_test_harness identifier id">new_for_test_harness</span><span class="lparen token">(</span><span class="string val">'example'</span><span class="rparen token">)</span>
<span class="assign token">=</span><span class="gt op">&gt;</span> <span class="rubyid_Scope constant id">Scope</span><span class="lparen token">(</span><span class="rparen token">)</span>
<span class="rshft op">&gt;&gt;</span> <span class="rubyid_scope identifier id">scope</span><span class="dot token">.</span><span class="rubyid_function_double identifier id">function_double</span><span class="lparen token">(</span><span class="lbrack token">[</span><span class="integer val">2</span><span class="rbrack token">]</span><span class="rparen token">)</span>
<span class="assign token">=</span><span class="gt op">&gt;</span> <span class="integer val">4</span>
<span class="rshft op">&gt;&gt;</span> <span class="rubyid_scope identifier id">scope</span><span class="dot token">.</span><span class="rubyid_function_double identifier id">function_double</span><span class="lparen token">(</span><span class="lbrack token">[</span><span class="integer val">4</span><span class="rbrack token">]</span><span class="rparen token">)</span>
<span class="assign token">=</span><span class="gt op">&gt;</span> <span class="integer val">8</span>
<span class="rshft op">&gt;&gt;</span> <span class="rubyid_scope identifier id">scope</span><span class="dot token">.</span><span class="rubyid_function_double identifier id">function_double</span><span class="lparen token">(</span><span class="lbrack token">[</span><span class="rbrack token">]</span><span class="rparen token">)</span>
<span class="rubyid_ArgumentError constant id">ArgumentError</span><span class="colon op">:</span> <span class="rubyid_double identifier id">double</span><span class="lparen token">(</span><span class="rparen token">)</span><span class="colon op">:</span> <span class="rubyid_Wrong constant id">Wrong</span> <span class="rubyid_number identifier id">number</span> <span class="rubyid_of identifier id">of</span> <span class="rubyid_arguments identifier id">arguments</span> <span class="rubyid_given identifier id">given</span> <span class="lparen token">(</span><span class="integer val">0</span> <span class="rubyid_for for kw">for</span> <span class="integer val">1</span><span class="rparen token">)</span>
<span class="rshft op">&gt;&gt;</span> <span class="rubyid_scope identifier id">scope</span><span class="dot token">.</span><span class="rubyid_function_double identifier id">function_double</span><span class="lparen token">(</span><span class="lbrack token">[</span><span class="integer val">4</span><span class="comma token">,</span><span class="integer val">8</span><span class="rbrack token">]</span><span class="rparen token">)</span>
<span class="rubyid_ArgumentError constant id">ArgumentError</span><span class="colon op">:</span> <span class="rubyid_double identifier id">double</span><span class="lparen token">(</span><span class="rparen token">)</span><span class="colon op">:</span> <span class="rubyid_Wrong constant id">Wrong</span> <span class="rubyid_number identifier id">number</span> <span class="rubyid_of identifier id">of</span> <span class="rubyid_arguments identifier id">arguments</span> <span class="rubyid_given identifier id">given</span> <span class="lparen token">(</span><span class="integer val">2</span> <span class="rubyid_for for kw">for</span> <span class="integer val">1</span><span class="rparen token">)</span>
<span class="rshft op">&gt;&gt;</span> <span class="rubyid_scope identifier id">scope</span><span class="dot token">.</span><span class="rubyid_function_double identifier id">function_double</span><span class="lparen token">(</span><span class="lbrack token">[</span><span class="string val">"hello"</span><span class="rbrack token">]</span><span class="rparen token">)</span>
<span class="assign token">=</span><span class="gt op">&gt;</span> <span class="string val">"hellohello"</span>
</code></pre>
    
  </div>
<p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class="name">name</span>
      
      
        <span class="type">(<tt><span class="object_link">Symbol</span></tt>)</span>
      
      
      
        &#8212;
        <div class="inline"><p>the name of the function represented as a ruby Symbol.
The <span class="object_link"><a href="#newfunction-class_method" title="Puppet::Parser::Functions.newfunction (method)">newfunction</a></span> method will define a Ruby method based on this name on
the parser scope instance.</p>
</div>
      
    </li>
  
    <li>
      
        <span class="name">block</span>
      
      
        <span class="type">(<tt>Proc</tt>)</span>
      
      
      
        &#8212;
        <div class="inline"><p>the block provided to the <span class="object_link"><a href="#newfunction-class_method" title="Puppet::Parser::Functions.newfunction (method)">newfunction</a></span> method will be
executed when the Puppet DSL function is evaluated during catalog
compilation.  The arguments to the function will be passed as an array to
the first argument of the block.  The return value of the block will be
the return value of the Puppet DSL function for <code>:rvalue</code> functions.</p>
</div>
      
    </li>
  
    <li>
      
        <span class="name">options</span>
      
      
        <span class="type">(<tt><span class="object_link">Hash</span></tt>)</span>
      
      
        <em class="default">(defaults to: <tt>{}</tt>)</em>
      
      
        &#8212;
        <div class="inline"><p>a customizable set of options</p>
</div>
      
    </li>
  
</ul>

  
    
    
    
    
    <p class="tag_title">Options Hash (<tt>options</tt>):</p>
    <ul class="option">
      
        <li>
          <span class="name">:type</span>
          <span class="type">(<tt>:rvalue</tt>, <tt>:statement</tt>)</span>
          <span class="default">
            
              &#8212; default:
              <tt>:statement</tt>
            
          </span>
          
            &#8212; <div class="inline"><p>the type of function.
Either <code>:rvalue</code> for functions that return a value, or <code>:statement</code> for
functions that do not return a value.</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:doc</span>
          <span class="type">(<tt><span class="object_link">String</span></tt>)</span>
          <span class="default">
            
              &#8212; default:
              <tt>''</tt>
            
          </span>
          
            &#8212; <div class="inline"><p>the documentation for the function.
This string will be extracted by documentation generation tools.</p>
</div>
          
        </li>
      
        <li>
          <span class="name">:arity</span>
          <span class="type">(<tt>Integer</tt>)</span>
          <span class="default">
            
              &#8212; default:
              <tt>-1</tt>
            
          </span>
          
            &#8212; <div class="inline"><p>the
<a href="http://en.wikipedia.org/wiki/Arity">arity</a> of the function.  When
specified as a positive integer the function is expected to receive
<em>exactly</em> the specified number of arguments.  When specified as a
negative number, the function is expected to receive <em>at least</em> the
absolute value of the specified number of arguments incremented by one.
For example, a function with an arity of <code>-4</code> is expected to receive at
minimum 3 arguments.  A function with the default arity of <code>-1</code> accepts
zero or more arguments.  A function with an arity of 2 must be provided
with exactly two arguments, no more and no less.  Added in Puppet 3.1.0.</p>
</div>
          
        </li>
      
    </ul>
  
    
    

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class="type">(<tt><span class="object_link">Hash</span></tt>)</span>
      
      
      
        &#8212;
        <div class="inline"><p>describing the function.</p>
</div>
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


121
122
123
124
125
126
127
128
129
130
131
132
133
134
135
136
137
138
139
140
141
142
143
144
145
146
147
148
149
150
151
152
153
154
155
156
157
158
159</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/parser/functions.rb', line 121</span>

<span class="rubyid_def def kw">def</span> <span class="rubyid_self self kw">self</span><span class="dot token">.</span><span class="rubyid_newfunction identifier id">newfunction</span><span class="lparen token">(</span><span class="rubyid_name identifier id">name</span><span class="comma token">,</span> <span class="rubyid_options identifier id">options</span> <span class="assign token">=</span> <span class="lbrace token">{</span><span class="rbrace token">}</span><span class="comma token">,</span> <span class="bitand op">&amp;</span><span class="rubyid_block identifier id">block</span><span class="rparen token">)</span>
  <span class="rubyid_name identifier id">name</span> <span class="assign token">=</span> <span class="rubyid_name identifier id">name</span><span class="dot token">.</span><span class="rubyid_intern identifier id">intern</span>

  <span class="rubyid_Puppet constant id">Puppet</span><span class="dot token">.</span><span class="rubyid_warning identifier id">warning</span> <span class="dstring node">"Overwriting previous definition for function #{name}"</span> <span class="rubyid_if if_mod kw">if</span> <span class="rubyid_get_function identifier id">get_function</span><span class="lparen token">(</span><span class="rubyid_name identifier id">name</span><span class="rparen token">)</span>

  <span class="rubyid_arity identifier id">arity</span> <span class="assign token">=</span> <span class="rubyid_options identifier id">options</span><span class="lbrack token">[</span><span class="symbol val">:arity</span><span class="rbrack token">]</span> <span class="orop op">||</span> <span class="integer val">-1</span>
  <span class="rubyid_ftype identifier id">ftype</span> <span class="assign token">=</span> <span class="rubyid_options identifier id">options</span><span class="lbrack token">[</span><span class="symbol val">:type</span><span class="rbrack token">]</span> <span class="orop op">||</span> <span class="symbol val">:statement</span>

  <span class="rubyid_unless unless kw">unless</span> <span class="rubyid_ftype identifier id">ftype</span> <span class="eq op">==</span> <span class="symbol val">:statement</span> <span class="rubyid_or or kw">or</span> <span class="rubyid_ftype identifier id">ftype</span> <span class="eq op">==</span> <span class="symbol val">:rvalue</span>
    <span class="rubyid_raise identifier id">raise</span> <span class="rubyid_Puppet constant id">Puppet</span><span class="colon2 op">::</span><span class="rubyid_DevError constant id">DevError</span><span class="comma token">,</span> <span class="dstring node">"Invalid statement type #{ftype.inspect}"</span>
  <span class="rubyid_end end kw">end</span>

  <span class="comment val"># the block must be installed as a method because it may use "return",</span>
  <span class="comment val"># which is not allowed from procs.</span>
  <span class="rubyid_real_fname identifier id">real_fname</span> <span class="assign token">=</span> <span class="dstring node">"real_function_#{name}"</span>
  <span class="rubyid_environment_module identifier id">environment_module</span><span class="dot token">.</span><span class="rubyid_send identifier id">send</span><span class="lparen token">(</span><span class="symbol val">:define_method</span><span class="comma token">,</span> <span class="rubyid_real_fname identifier id">real_fname</span><span class="comma token">,</span> <span class="bitand op">&amp;</span><span class="rubyid_block identifier id">block</span><span class="rparen token">)</span>

  <span class="rubyid_fname identifier id">fname</span> <span class="assign token">=</span> <span class="dstring node">"function_#{name}"</span>
  <span class="rubyid_environment_module identifier id">environment_module</span><span class="dot token">.</span><span class="rubyid_send identifier id">send</span><span class="lparen token">(</span><span class="symbol val">:define_method</span><span class="comma token">,</span> <span class="rubyid_fname identifier id">fname</span><span class="rparen token">)</span> <span class="rubyid_do do kw">do</span> <span class="bitor op">|</span><span class="mult op">*</span><span class="rubyid_args identifier id">args</span><span class="bitor op">|</span>
    <span class="rubyid_Puppet constant id">Puppet</span><span class="colon2 op">::</span><span class="rubyid_Util constant id">Util</span><span class="colon2 op">::</span><span class="rubyid_Profiler constant id">Profiler</span><span class="dot token">.</span><span class="rubyid_profile identifier id">profile</span><span class="lparen token">(</span><span class="dstring node">"Called #{name}"</span><span class="rparen token">)</span> <span class="rubyid_do do kw">do</span>
      <span class="rubyid_if if kw">if</span> <span class="rubyid_args identifier id">args</span><span class="lbrack token">[</span><span class="integer val">0</span><span class="rbrack token">]</span><span class="dot token">.</span><span class="rubyid_is_a? fid id">is_a?</span> <span class="rubyid_Array constant id">Array</span>
        <span class="rubyid_if if kw">if</span> <span class="rubyid_arity identifier id">arity</span> <span class="geq op">&gt;=</span> <span class="integer val">0</span> <span class="rubyid_and and kw">and</span> <span class="rubyid_args identifier id">args</span><span class="lbrack token">[</span><span class="integer val">0</span><span class="rbrack token">]</span><span class="dot token">.</span><span class="rubyid_size identifier id">size</span> <span class="neq op">!=</span> <span class="rubyid_arity identifier id">arity</span>
          <span class="rubyid_raise identifier id">raise</span> <span class="rubyid_ArgumentError constant id">ArgumentError</span><span class="comma token">,</span> <span class="dstring node">"#{name}(): Wrong number of arguments given (#{args[0].size} for #{arity})"</span>
        <span class="rubyid_elsif elsif kw">elsif</span> <span class="rubyid_arity identifier id">arity</span> <span class="lt op">&lt;</span> <span class="integer val">0</span> <span class="rubyid_and and kw">and</span> <span class="rubyid_args identifier id">args</span><span class="lbrack token">[</span><span class="integer val">0</span><span class="rbrack token">]</span><span class="dot token">.</span><span class="rubyid_size identifier id">size</span> <span class="lt op">&lt;</span> <span class="lparen token">(</span><span class="rubyid_arity identifier id">arity</span><span class="plus op">+</span><span class="integer val">1</span><span class="rparen token">)</span><span class="dot token">.</span><span class="rubyid_abs identifier id">abs</span>
          <span class="rubyid_raise identifier id">raise</span> <span class="rubyid_ArgumentError constant id">ArgumentError</span><span class="comma token">,</span> <span class="dstring node">"#{name}(): Wrong number of arguments given (#{args[0].size} for minimum #{(arity+1).abs})"</span>
        <span class="rubyid_end end kw">end</span>
        <span class="rubyid_self self kw">self</span><span class="dot token">.</span><span class="rubyid_send identifier id">send</span><span class="lparen token">(</span><span class="rubyid_real_fname identifier id">real_fname</span><span class="comma token">,</span> <span class="rubyid_args identifier id">args</span><span class="lbrack token">[</span><span class="integer val">0</span><span class="rbrack token">]</span><span class="rparen token">)</span>
      <span class="rubyid_else else kw">else</span>
        <span class="rubyid_raise identifier id">raise</span> <span class="rubyid_ArgumentError constant id">ArgumentError</span><span class="comma token">,</span> <span class="string val">"custom functions must be called with a single array that contains the arguments. For example, function_example([1]) instead of function_example(1)"</span>
      <span class="rubyid_end end kw">end</span>
    <span class="rubyid_end end kw">end</span>
  <span class="rubyid_end end kw">end</span>

  <span class="rubyid_func identifier id">func</span> <span class="assign token">=</span> <span class="lbrace token">{</span><span class="symbol val">:arity</span> <span class="assign token">=</span><span class="gt op">&gt;</span> <span class="rubyid_arity identifier id">arity</span><span class="comma token">,</span> <span class="symbol val">:type</span> <span class="assign token">=</span><span class="gt op">&gt;</span> <span class="rubyid_ftype identifier id">ftype</span><span class="comma token">,</span> <span class="symbol val">:name</span> <span class="assign token">=</span><span class="gt op">&gt;</span> <span class="rubyid_fname identifier id">fname</span><span class="rbrace token">}</span>
  <span class="rubyid_func identifier id">func</span><span class="lbrack token">[</span><span class="symbol val">:doc</span><span class="rbrack token">]</span> <span class="assign token">=</span> <span class="rubyid_options identifier id">options</span><span class="lbrack token">[</span><span class="symbol val">:doc</span><span class="rbrack token">]</span> <span class="rubyid_if if_mod kw">if</span> <span class="rubyid_options identifier id">options</span><span class="lbrack token">[</span><span class="symbol val">:doc</span><span class="rbrack token">]</span>

  <span class="rubyid_add_function identifier id">add_function</span><span class="lparen token">(</span><span class="rubyid_name identifier id">name</span><span class="comma token">,</span> <span class="rubyid_func identifier id">func</span><span class="rparen token">)</span>
  <span class="rubyid_func identifier id">func</span>
<span class="rubyid_end end kw">end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="reset-class_method">
  
    + (<tt><span class="object_link">Object</span></tt>) <strong>reset</strong> &#160;<span class="private note title">private</span>
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p class="note private">
  <strong>This method is part of a private API.</strong>
  You should avoid using this method if possible, as it may be removed or be changed in the future.
</p>
<p>Reset the list of loaded functions.</p>


  </div>
</div>
<div class="tags">
  

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


20
21
22
23
24
25
26
27
28
29
30</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/parser/functions.rb', line 20</span>

<span class="rubyid_def def kw">def</span> <span class="rubyid_self self kw">self</span><span class="dot token">.</span><span class="rubyid_reset identifier id">reset</span>
  <span class="rubyid_@functions ivar id">@functions</span> <span class="assign token">=</span> <span class="rubyid_Hash constant id">Hash</span><span class="dot token">.</span><span class="rubyid_new identifier id">new</span> <span class="lbrace token">{</span> <span class="bitor op">|</span><span class="rubyid_h identifier id">h</span><span class="comma token">,</span><span class="rubyid_k identifier id">k</span><span class="bitor op">|</span> <span class="rubyid_h identifier id">h</span><span class="lbrack token">[</span><span class="rubyid_k identifier id">k</span><span class="rbrack token">]</span> <span class="assign token">=</span> <span class="lbrace token">{</span><span class="rbrace token">}</span> <span class="rbrace token">}</span><span class="dot token">.</span><span class="rubyid_extend identifier id">extend</span><span class="lparen token">(</span><span class="rubyid_MonitorMixin constant id">MonitorMixin</span><span class="rparen token">)</span>
  <span class="rubyid_@modules ivar id">@modules</span> <span class="assign token">=</span> <span class="rubyid_Hash constant id">Hash</span><span class="dot token">.</span><span class="rubyid_new identifier id">new</span><span class="dot token">.</span><span class="rubyid_extend identifier id">extend</span><span class="lparen token">(</span><span class="rubyid_MonitorMixin constant id">MonitorMixin</span><span class="rparen token">)</span>

  <span class="comment val"># Runs a newfunction to create a function for each of the log levels</span>
  <span class="rubyid_Puppet constant id">Puppet</span><span class="colon2 op">::</span><span class="rubyid_Util constant id">Util</span><span class="colon2 op">::</span><span class="rubyid_Log constant id">Log</span><span class="dot token">.</span><span class="rubyid_levels identifier id">levels</span><span class="dot token">.</span><span class="rubyid_each identifier id">each</span> <span class="rubyid_do do kw">do</span> <span class="bitor op">|</span><span class="rubyid_level identifier id">level</span><span class="bitor op">|</span>
    <span class="rubyid_newfunction identifier id">newfunction</span><span class="lparen token">(</span><span class="rubyid_level identifier id">level</span><span class="comma token">,</span> <span class="symbol val">:doc</span> <span class="assign token">=</span><span class="gt op">&gt;</span> <span class="dstring node">"Log a message on the server at level #{level.to_s}."</span><span class="rparen token">)</span> <span class="rubyid_do do kw">do</span> <span class="bitor op">|</span><span class="rubyid_vals identifier id">vals</span><span class="bitor op">|</span>
      <span class="rubyid_send identifier id">send</span><span class="lparen token">(</span><span class="rubyid_level identifier id">level</span><span class="comma token">,</span> <span class="rubyid_vals identifier id">vals</span><span class="dot token">.</span><span class="rubyid_join identifier id">join</span><span class="lparen token">(</span><span class="string val">" "</span><span class="rparen token">)</span><span class="rparen token">)</span>
    <span class="rubyid_end end kw">end</span>
  <span class="rubyid_end end kw">end</span>
<span class="rubyid_end end kw">end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
      <div class="method_details ">
  <h3 class="signature " id="rvalue?-class_method">
  
    + (<tt>Boolean</tt>) <strong>rvalue?</strong>(name) 
  

  

  
</h3><div class="docstring">
  <div class="discussion">
    <p>Determine whether a given function returns a value.</p>


  </div>
</div>
<div class="tags">
  <p class="tag_title">Parameters:</p>
<ul class="param">
  
    <li>
      
        <span class="name">name</span>
      
      
        <span class="type">(<tt><span class="object_link">Symbol</span></tt>)</span>
      
      
      
        &#8212;
        <div class="inline"><p>the function</p>
</div>
      
    </li>
  
</ul>

<p class="tag_title">Returns:</p>
<ul class="return">
  
    <li>
      
      
        <span class="type">(<tt>Boolean</tt>)</span>
      
      
      
    </li>
  
</ul>

</div><table class="source_code">
  <tr>
    <td>
      <pre class="lines">


211
212
213
214</pre>
    </td>
    <td>
      <pre class="code"><span class="info file"># File 'lib/puppet/parser/functions.rb', line 211</span>

<span class="rubyid_def def kw">def</span> <span class="rubyid_self self kw">self</span><span class="dot token">.</span><span class="rubyid_rvalue? fid id">rvalue?</span><span class="lparen token">(</span><span class="rubyid_name identifier id">name</span><span class="rparen token">)</span>
  <span class="rubyid_func identifier id">func</span> <span class="assign token">=</span> <span class="rubyid_get_function identifier id">get_function</span><span class="lparen token">(</span><span class="rubyid_name identifier id">name</span><span class="rparen token">)</span>
  <span class="rubyid_func identifier id">func</span> <span class="integer val">? </span><span class="rubyid_func identifier id">func</span><span class="lbrack token">[</span><span class="symbol val">:type</span><span class="rbrack token">]</span> <span class="eq op">==</span> <span class="symbol val">:rvalue</span> <span class="colon op">:</span> <span class="rubyid_false false kw">false</span>
<span class="rubyid_end end kw">end</span>
</pre>
    </td>
  </tr>
</table>
</div>
    
  </div>

</div>

    <div id="footer">
  Generated on Thu Jul 11 16:52:14 2013 by
  <a href="http://yardoc.org" title="Yay! A Ruby Documentation Tool" target="_parent">yard</a>
  0.8.4.1 (ruby-1.8.7).
</div>

  </body>
</html>
