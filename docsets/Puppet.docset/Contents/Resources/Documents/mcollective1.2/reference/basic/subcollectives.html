<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US" xml:lang="en-US">
  <head>
  	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  	<title>Subcollectives &#8212; Documentation &#8212; Puppet Labs</title>
  	<link rel="alternate" type="application/atom+xml" title="Puppet Labs Documentation Updates" href="https://github.com/puppetlabs/puppet-docs/commits/master.atom" />
    <link rel="alternate" type="application/atom+xml" title="Puppet Labs Blog Feed" href="http://puppetlabs.com/feed/atom/" />
    <link rel="index" title="Puppet Labs Documentation" href="http://docs.puppetlabs.com" />
    <link rel="icon" href="./../../../favicon.ico" />


  <meta name="description" content="Subcollectives  Subcollectives  Overview  Partitionion Approaches  Configuring MCollective  Partitioning for Security  Testing  ActiveMQ FiltersOve..." />



    <!-- FIXME: absolute paths -->

    <script type="text/javascript" src="./../../../files/javascripts/html5.js"></script>
    <script type="text/javascript" src="./../../../files/javascripts/jquery-1.3.2.min.js"></script>
    <script type="text/javascript" src="./../../../files/javascripts/drop_down.js"></script>
    <script type="text/javascript" src="./../../../files/javascripts/cufon-yui.js"></script>
    <script type="text/javascript" src="./../../../files/fonts/Klavika_400-Klavika_600.font.js"></script>
    <script type="text/javascript" src="./../../../files/javascripts/ampersands.js"></script>
    <script type="text/javascript" src="./../../../files/javascripts/navigation-accordion.js"></script>

    <script type="text/javascript" src="http://puppetlabs.com/wp-content/themes/puppetlabs/javascripts/leadcapture.js"></script>

    <!-- All in One SEO Pack 1.6.10.1 by Michael Torbert of Semper Fi Web Design[127,146] -->
    <meta name="keywords" content="Puppet, puppet labs, reductive labs, open source, system administrator, ruby, data center, automation, support" />
    <!-- /all in one seo pack -->

    <!-- Give us the option of setting a canonical URL in yaml frontmatter -NF -->
    <link rel="canonical" href="http://docs.puppetlabs.com/mcollective/reference/basic/subcollectives.html" />

    <!-- FIXME: absolute paths -->

    <link rel="stylesheet" type="text/css" href="./../../../files/stylesheets/style.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="./../../../files/stylesheets/syntax.css" media="screen" /> <!-- index -->
    <link rel="stylesheet" type="text/css" href="./../../../files/stylesheets/adbanner.css" media="screen" />

    <!--[if IE 7]>
	  <link rel="stylesheet" type="text/css" href="/files/stylesheets/ie_7.css" media="screen"> <!-- index -->
    

    <!--[if IE 8]>
	    <link rel="stylesheet" type="text/css" href="/files/stylesheets/ie_8.css" media="screen"> <!-- index -->
    

  	<script type="text/javascript"><![CDATA[
      Cufon.replace('h1, h2', { fontWeight: '600' });
  	]]></script>
</head>




  <body id="puppetlabsdocs" class="docs">
  <style type="text/css"><![CDATA[h1, h2{ visibility : hidden }]]></style>
  <!--[if IE 8]>
    <style type="text/css">h1, h2{ visibility : visible }</style>
  <![endif]-->

  	<header id="header">
      <div class="site-width">
    		<h1><a href="http://puppetlabs.com/"><span>Puppet Labs</span></a></h1>
        <a class="screen-reader-content" href="#content">Skip navigation</a>
        <nav>
    		<ul id="global-navigation">
          <li id="puppet-tab" class="with-submenu">
            <a href="http://puppetlabs.com/puppet/puppet-enterprise">
              <span>Products</span>
              <span class="drop-down-trigger"></span>
            </a>
            <ul>
			<li>
                <ul>
                   <a href="http://puppetlabs.com/puppet/what-is-puppet/">What is Puppet?</a>
                </ul>
              </li>
			       <li>
                <ul>
                   <a href="http://puppetlabs.com/puppet/puppet-enterprise/">Puppet Enterprise</a>
                </ul>
              </li>
            <li>
                <ul>
                   <a href="http://puppetlabs.com/puppet/whats-new/">What's New in 2.5</a>
                </ul>
              </li>
            <li>
                <ul>
                   <a href="http://puppetlabs.com/puppet/puppet-open-source/">Puppet Open Source</a>
                </ul>
              </li>
            <li>
                <ul>
                   <a href="http://puppetlabs.com/puppet/enterprise-vs-open-source/">Enterprise vs. Open Source</a>
                </ul>
              </li>
              <li>
                <ul>
                  <a href="http://forge.puppetlabs.com">Puppet Forge</a>
                </ul>
              </li>
              <li>
                <ul>
                  <a href="http://puppetlabs.com/puppet/requirements/">Components &amp; Requirements</a>
                </ul>
              </li>
              <li>
                <ul>
                  <a href="http://puppetlabs.com/puppet/faq/">FAQ</a>
                </ul>
              </li>
			  <li>
                <ul>
                  <a href="http://puppetlabs.com/puppet/how-to-buy/">How to Buy</a>
                </ul>
              </li>
            </ul>
          </li>
          <li id="solutions-tab" class="with-submenu">
            <a href="http://puppetlabs.com/solutions/">
              <span>Solutions</span>
              <span class="drop-down-trigger"></span>
            </a>
            <ul>
              <li class="page_item page-item-12296"><a href="http://puppetlabs.com/solutions/configuration-management/">Configuration Management</a></li>
<li class="page_item page-item-986"><a href="http://puppetlabs.com/solutions/virtualization-management/">Virtualization Management</a></li>
<li class="page_item page-item-993"><a href="http://puppetlabs.com/solutions/cloud-management/">Cloud Management</a></li>
<li class="page_item page-item-996"><a href="http://puppetlabs.com/solutions/it-compliance/">IT Compliance</a></li>
<li class="page_item page-item-9520"><a href="http://puppetlabs.com/solutions/devops/">DevOps</a></li>
<li class="page_item page-item-991"><a href="http://puppetlabs.com/solutions/manage-os-x-resources/">OS X Desktops</a></li>
            </ul>
          </li>
          <li id="services-tab" class="with-submenu">
            <a href="http://puppetlabs.com/services/">
              <span>Services</span>
              <span class="drop-down-trigger"></span>
            </a>
            <ul>
              <li class="page_item page-item-783"><a href="http://puppetlabs.com/services/overview/">Overview</a></li>
<li class="page_item page-item-1052"><a href="http://puppetlabs.com/services/customer-support/">Customer Support</a></li>
<li class="page_item page-item-11022"><a href="http://puppetlabs.com/services/support-plans/">Support Plans</a></li>
<li class="page_item page-item-845"><a href="http://puppetlabs.com/services/training-workshops/">On-Site Education</a></li>
<li class="page_item page-item-4899"><a href="http://puppetlabs.com/services/consulting/">Professional Services</a></li>
<li class="page_item page-item-849"><a href="http://puppetlabs.com/category/events/upcoming/">Events &amp; Workshops</a></li>
<li class="page_item page-item-851"><a href="http://puppetlabs.com/services/partners/">Partners</a></li>
            </ul>
          </li>
                    <li id="resources-tab" class="with-submenu">
            <a href="http://puppetlabs.com/resources/">
              <span>Resources</span>
              <span class="drop-down-trigger"></span>
            </a>
            <ul>
              <li class="page_item page-item-1048"><a href="http://puppetlabs.com/resources/overview-2/">Overview</a></li>
<li class="page_item page-item-1040"><a href="http://docs.puppetlabs.com">Documentation</a></li>
<li class="page_item page-item-872"><a href="http://info.puppetlabs.com/register-download">Downloads</a></li>
<li class="page_item page-item-1961"><a href="http://forge.puppetlabs.com">Puppet Forge</a></li>
<li class="page_item page-item-835"><a href="http://info.puppetlabs.com/download-whitepapers.html">White Papers</a></li>
<li class="page_item page-item-1967"><a href="http://projects.puppetlabs.com/projects/puppet/wiki">Wiki</a></li>
<li class="page_item page-item-7279"><a href="http://puppetlabs.com/resources/webinars/">Upcoming Webinars</a></li>
<li class="page_item page-item-10183"><a href="http://puppetlabs.com/resources/newsletter/">Newsletter</a></li>
<li class="page_item page-item-12263"><a href="http://puppetlabs.com/resources/tech-notes/">Tech Notes</a></li>
<li class="page_item page-item-10265"><a href="http://info.puppetlabs.com/pe2-webinar.html">Webinars</a></li>
            </ul>
          </li>

          <li id="customers-tab" class="with-submenu">
            <a href="http://puppetlabs.com/customers/companies/">
              <span>Customers</span>
              <span class="drop-down-trigger"></span>
            </a>
            <ul>
			<li>
                <ul>
                  <a href="http://puppetlabs.com/customers/companies/">Companies</a>
                </ul>
              </li>
			  <li>
                <ul>
                  <a href="http://puppetlabs.com/customers/case-studies/">Case Studies</a>
                </ul>
              </li>
			  <li>
                <ul>
                  <a href="http://puppetlabs.com/customers/product-testimonials/">Product Testimonials</a>
                </ul>
              </li>
			    <li>
                <ul>
                  <a href="http://puppetlabs.com/customers/what-customers-are-saying/">Service Testimonials</a>
                </ul>
              </li>
            </ul>
          </li>
          <li id="community-tab" class="with-submenu">
            <a href="http://puppetlabs.com/community/">
              <span>Community</span>
              <span class="drop-down-trigger"></span>
            </a>

 <ul>
			<li>
                <ul>
                  <a href="http://puppetlabs.com/community/overview/">Overview</a>
                </ul>
              </li>
			<li>
                <ul>
                  <a href="http://puppetlabs.com/blog">Blog</a>
                </ul>
              </li>
			  <li>
                <ul>
                  <a href="http://puppetlabs.com/community/puppet-camp/">Puppet Camp</a>
                </ul>
              </li>
			  <li>
                <ul>
                  <a href="http://puppetlabs.com/community/user-groups-and-devops-groups/">Puppet User Groups &amp; DevOps Groups</a>
                </ul>
              </li>
	          <li>
                <ul>
                  <a href="http://puppetlabs.com/community/presentations/">Presentations</a>
                </ul>
              </li>
			    <li>
                <ul>
                  <a href="http://puppetlabs.com/community/videos/">Videos</a>
                </ul>
              </li>
            </ul>

          </li><li id="company-tab" class="with-submenu">
            <a href="http://puppetlabs.com/company/">
              <span>Company</span>
              <span class="drop-down-trigger"></span>
            </a>
            <ul>
              <li class="page_item page-item-2316"><a href="http://puppetlabs.com/company/overview/">Overview</a></li>
<li class="page_item page-item-2179"><a href="http://puppetlabs.com/company/news/">News</a>
<ul class="children">
	<li class="page_item page-item-2338"><a href="http://puppetlabs.com/company/news/press-releases/">Press Releases</a></li>
	<li class="page_item page-item-2383"><a href="http://puppetlabs.com/company/news/media-kit/">Media Kit</a></li>
</ul>
</li>
<li class="page_item page-item-1571"><a href="http://puppetlabs.com/company/careers/">Careers</a></li>
<li class="page_item page-item-10372"><a href="http://puppetlabs.com/company/management/">Management</a></li>
<li class="page_item page-item-10311"><a href="http://puppetlabs.com/company/board-and-advisors/">Board and Advisors</a></li>
<li class="page_item page-item-10367"><a href="http://puppetlabs.com/company/investors/">Investors</a></li>
<li class="page_item page-item-2313"><a href="http://puppetlabs.com/company/contact-us/">Contact Us</a></li>
<li class="page_item page-item-10579"><a href="http://puppetlabs.com/company/awards/">Awards</a></li>
            </ul>
          </li>
    		</ul>
          <div id="misc-navigation">
			  <ul>
				<li><a href="http://puppetlabs.com/security/">Security</a></li>
				<li><a href="http://docs.puppetlabs.com">Documentation</a></li>
				<li><a href="http://puppetlabs.com/resources/customer-support/">Support</a></li>
			        <li><a href="http://projects.puppetlabs.com/">Bug Tracker</a></li>
				<li><a href="http://puppetlabs.com/company/contact/contact-us">Contact Us</a></li>
				<li><a href="http://info.puppetlabs.com/download-pe2.html" class="gateway">Download</a></li>
			  </ul>
			<form action="http://www.google.com/cse" id="cse-search-box">
			  <div>
				<input type="hidden" name="cx" value="017668764424496204839:ubligvgbenm" />
				<input type="hidden" name="ie" value="UTF-8" />
				<input type="text" name="q" class="gsc-input" size="31" />
				<input type="submit" name="sa" class="searchbtn" value="Search" />
			  </div>
			</form>
			<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&amp;lang=en"></script>
          </div>
      </nav>
    	</div>
    </header>

      <section id="masthead">
        <div class="site-width">
          <h1>Docs: <span class="section-name">Subcollectives</span></h1>
          <ul id="doc-navigation">
            <li><a href="./../../../index.html">Docs Home</a></li>
            <li class="with-submenu">
              <a href="#">
                <span>Quick Nav</span>
                <span class="drop-down-trigger"></span>
              </a>
               <!-- the following links can't be relative, unfortunately -->
               <!-- future: add some JS to disable this if running from file:// -->
                               <dl>
                  <dt>Puppet Documentation</dt>
                      <dd><a href="./../../../puppet/3/reference/index.html">Puppet 3 Reference Manual</a></dd>
                      <dd><a href="./../../../puppet/2.7/reference/index.html">Puppet 2.7 Reference Manual</a></dd>
                      <dd><a href="./../../../pe/latest/index.html">Puppet Enterprise User's Guide</a></dd>
                      <dd><a href="./../../../learning/index.html">Learning Puppet</a></dd>
                      <dd><a href="./../../../references/latest/type.html">Resource Types</a></dd>
                      <dd><a href="./../../../references/latest/function.html">Functions</a></dd>
                      <dd><a href="./../../../references/latest/configuration.html">Configuration</a></dd>
                      <dd><a href="./../../../references/latest/developer/index.html">Developer</a></dd>
                      <dd><a href="./../../../references/glossary.html">Glossary of Puppet Terms</a></dd>
                      <dd><a href="./../../../references/index.html">Older References</a></dd>
                  <dt>Facter</dt>
                      <dd><a href="./../../../facter/latest/core_facts.html">Core Facts Reference</a></dd>
                  <dt>PuppetDB</dt>
                      <dd><a href="./../../../puppetdb/1/index.html">PuppetDB 1 Manual</a></dd>
                  <dt>MCollective</dt>
                      <dd><a href="./../../../mcollective/index.html">Index</a></dd>
                      <dd><a href="./../../../mcollective/reference/index.html">References</a></dd>
                      <dd><a href="./../../../mcollective/simplerpc/index.html">Writing Plugins</a></dd>
                      <dd><a href="./../../../mcollective/releasenotes.html">Release Notes</a></dd>
                </dl>

            </li>
            <li><a href="./../../../contribute.html">Contribute</a></li>
          </ul>
        </div>
        <br />
      </section>

      <section id="content">
        <div class="site-width">
          <div class="primary-secondary-content">
            <div class="primary-content">
              <h1>Subcollectives</h1>
              <nav class="in-page" id="page-nav">
<ol class="toc">
</ol></nav>

<h1 id="subcollectives">Subcollectives</h1>

<ul id="markdown-toc">
  <li><a href="#subcollectives">Subcollectives</a></li>
  <li><a href="#overview">Overview</a></li>
  <li><a href="#partitionion-approaches">Partitionion Approaches</a></li>
  <li><a href="#configuring-mcollective">Configuring MCollective</a></li>
  <li><a href="#partitioning-for-security">Partitioning for Security</a></li>
  <li><a href="#testing">Testing</a></li>
  <li><a href="#activemq-filters">ActiveMQ Filters</a></li>
</ul>

<h1 id="overview">Overview</h1>

<p>By default all servers are part of a single broadcast domain, if you have an
agent on all machines in your network and you send a message directed to
machines with that agent they will all get it regardless of filters.</p>

<p>This works well for the common use case but can present problems in the
following scenarios:</p>

<ul>
  <li>You have a very big and busy network.  With thousands of machines responding
to requests every 10 seconds very large numbers of messages will be created
and you might want to partition the traffic.</li>
  <li>You have multiple data centers on different continents, the latency and
volume of traffic will be too big.  You&#8217;d want to duplicate monitoring and
management automations in each datacenter but as it&#8217;s all one broadcast
domain you still see large amount of traffic on the slow link.</li>
  <li>You can&#8217;t just run multiple seperate installs because you still wish to
retain the central management feature of MCollective.</li>
  <li>Securing a flat network can be problematic.  SimpleRPC has a security
framework that is aware of users and network topology but the core network
doesnt.</li>
</ul>

<p>In version <em>1.1.3</em> we&#8217;ve introduced the concept of sub collectives that lets you
define broadcast domains and configure a mcollective server to belong to one or
many of these domains.</p>

<h1 id="partitionion-approaches">Partitionion Approaches</h1>

<p>Determining how to partition your nework can be a very complex subject and
requires an understanding of your message flow, where requestors sit and also
the topology of your middleware clusters.</p>

<p>Most middleware solutions will only send traffic where they know there exist an
interest in this traffic.  Therefore if you had an agent on only 10 of 1000
machines only those 10 machines will receive the associated traffic.  This is an
important distinction to keep in mind.</p>

<p><img src="../../images/subcollectives-multiple-middleware.png" alt="ActiveMQ Cluster" /></p>

<p>We&#8217;ll be working with a small 52 node collective that you can see above, the
collective has machines in many data centers spread over 4 countries.  There are
3 ActiveMQ servers connected in a mesh.</p>

<p>Along with each ActiveMQ node is also a Puppet Master, Nagios instance and other
shared infrastructure components.</p>

<p>An ideal setup for this network would be:</p>

<ul>
  <li>MCollective NRPE and Puppetd Agent on each of 52 servers</li>
  <li>Puppet Commander on each of the 3 ActiveMQ locations</li>
  <li>Nagios in each of the locations monitoring the machines in its region</li>
  <li>Regional traffic will be isolated and contained to the region as much as
possible</li>
  <li>Systems Administrators and Registration data retain the ability to target the
whole collective</li>
</ul>

<p>The problem with a single flat collective is that each of the 3 Puppet
Commanders will get a copy of all the traffic, even traffic they did not request
they will simply ignore the wrong traffic.  The links between Europe and US will
see a large number of messages traveling over them.  In a small 52 node traffic
this is managable but if each of the 4 locations had thousands of nodes the
situation will rapidly become untenable.</p>

<p>It seems natural then to create a number of broadcast domains - subcollectives:</p>

<ul>
  <li>A global collective that each machines belongs to</li>
  <li>UK, DE, ZA and US collectives that contains just machines in those regions</li>
  <li>An EU collective that has UK, DE and ZA machines</li>
</ul>

<p>Visually this arrangement might look like the diagram below:</p>

<p><img src="../../images/subcollectives-collectives.png" alt="Subcollectives" /></p>

<p>Notice how subcollectives can span broker boundaries - our EU collective has nodes
that would connect to both the UK and DE brokers.</p>

<p>We can now configure our Nagios and Puppet Commanders to communicate only to the
sub collectives and the traffic for these collectives will be contained
regionally.</p>

<p>The graph below shows the impact of doing this, this is the US ActiveMQ instance
showing traffic before partitioning and after.  You can see even on a small
network this can have a big impact.</p>

<p><img src="../../images/subcollectives-impact.png" alt="Subcollectives" /></p>

<h1 id="configuring-mcollective">Configuring MCollective</h1>

<p>Configuring the partitioned collective above is fairly simple.  We&#8217;ll look at
one of the DE nodes for reference:</p>

<div class="highlight"><pre><code class="ini"><span class="na">topicprefix</span> <span class="o">=</span> <span class="s">/topic/</span>
<span class="na">collectives</span> <span class="o">=</span> <span class="s">mcollective,de_collective,eu_collective</span>
<span class="na">main_collective</span> <span class="o">=</span> <span class="s">mcollective</span>
</code></pre>
</div>

<p>The <em>collectives</em> directive tells the node all the collectives it should belong
to and the <em>main<code>_</code>collective</em> instructs Registration where to direct messages
to.</p>

<h1 id="partitioning-for-security">Partitioning for Security</h1>

<p>Another possible advantage from subcollectives is security.  While the SimpleRPC
framework has a security model that is aware of the topology the core network
layer does not.  Even if you only give someone access to run SimpleRPC requests
against some machines they can still use <em>mc ping</em> to discover other nodes on
your network.</p>

<p>By creating a subcollective of just their nodes and restricting them on the
middleware level to just that collective you can effectively and completely
create a secure isolated zone that overlays your exiting networok.</p>

<h1 id="testing">Testing</h1>

<p>Testing that it works is pretty simple, first we need a <em>client.cfg</em> that
configures your client to talk to all the sub collectives:</p>

<div class="highlight"><pre><code class="ini"><span class="na">topicprefix</span> <span class="o">=</span> <span class="s">/topic/</span>
<span class="na">collectives</span> <span class="o">=</span> <span class="s">mcollective,uk_collective,us_collective,de_collective,eu_collective,us_collective,za_collective</span>
<span class="na">main_collective</span> <span class="o">=</span> <span class="s">mcollective</span>
</code></pre>
</div>

<p>You can now test with <em>mc ping</em>:</p>

<div class="highlight"><pre><code class="console"><span class="gp">$</span> mc ping -T us_collective
<span class="go">host1.us.my.net         time=200.67 ms</span>
<span class="go">host2.us.my.net         time=241.30 ms</span>
<span class="go">host3.us.my.net         time=245.24 ms</span>
<span class="go">host4.us.my.net         time=275.42 ms</span>
<span class="go">host5.us.my.net         time=279.90 ms</span>
<span class="go">host6.us.my.net         time=283.61 ms</span>
<span class="go">host7.us.my.net         time=370.56 ms</span>


<span class="go">---- ping statistics ----</span>
<span class="go">7 replies max: 370.56 min: 200.67 avg: 270.96</span>
</code></pre>
</div>

<p>By specifying other collectives in the -T argument you should see the sub
collectives and if you do not specify anything you should see all machines.</p>

<p>Clients don&#8217;t need to know about all collectives, only the ones they intend
to communicate with.</p>

<p>You can discover the list of known collectives and how many nodes are in each
using the <em>inventory</em> application:</p>

<div class="highlight"><pre><code class="console"><span class="gp">$</span> mc inventory --list-collectives

<span class="go"> * [ ==================================== ] 52 / 52</span>

<span class="go">   Collective                     Nodes</span>
<span class="go">   ==========                     =====</span>
<span class="go">   za_collective                  2</span>
<span class="go">   us_collective                  7</span>
<span class="go">   uk_collective                  19</span>
<span class="go">   de_collective                  24</span>
<span class="go">   eu_collective                  45</span>
<span class="go">   mcollective                    52</span>

<span class="go">                     Total nodes: 52</span>
</code></pre>
</div>

<h1 id="activemq-filters">ActiveMQ Filters</h1>

<p>The above setup should just work in most cases but you might want to go one step
further and actively prevent propagation across the network of sub collective
traffic.</p>

<p>In your ActiveMQ broker setup you will already have a section defining your
network connections, something like:</p>

<div class="highlight"><pre><code class="xml"><span class="nt">&lt;networkConnectors&gt;</span>
  <span class="nt">&lt;networkConnector</span>
     <span class="na">name=</span><span class="s">"us-uk"</span>
     <span class="na">uri=</span><span class="s">"static:(tcp://stomp1.uk.my.net:6166)"</span>
     <span class="na">userName=</span><span class="s">"amq"</span>
     <span class="na">password=</span><span class="s">"secret"</span>
     <span class="na">duplex=</span><span class="s">"true"</span> <span class="nt">/&gt;</span>
<span class="nt">&lt;/networkConnectors&gt;</span>
</code></pre>
</div>

<p>You can add filters here restricting traffic in this case the US&lt;-&gt;UK connection
should never transmit <em>us<code>_</code>collective</em> traffic, so lets restrict that:</p>

<div class="highlight"><pre><code class="xml"><span class="nt">&lt;networkConnectors&gt;</span>
  <span class="nt">&lt;networkConnector</span>
     <span class="err">&lt;excludedDestinations</span><span class="nt">&gt;</span>
       <span class="nt">&lt;topic</span> <span class="na">physicalName=</span><span class="s">"us_collective.&gt;"</span> <span class="nt">/&gt;</span>
       <span class="nt">&lt;topic</span> <span class="na">physicalName=</span><span class="s">"uk_collective.&gt;"</span> <span class="nt">/&gt;</span>
       <span class="nt">&lt;topic</span> <span class="na">physicalName=</span><span class="s">"de_collective.&gt;"</span> <span class="nt">/&gt;</span>
       <span class="nt">&lt;topic</span> <span class="na">physicalName=</span><span class="s">"za_collective.&gt;"</span> <span class="nt">/&gt;</span>
       <span class="nt">&lt;topic</span> <span class="na">physicalName=</span><span class="s">"eu_collective.&gt;"</span> <span class="nt">/&gt;</span>
     <span class="nt">&lt;/excludedDestinations&gt;</span>
     name="us-uk"
     uri="static:(tcp://stomp1.uk.my.net:6166)"
     userName="amq"
     password="secret"
     duplex="true" /&gt;
<span class="nt">&lt;/networkConnectors&gt;</span>
</code></pre>
</div>


              <blockquote><p style="font-size: 1.3em; text-align: center;"><a href="#content">&#8593; Back to top</a></p></blockquote>
            </div>
            <nav class="main">
                  <div id="subCol">

<h3 class="versionnote">This page is for an older version of MCollective.</h3>
<p class="versionnote">This page covers MCollective 1.2.x, used in Puppet Enterprise 2.8 and earlier. For MCollective 2.x (and Puppet Enterprise 3), go to either:</p>
<ul class="versionnote">
  <li><a href="./../../../mcollective/reference/basic/subcollectives.html">The current version of this page</a></li>
  <li><a href="./../../../mcollective/index.html">MCollective documentation index</a></li>
</ul>

<ul>
  <li><strong>Overview</strong>
    <ul>
      <li><a href="./../../../mcollective1.2/">Introduction</a></li>
      <li><a href="./../../../mcollective1.2/terminology.html">Terminology</a></li>
      <li><a href="./../../../mcollective1.2/screencasts.html">Screencasts</a></li>
      <li><a href="./../../../mcollective1.2/ec2demo.html">Public EC2 Demo</a></li>
      <li><a href="./../../../mcollective1.2/releasenotes.html">Release Notes</a></li>
      <li><a href="./../../../mcollective1.2/changelog.html">Changelog</a></li>
      <li><a href="./../../../mcollective1.2/reference/">Alternate Index</a></li>
    </ul>
  </li>
  <li><strong>Deploy, Install, and Configure MCollective</strong>
    <ul>
      <li><a href="./../../../mcollective1.2/reference/basic/gettingstarted_redhat.html">Getting Started (Red Hat)</a></li>
      <li><a href="./../../../mcollective1.2/reference/basic/gettingstarted.html">Getting Started (generic)</a></li>
      <li><a href="./../../../mcollective1.2/reference/integration/activemq_clusters.html">ActiveMQ Clustering</a></li>
      <li><a href="./../../../mcollective1.2/reference/integration/activemq_security.html">ActiveMQ Security</a></li>
      <li><a href="./../../../mcollective1.2/reference/integration/activemq_ssl.html">ActiveMQ TLS</a></li>
      <li><a href="./../../../mcollective1.2/reference/integration/puppet.html">Puppet Integration</a></li>
      <li><a href="./../../../mcollective1.2/reference/integration/chef.html">Chef Integration</a></li>
      <li><a href="./../../../mcollective1.2/reference/basic/configuration.html">Configuration Reference</a></li>
      <li><a href="./../../../mcollective1.2/reference/plugins/connector_stomp.html">Configuring the Generic Stomp Connector</a></li>
      <li><a href="./../../../mcollective1.2/reference/plugins/security_aes.html">Configuring AES Security</a></li>
      <li><a href="./../../../mcollective1.2/reference/plugins/security_ssl.html">Configuring Validation-Only SSL Security</a></li>
      <li><span class="currentpage">Configuring Subcollectives and Partitioning</span></li>
      <li><a href="./../../../mcollective1.2/simplerpc/auditing.html">Enabling Auditing</a> <!-- contains plugin-writing info --></li>
    </ul>
  </li>
  <li><strong>Use and Administer MCollective</strong>
    <ul>
      <li><a href="./../../../mcollective1.2/reference/ui/filters.html">Command Filtering and Discovery</a></li>
      <li><a href="./../../../mcollective1.2/reference/basic/daemon.html">Controlling the MCollective Daemon</a></li>
      <li><a href="./../../../mcollective1.2/reference/plugins/rpcutil.html">Controlling the MCollective Daemon with the rpcutil Agent</a></li>
      <li><a href="./../../../mcollective1.2/reference/ui/nodereports.html">On-Demand Node Reports</a></li>
    </ul>
  </li>
  <li><strong>Write Agent Plugins</strong>
    <ul>
      <li><a href="./../../../mcollective1.2/simplerpc/agents.html">Writing Agent Plugins</a></li>
      <li><a href="./../../../mcollective1.2/simplerpc/ddl.html">Writing DDL Files</a></li>
    </ul>
  </li>
  <li><strong>Write Clients and Applications</strong>
    <ul>
      <li><a href="./../../../mcollective1.2/simplerpc/clients.html">Writing Clients</a></li>
      <li><a href="./../../../mcollective1.2/reference/plugins/application.html">Writing New mco Subcommands</a></li>
    </ul>
  </li>
  <li><strong>Write Other Plugins</strong>
    <ul>
      <li><a href="./../../../mcollective1.2/simplerpc/authorization.html">Writing Authorization Plugins and Enabling Authorization</a> <!-- contains deploy/config info --></li>
      <li><a href="./../../../mcollective1.2/reference/plugins/facts.html">Writing Facts Plugins</a></li>
      <li><a href="./../../../mcollective1.2/reference/plugins/registration.html">Writing Registration Plugins</a></li>
    </ul>
  </li>
  <li><a href="http://projects.puppetlabs.com/projects/mcollective-plugins/wiki">Plugin Directory</a></li>
  <li><strong>Internals</strong>
    <ul>
      <li><a href="./../../../mcollective1.2/reference/basic/messageflow.html">Message Flow</a> <!-- needs more/needs update --></li>
      <li><a href="./../../../mcollective1.2/simplerpc/">SimpleRPC Overview</a></li>
      <li><a href="./../../../mcollective1.2/simplerpc/messageformat.html">SimpleRPC Message Format</a></li>
      <li><a href="./../../../mcollective1.2/reference/basic/messageformat.html">Core Message Format</a></li>
      <li><a href="./../../../mcollective1.2/security.html">Security Overview</a></li>
    </ul>
  </li>
  <li><strong>Deprecated Pages</strong>
    <ul>
      <li><a href="./../../../mcollective1.2/reference/basic/basic_agent_and_client.html">Writing Old-Style Agent Plugins</a></li>
    </ul>
  </li>
</ul>

                      <div style="margin-top: 1.5em; padding-bottom: 10px;">
                          <p style="font-family: 'Lucida Grande',Lucida,Verdana,sans-serif;font-size: 16px; font-weight: bold; line-height: 22px; margin-bottom: 10px;">Download the Docs</p>
                          <a href="http://info.puppetlabs.com/download-pdfs.html"><img src="./../../../images/smallbits_small_docs.png" alt="Puppet docs download" /></a>
                      </div>
                      <div style="margin-top: 0; padding-bottom: 10px;">
                          <p style="font-family: 'Lucida Grande',Lucida,Verdana,sans-serif;font-size: 16px; font-weight: bold; line-height: 22px; margin-bottom: 10px;">Download Puppet Enterprise</p>
                          <a href="http://info.puppetlabs.com/download-pe.html"><img src="./../../../images/puppet_cert_home.jpg" alt="Puppet Enterprise promo" /></a>
                      </div>
                  </div>
            </nav>
          </div>
        </div>
      </section>

		<footer id="footer">
      <div class="site-width">

        <div class="primary-secondary-content">
          <div class="primary-content">
            <section id="newsletter">
                 <h4>Puppet Labs is Hiring</h4>
                 <p><a href="http://www.puppetlabs.com/company/jobs/">Engineers, developers &amp; consultants</a>
                  </p><p>
		</p><h4>Newsletter</h4>

              <p>Stay up to date on all things puppet</p>

				<form class="lpeRegForm formNotEmpty" method="post" enctype="application/x-www-form-urlencoded" action="http://info.puppetlabs.com/index.php/leadCapture/save" id="mktForm_1013" name="mktForm_1013">

				<label>Email Address:</label><span class="mktInput"><input class="mktFormText mktFormEmail" name="Email" id="Email" type="text" value="" maxlength="255" /><span class="mktFormMsg"></span></span>

				<input id="mktFrmSubmit" type="submit" class="btn" style="width: auto; overflow: visible; padding-left: .25em; padding-right: .25em;" value="Subscribe" name="submitButton" onclick="formSubmit(document.getElementById(&quot;mktForm_1013&quot;)); return false;" />

				<input style="display: none;" id="mktFrmReset" type="reset" value="Clear" name="resetButton" onclick="formReset(document.getElementById(&quot;mktForm_1013&quot;)); return false;" />

				<span style="display:none;"><input type="text" name="_marketo_comments" value="" /></span>
				<input type="hidden" name="lpId" value="-1" />
				<input type="hidden" name="subId" value="100" />

				<input type="hidden" name="kw" value="" />
				<input type="hidden" name="cr" value="" />

				<input type="hidden" name="searchstr" value="" />
				<input type="hidden" name="lpurl" value="http://info.puppetlabs.com/testsubscription.html?cr={creative}&amp;kw={keyword}" />
				<input type="hidden" name="formid" value="1013" />
				<input type="hidden" name="returnURL" value="http://www.puppetlabs.com/misc/subscription-thank-you/" />
				<input type="hidden" name="retURL" value="http://www.puppetlabs.com/misc/subscription-thank-you/" />
				<input type="hidden" name="_mkt_disp" value="return" />
				<input type="hidden" name="_mkt_trk" value="" />

				</form>
				<script type="text/javascript" src="http://info.puppetlabs.com/js/mktFormSupport.js"></script>

				<script type="text/javascript"><![CDATA[
				function formSubmit(elt) {
				return Mkto.formSubmit(elt);
				}
				function formReset(elt) {
				return Mkto.formReset(elt);
				}
				]]></script>

<a href="http://info.puppetlabs.com/puppet-enterprise" class="fbtn">Try Puppet Enterprise FREE</a>

            </section>
            <section id="elsewhere">
              <h4>Get Involved</h4>
              <ul>

                <li class="chat"><a href="http://webchat.freenode.net/?channels=puppet" rel="external"><span class="indicator"></span><span>Chat with us on IRC</span></a></li>
		<li class="discussion"><a href="http://groups.google.com/group/puppet-dev" rel="external"><span class="indicator"></span><span>Join the Puppet Developer List</span></a></li>
                <li class="discussion"><a href="http://groups.google.com/group/puppet-users?pli=1" rel="external"><span class="indicator"></span><span>Join the Puppet User List</span></a></li>

                <li class="linkedin"><a href="http://www.linkedin.com/groups?about=&amp;gid=696467&amp;trk=anet_ug_grppro" rel="external"><span class="indicator"></span><span>Join the Puppet Users LinkedIn group</span></a></li>

              </ul>
		<p>
		              		</p><h4>Follow us&#8230;</h4>

              		<ul class="followus">


			<li><a href="http://feeds.feedburner.com/PuppetLabs" target="_blank"><img src="http://www.puppetlabs.com/wp-content/plugins/my-profiles/images/rss.png" border="0" /></a></li>
			<li><a href="http://www.facebook.com/pages/Puppet-Labs/219089920711" target="_blank"><img src="http://www.puppetlabs.com//wp-content/plugins/my-profiles/images/facebook.png" border="0" /></a></li>
			<li><a href="http://www.twitter.com/puppetlabs" target="_blank"><img src="http://www.puppetlabs.com//wp-content/plugins/my-profiles/images/twitter.png" border="0" /></a></li>
			<li><a href="http://www.linkedin.com/groups?about=&amp;gid=696467&amp;trk=anet_ug_grppro" target="_blank"><img src="http://www.puppetlabs.com//wp-content/uploads/2011/01/LinkedIn_IN_Icon_32px.png" border="0" /></a></li>    <li><a href="https://github.com/puppetlabs" target="_blank"><img src="http://www.puppetlabs.com//wp-content/uploads/2011/01/github_icon.png" border="0" /></a></li>
			<li><a href="https://plus.google.com/112682055028218091774?rel=author" target="_blank"><img src="https://puppetlabs.com/wp-content/uploads/2013/05/google_plus32x32.png" alt="Find Us on Google+" border="0" /></a></li>
					</ul>

              	

            </section>
          </div>
          <div class="secondary-content">
            <section id="book-it">
              <h4>Get the book!</h4>

              <p>James Turnbull and Jeff McCune's book <a href="http://www.apress.com/9781430230571" rel="nofollow">Pro Puppet</a> is a comprehensive and up-to-date look at Puppet and MCollective. </p>
              <a href="http://www.apress.com/9781430230571" rel="nofollow"><img src="http://www.puppetlabs.com/wp-content/uploads/2011/05/propuppetthumb.png" /></a>
            </section>
          </div>
        </div>
      </div>
		</footer>

    <div id="copyright">
      <div class="site-width">
        &#169; 2011 <a href="http://www.puppetlabs.com/" title="Puppet Labs">Puppet Labs</a>
        <span class="vcard">
         <span class="org"></span>
         <a class="email" href="mailto:info@puppetlabs.com">info@puppetlabs.com</a>

          <span class="adr">
           <span class="street-address">926 NW 13th Avenue #210</span>
           /
           <span class="locality">Portland</span>,
           <span class="region">OR</span>
           <span class="postal-code">97209</span>

          </span>

         <span class="tel">1-877-575-9775</span>
        </span>
      </div>
    </div>

  	<script type="text/javascript"><![CDATA[Cufon.now();]]></script>
  	<style type="text/css"><![CDATA[h1, h2, .btn { visibility : visible; }]]></style>


	</body>
</html>
