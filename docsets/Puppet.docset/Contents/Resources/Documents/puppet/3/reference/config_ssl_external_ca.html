<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US" xml:lang="en-US">
  <head>
  	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  	<title>Configuration: External CA Support &#8212; Documentation &#8212; Puppet Labs</title>
  	<link rel="alternate" type="application/atom+xml" title="Puppet Labs Documentation Updates" href="https://github.com/puppetlabs/puppet-docs/commits/master.atom" />
    <link rel="alternate" type="application/atom+xml" title="Puppet Labs Blog Feed" href="http://puppetlabs.com/feed/atom/" />
    <link rel="index" title="Puppet Labs Documentation" href="http://docs.puppetlabs.com" />
    <link rel="icon" href="./../../../favicon.ico" />


  <meta name="description" content="Starting with Puppet 3.2.0 and later, Puppet can use an existing external CA for all of its SSL communications. This page describes the supported c..." />



    <!-- FIXME: absolute paths -->

    <script type="text/javascript" src="./../../../files/javascripts/html5.js"></script>
    <script type="text/javascript" src="./../../../files/javascripts/jquery-1.3.2.min.js"></script>
    <script type="text/javascript" src="./../../../files/javascripts/drop_down.js"></script>
    <script type="text/javascript" src="./../../../files/javascripts/cufon-yui.js"></script>
    <script type="text/javascript" src="./../../../files/fonts/Klavika_400-Klavika_600.font.js"></script>
    <script type="text/javascript" src="./../../../files/javascripts/ampersands.js"></script>
    <script type="text/javascript" src="./../../../files/javascripts/navigation-accordion.js"></script>

    <script type="text/javascript" src="http://puppetlabs.com/wp-content/themes/puppetlabs/javascripts/leadcapture.js"></script>

    <!-- All in One SEO Pack 1.6.10.1 by Michael Torbert of Semper Fi Web Design[127,146] -->
    <meta name="keywords" content="Puppet, puppet labs, reductive labs, open source, system administrator, ruby, data center, automation, support" />
    <!-- /all in one seo pack -->

    <!-- Give us the option of setting a canonical URL in yaml frontmatter -NF -->
    <link rel="canonical" href="http://docs.puppetlabs.com/puppet/3/reference/config_ssl_external_ca.html" />

    <!-- FIXME: absolute paths -->

    <link rel="stylesheet" type="text/css" href="./../../../files/stylesheets/style.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="./../../../files/stylesheets/syntax.css" media="screen" /> <!-- index -->
    <link rel="stylesheet" type="text/css" href="./../../../files/stylesheets/adbanner.css" media="screen" />

    <!--[if IE 7]>
	  <link rel="stylesheet" type="text/css" href="/files/stylesheets/ie_7.css" media="screen"> <!-- index -->
    

    <!--[if IE 8]>
	    <link rel="stylesheet" type="text/css" href="/files/stylesheets/ie_8.css" media="screen"> <!-- index -->
    

  	<script type="text/javascript"><![CDATA[
      Cufon.replace('h1, h2', { fontWeight: '600' });
  	]]></script>
</head>




  <body id="puppetlabsdocs" class="docs">
  <style type="text/css"><![CDATA[h1, h2{ visibility : hidden }]]></style>
  <!--[if IE 8]>
    <style type="text/css">h1, h2{ visibility : visible }</style>
  <![endif]-->

  	<header id="header">
      <div class="site-width">
    		<h1><a href="http://puppetlabs.com/"><span>Puppet Labs</span></a></h1>
        <a class="screen-reader-content" href="#content">Skip navigation</a>
        <nav>
    		<ul id="global-navigation">
          <li id="puppet-tab" class="with-submenu">
            <a href="http://puppetlabs.com/puppet/puppet-enterprise">
              <span>Products</span>
              <span class="drop-down-trigger"></span>
            </a>
            <ul>
			<li>
                <ul>
                   <a href="http://puppetlabs.com/puppet/what-is-puppet/">What is Puppet?</a>
                </ul>
              </li>
			       <li>
                <ul>
                   <a href="http://puppetlabs.com/puppet/puppet-enterprise/">Puppet Enterprise</a>
                </ul>
              </li>
            <li>
                <ul>
                   <a href="http://puppetlabs.com/puppet/whats-new/">What's New in 2.5</a>
                </ul>
              </li>
            <li>
                <ul>
                   <a href="http://puppetlabs.com/puppet/puppet-open-source/">Puppet Open Source</a>
                </ul>
              </li>
            <li>
                <ul>
                   <a href="http://puppetlabs.com/puppet/enterprise-vs-open-source/">Enterprise vs. Open Source</a>
                </ul>
              </li>
              <li>
                <ul>
                  <a href="http://forge.puppetlabs.com">Puppet Forge</a>
                </ul>
              </li>
              <li>
                <ul>
                  <a href="http://puppetlabs.com/puppet/requirements/">Components &amp; Requirements</a>
                </ul>
              </li>
              <li>
                <ul>
                  <a href="http://puppetlabs.com/puppet/faq/">FAQ</a>
                </ul>
              </li>
			  <li>
                <ul>
                  <a href="http://puppetlabs.com/puppet/how-to-buy/">How to Buy</a>
                </ul>
              </li>
            </ul>
          </li>
          <li id="solutions-tab" class="with-submenu">
            <a href="http://puppetlabs.com/solutions/">
              <span>Solutions</span>
              <span class="drop-down-trigger"></span>
            </a>
            <ul>
              <li class="page_item page-item-12296"><a href="http://puppetlabs.com/solutions/configuration-management/">Configuration Management</a></li>
<li class="page_item page-item-986"><a href="http://puppetlabs.com/solutions/virtualization-management/">Virtualization Management</a></li>
<li class="page_item page-item-993"><a href="http://puppetlabs.com/solutions/cloud-management/">Cloud Management</a></li>
<li class="page_item page-item-996"><a href="http://puppetlabs.com/solutions/it-compliance/">IT Compliance</a></li>
<li class="page_item page-item-9520"><a href="http://puppetlabs.com/solutions/devops/">DevOps</a></li>
<li class="page_item page-item-991"><a href="http://puppetlabs.com/solutions/manage-os-x-resources/">OS X Desktops</a></li>
            </ul>
          </li>
          <li id="services-tab" class="with-submenu">
            <a href="http://puppetlabs.com/services/">
              <span>Services</span>
              <span class="drop-down-trigger"></span>
            </a>
            <ul>
              <li class="page_item page-item-783"><a href="http://puppetlabs.com/services/overview/">Overview</a></li>
<li class="page_item page-item-1052"><a href="http://puppetlabs.com/services/customer-support/">Customer Support</a></li>
<li class="page_item page-item-11022"><a href="http://puppetlabs.com/services/support-plans/">Support Plans</a></li>
<li class="page_item page-item-845"><a href="http://puppetlabs.com/services/training-workshops/">On-Site Education</a></li>
<li class="page_item page-item-4899"><a href="http://puppetlabs.com/services/consulting/">Professional Services</a></li>
<li class="page_item page-item-849"><a href="http://puppetlabs.com/category/events/upcoming/">Events &amp; Workshops</a></li>
<li class="page_item page-item-851"><a href="http://puppetlabs.com/services/partners/">Partners</a></li>
            </ul>
          </li>
                    <li id="resources-tab" class="with-submenu">
            <a href="http://puppetlabs.com/resources/">
              <span>Resources</span>
              <span class="drop-down-trigger"></span>
            </a>
            <ul>
              <li class="page_item page-item-1048"><a href="http://puppetlabs.com/resources/overview-2/">Overview</a></li>
<li class="page_item page-item-1040"><a href="http://docs.puppetlabs.com">Documentation</a></li>
<li class="page_item page-item-872"><a href="http://info.puppetlabs.com/register-download">Downloads</a></li>
<li class="page_item page-item-1961"><a href="http://forge.puppetlabs.com">Puppet Forge</a></li>
<li class="page_item page-item-835"><a href="http://info.puppetlabs.com/download-whitepapers.html">White Papers</a></li>
<li class="page_item page-item-1967"><a href="http://projects.puppetlabs.com/projects/puppet/wiki">Wiki</a></li>
<li class="page_item page-item-7279"><a href="http://puppetlabs.com/resources/webinars/">Upcoming Webinars</a></li>
<li class="page_item page-item-10183"><a href="http://puppetlabs.com/resources/newsletter/">Newsletter</a></li>
<li class="page_item page-item-12263"><a href="http://puppetlabs.com/resources/tech-notes/">Tech Notes</a></li>
<li class="page_item page-item-10265"><a href="http://info.puppetlabs.com/pe2-webinar.html">Webinars</a></li>
            </ul>
          </li>

          <li id="customers-tab" class="with-submenu">
            <a href="http://puppetlabs.com/customers/companies/">
              <span>Customers</span>
              <span class="drop-down-trigger"></span>
            </a>
            <ul>
			<li>
                <ul>
                  <a href="http://puppetlabs.com/customers/companies/">Companies</a>
                </ul>
              </li>
			  <li>
                <ul>
                  <a href="http://puppetlabs.com/customers/case-studies/">Case Studies</a>
                </ul>
              </li>
			  <li>
                <ul>
                  <a href="http://puppetlabs.com/customers/product-testimonials/">Product Testimonials</a>
                </ul>
              </li>
			    <li>
                <ul>
                  <a href="http://puppetlabs.com/customers/what-customers-are-saying/">Service Testimonials</a>
                </ul>
              </li>
            </ul>
          </li>
          <li id="community-tab" class="with-submenu">
            <a href="http://puppetlabs.com/community/">
              <span>Community</span>
              <span class="drop-down-trigger"></span>
            </a>

 <ul>
			<li>
                <ul>
                  <a href="http://puppetlabs.com/community/overview/">Overview</a>
                </ul>
              </li>
			<li>
                <ul>
                  <a href="http://puppetlabs.com/blog">Blog</a>
                </ul>
              </li>
			  <li>
                <ul>
                  <a href="http://puppetlabs.com/community/puppet-camp/">Puppet Camp</a>
                </ul>
              </li>
			  <li>
                <ul>
                  <a href="http://puppetlabs.com/community/user-groups-and-devops-groups/">Puppet User Groups &amp; DevOps Groups</a>
                </ul>
              </li>
	          <li>
                <ul>
                  <a href="http://puppetlabs.com/community/presentations/">Presentations</a>
                </ul>
              </li>
			    <li>
                <ul>
                  <a href="http://puppetlabs.com/community/videos/">Videos</a>
                </ul>
              </li>
            </ul>

          </li><li id="company-tab" class="with-submenu">
            <a href="http://puppetlabs.com/company/">
              <span>Company</span>
              <span class="drop-down-trigger"></span>
            </a>
            <ul>
              <li class="page_item page-item-2316"><a href="http://puppetlabs.com/company/overview/">Overview</a></li>
<li class="page_item page-item-2179"><a href="http://puppetlabs.com/company/news/">News</a>
<ul class="children">
	<li class="page_item page-item-2338"><a href="http://puppetlabs.com/company/news/press-releases/">Press Releases</a></li>
	<li class="page_item page-item-2383"><a href="http://puppetlabs.com/company/news/media-kit/">Media Kit</a></li>
</ul>
</li>
<li class="page_item page-item-1571"><a href="http://puppetlabs.com/company/careers/">Careers</a></li>
<li class="page_item page-item-10372"><a href="http://puppetlabs.com/company/management/">Management</a></li>
<li class="page_item page-item-10311"><a href="http://puppetlabs.com/company/board-and-advisors/">Board and Advisors</a></li>
<li class="page_item page-item-10367"><a href="http://puppetlabs.com/company/investors/">Investors</a></li>
<li class="page_item page-item-2313"><a href="http://puppetlabs.com/company/contact-us/">Contact Us</a></li>
<li class="page_item page-item-10579"><a href="http://puppetlabs.com/company/awards/">Awards</a></li>
            </ul>
          </li>
    		</ul>
          <div id="misc-navigation">
			  <ul>
				<li><a href="http://puppetlabs.com/security/">Security</a></li>
				<li><a href="http://docs.puppetlabs.com">Documentation</a></li>
				<li><a href="http://puppetlabs.com/resources/customer-support/">Support</a></li>
			        <li><a href="http://projects.puppetlabs.com/">Bug Tracker</a></li>
				<li><a href="http://puppetlabs.com/company/contact/contact-us">Contact Us</a></li>
				<li><a href="http://info.puppetlabs.com/download-pe2.html" class="gateway">Download</a></li>
			  </ul>
			<form action="http://www.google.com/cse" id="cse-search-box">
			  <div>
				<input type="hidden" name="cx" value="017668764424496204839:ubligvgbenm" />
				<input type="hidden" name="ie" value="UTF-8" />
				<input type="text" name="q" class="gsc-input" size="31" />
				<input type="submit" name="sa" class="searchbtn" value="Search" />
			  </div>
			</form>
			<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&amp;lang=en"></script>
          </div>
      </nav>
    	</div>
    </header>

      <section id="masthead">
        <div class="site-width">
          <h1>Docs: <span class="section-name">Configuration: External CA Support</span></h1>
          <ul id="doc-navigation">
            <li><a href="./../../../index.html">Docs Home</a></li>
            <li class="with-submenu">
              <a href="#">
                <span>Quick Nav</span>
                <span class="drop-down-trigger"></span>
              </a>
               <!-- the following links can't be relative, unfortunately -->
               <!-- future: add some JS to disable this if running from file:// -->
                               <dl>
                  <dt>Puppet Documentation</dt>
                      <dd><a href="./../../../puppet/3/reference/index.html">Puppet 3 Reference Manual</a></dd>
                      <dd><a href="./../../../puppet/2.7/reference/index.html">Puppet 2.7 Reference Manual</a></dd>
                      <dd><a href="./../../../pe/latest/index.html">Puppet Enterprise User's Guide</a></dd>
                      <dd><a href="./../../../learning/index.html">Learning Puppet</a></dd>
                      <dd><a href="./../../../references/latest/type.html">Resource Types</a></dd>
                      <dd><a href="./../../../references/latest/function.html">Functions</a></dd>
                      <dd><a href="./../../../references/latest/configuration.html">Configuration</a></dd>
                      <dd><a href="./../../../references/latest/developer/index.html">Developer</a></dd>
                      <dd><a href="./../../../references/glossary.html">Glossary of Puppet Terms</a></dd>
                      <dd><a href="./../../../references/index.html">Older References</a></dd>
                  <dt>Facter</dt>
                      <dd><a href="./../../../facter/latest/core_facts.html">Core Facts Reference</a></dd>
                  <dt>PuppetDB</dt>
                      <dd><a href="./../../../puppetdb/1/index.html">PuppetDB 1 Manual</a></dd>
                  <dt>MCollective</dt>
                      <dd><a href="./../../../mcollective/index.html">Index</a></dd>
                      <dd><a href="./../../../mcollective/reference/index.html">References</a></dd>
                      <dd><a href="./../../../mcollective/simplerpc/index.html">Writing Plugins</a></dd>
                      <dd><a href="./../../../mcollective/releasenotes.html">Release Notes</a></dd>
                </dl>

            </li>
            <li><a href="./../../../contribute.html">Contribute</a></li>
          </ul>
        </div>
        <br />
      </section>

      <section id="content">
        <div class="site-width">
          <div class="primary-secondary-content">
            <div class="primary-content">
              <h1>Configuration: External CA Support</h1>
              <nav class="in-page" id="page-nav">
<ol class="toc">
  <li class="toc-lv2"><a href="#supported-external-ca-configurations">Supported External CA Configurations</a></li>
  <li class="toc-lv2"><a href="#general-notes-and-requirements">General Notes and Requirements</a>
<ol class="toc">
   <li class="toc-lv3"><a href="#rack-webserver-is-required">Rack Webserver is Required</a></li>
   <li class="toc-lv3"><a href="#pem-encoding-of-credentials-is-mandatory">PEM Encoding of Credentials is Mandatory</a></li>
   <li class="toc-lv3"><a href="#normal-puppet-master-certificate-requirements-still-apply">Normal Puppet Master Certificate Requirements Still Apply</a></li>
   <li class="toc-lv3"><a href="#format-of-x-client-dn-request-header">Format of X-Client-DN Request Header</a></li>
   <li class="toc-lv3"><a href="#revocation">Revocation</a></li>
</ol></li>
  <li class="toc-lv2"><a href="#option-1-single-ca">Option 1: Single CA</a>
<ol class="toc">
   <li class="toc-lv3"><a href="#puppet-master">Puppet Master</a></li>
   <li class="toc-lv3"><a href="#puppet-agent">Puppet Agent</a></li>
</ol></li>
  <li class="toc-lv2"><a href="#option-2-single-intermediate-ca">Option 2: Single Intermediate CA</a>
<ol class="toc">
   <li class="toc-lv3"><a href="#puppet-master-1">Puppet Master</a></li>
   <li class="toc-lv3"><a href="#puppet-agent-1">Puppet Agent</a></li>
</ol></li>
  <li class="toc-lv2"><a href="#option-3-two-intermediate-cas-issued-by-one-root-ca">Option 3: Two Intermediate CAs Issued by One Root CA</a>
<ol class="toc">
   <li class="toc-lv3"><a href="#puppet-master-2">Puppet Master</a></li>
   <li class="toc-lv3"><a href="#puppet-agent-2">Puppet Agent</a></li>
</ol></li>
</ol></nav>

<p>Starting with <strong>Puppet 3.2.0 and later,</strong> Puppet can use an existing external CA for all of its SSL communications. This page describes the supported configurations for external CAs.</p>

<blockquote>
  <p><strong>Note:</strong> This page uses RFC 2119 style semantics for MUST, SHOULD, MAY.</p>
</blockquote>

<blockquote>
  <p><strong>Historical note:</strong> Using an external CA with Puppet has sometimes worked (or appeared to), but it frequently broke, and there was never a concerted effort to keep it working. Most recently, a security fix in Puppet 2.7.18 broke nearly all external CAs, and prevented a lot of people from upgrading through the early 3.x series. (See <a href="https://projects.puppetlabs.com/issues/15561">issue #15561</a>.)</p>

  <p>Starting with Puppet 3.2, Puppet Labs officially supports and tests external CAs in certain configurations. We&#8217;re hoping that 15561 will be the last total external CA breakage. Thanks for your patience, and please get in touch if your use case isn&#8217;t covered.</p>
</blockquote>

<h2 id="supported-external-ca-configurations">Supported External CA Configurations</h2>

<p>Puppet &#8805; 3.2 supports <em>some</em> external CA configurations, but not every possible arrangement. We fully support the following setups:</p>

<ol>
  <li><a href="#option-1-single-ca">Single self-signed CA which directly issues SSL certificates.</a></li>
  <li><a href="#option-2-single-intermediate-ca">Single, intermediate CA issued by a root self-signed CA.</a>  The intermediate
CA directly issues SSL certificates; the root CA doesn&#8217;t.</li>
  <li><a href="#option-3-two-intermediate-cas-issued-by-one-root-ca">Two intermediate CAs, both issued by the same root self-signed CA.</a>
    <ul>
      <li>One intermediate CA issues SSL certificates for puppet master servers.</li>
      <li>The other intermediate CA issues SSL certificates for agent nodes.</li>
      <li>Agent certificates can&#8217;t act as servers, and master certificates can&#8217;t act as clients.</li>
    </ul>
  </li>
</ol>

<p>These are fully supported by Puppet Labs, which means:</p>

<ul>
  <li>Issues that arise in one of these three arrangements are considered <strong>bugs,</strong> and we&#8217;ll fix them ASAP.</li>
  <li>Issues that arise in any <em>other</em> external CA setup are considered <strong>feature requests,</strong> and we&#8217;ll consider whether to expand our support.</li>
</ul>

<p>These configurations are all-or-nothing rather than mix-and-match. When using an external CA, the built in Puppet CA service <strong>must</strong> be disabled and cannot be used to issue SSL certificates.</p>

<p>Additionally, Puppet cannot automatically distribute certificates in these configurations &#8212; you must have your own complete system for issuing and distributing certificates.</p>

<h2 id="general-notes-and-requirements">General Notes and Requirements</h2>

<h3 id="rack-webserver-is-required">Rack Webserver is Required</h3>

<p>The puppet master must be running inside of a Rack-enabled web server, not the built-in Webrick server.</p>

<p>In practice, this means Apache or Nginx.  We fully support any web server that can:</p>

<ul>
  <li>Terminate SSL</li>
  <li>Verify the authenticity of a client SSL certificate</li>
  <li>Set two request headers for:
    <ul>
      <li>Whether the client was verified</li>
      <li>The client&#8217;s distinguished name</li>
    </ul>
  </li>
</ul>

<h3 id="pem-encoding-of-credentials-is-mandatory">PEM Encoding of Credentials is Mandatory</h3>

<p>Puppet always expects its SSL credentials to be in <code>.pem</code> format.</p>

<h3 id="normal-puppet-master-certificate-requirements-still-apply">Normal Puppet Master Certificate Requirements Still Apply</h3>

<p>Any puppet master certificate must contain the DNS name at which agent nodes will attempt to contact that master, either as the subject CN or as a Subject Alternative Name (DNS).</p>

<h3 id="format-of-x-client-dn-request-header">Format of X-Client-DN Request Header</h3>

<p>Rack web servers must set a client request header, which the puppet master will check based on the <a href="./../../../references/latest/configuration.html#sslclientheader"><code>ssl_client_header</code> setting</a>.</p>

<p>This header should conform to the following specifications:</p>

<ul>
  <li>The value of the client certificate DN should be in <a href="http://www.ietf.org/rfc/rfc2253.txt">RFC-2253</a> format. The format of the <code>SSL_CLIENT_S_DN</code> environment variable (set by Apache &#8805; 2.2&#8217;s <code>mod_ssl</code>) is fully supported.</li>
  <li>Alternatively, the value of this request header may be in &#8220;OpenSSL&#8221; format.</li>
</ul>

<h3 id="revocation">Revocation</h3>

<p>Certificate revocation list (CRL) checking works in all three supported
configurations, so long as the CRL file is distributed to the agents and masters
using an &#8220;out of band&#8221; process.  Puppet won&#8217;t automatically update the CRL on any
of the components in the system.</p>

<h4 id="if-unused">If Unused:</h4>

<p>If revocation lists are <strong>not</strong> being used by the external CA, you must disable CRL checking on the agent.
Set <code>certificate_revocation = false</code> in the
<code>[agent]</code> section of <a href="./../../../guides/configuring.html#puppetconf">puppet.conf</a> on <strong>every agent node.</strong></p>

<p>(If it&#8217;s not set to false and the agent doesn&#8217;t already have a CRL file, it will try to download one from the master. This will fail, because the master must have the CA service disabled.)</p>

<h4 id="if-used">If Used:</h4>

<p>If revocation lists <strong>are</strong> being used by the external CA, then the CRL file must
be manually distributed to <strong>every agent node</strong> as a PEM encoded bundle.  Puppet will not automatically distribute this file.</p>

<p>To determine where to put the CRL file, run <code>puppet agent --configprint hostcrl</code>.</p>

<h2 id="option-1-single-ca">Option 1: Single CA</h2>

<p>A single CA is the default configuration of Puppet when the internal CA is
being used.  A single, externally issued CA may also be used in a similar
manner.</p>

<pre><code>               +------------------------+
               |                        |
               |  Root self-signed CA   |
               |                        |
               +------+----------+------+
                      |          |
           +----------+          +------------+
           |                                  |
           v                                  v
  +-----------------+                +----------------+
  |                 |                |                |
  | Master SSL Cert |                | Agent SSL Cert |
  |                 |                |                |
  +-----------------+                +----------------+
</code></pre>

<h3 id="puppet-master">Puppet Master</h3>

<p>Configure the puppet master in four steps:</p>

<ol>
  <li>Disable the internal CA service</li>
  <li>Ensure that the certname will never change</li>
  <li>Put certificates/keys in place on disk</li>
  <li>Configure the web server</li>
</ol>

<p>On the master, in <a href="./../../../guides/configuring.html#puppetconf"><code>puppet.conf</code></a>, make sure the following settings are configured:</p>

<pre><code>[master]
ca = false
certname = &lt;some static string, e.g. 'puppetmaster'&gt;
</code></pre>

<ul>
  <li>The internal CA service must be disabled using <code>ca = false</code>.</li>
  <li>The certname must be set to a static value. This can still be the machine&#8217;s FQDN, but you must not leave the setting blank. (A static certname will keep Puppet from getting confused if the machine&#8217;s hostname ever changes.)</li>
</ul>

<p>Once this configuration is set, put the external credentials into the correct filesystem locations.  You can run the following commands to find the appropriate locations:</p>

<table>
  <thead>
    <tr>
      <th>Credential</th>
      <th>File location</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Master SSL certificate</td>
      <td><code>puppet master --configprint hostcert</code></td>
    </tr>
    <tr>
      <td>Master SSL certificate private key</td>
      <td><code>puppet master --configprint hostprivkey</code></td>
    </tr>
    <tr>
      <td>Root CA certificate</td>
      <td><code>puppet master --configprint localcacert</code></td>
    </tr>
  </tbody>
</table>

<p>With these files in place, the web server should be configured to:</p>

<ul>
  <li>Use the root CA certificate, the master&#8217;s certificate, and the master&#8217;s key</li>
  <li>Set the verification header (as specified in the master&#8217;s <a href="./../../../references/latest/configuration.html#sslclientverifyheader"><code>ssl_client_verify_header</code> setting</a>)</li>
  <li>Set the client DN header (as specified in the master&#8217;s <a href="./../../../references/latest/configuration.html#sslclientheader"><code>ssl_client_header</code> setting</a>)</li>
</ul>

<p>An example of this configuration for Apache:</p>

<pre><code>Listen 8140
&lt;VirtualHost *:8140&gt;
    SSLEngine on
    SSLProtocol ALL -SSLv2
    SSLCipherSuite ALL:!ADH:RC4+RSA:+HIGH:+MEDIUM:-LOW:-SSLv2:-EXP

    # Replace with the value of `puppet master --configprint hostcert`
    SSLCertificateFile "/path/to/master.pem"
    # Replace with the value of `puppet master --configprint hostprivkey`
    SSLCertificateKeyFile "/path/to/master.key"

    # Replace with the value of `puppet master --configprint localcacert`
    SSLCACertificateFile "/path/to/ca.pem"

    SSLVerifyClient optional
    SSLVerifyDepth 1
    SSLOptions +StdEnvVars
    RequestHeader set X-SSL-Subject %{SSL_CLIENT_S_DN}e
    RequestHeader set X-Client-DN %{SSL_CLIENT_S_DN}e
    RequestHeader set X-Client-Verify %{SSL_CLIENT_VERIFY}e

    DocumentRoot "/etc/puppet/public"

    PassengerRoot /usr/share/gems/gems/passenger-3.0.17
    PassengerRuby /usr/bin/ruby

    RackAutoDetect On
    RackBaseURI /
&lt;/VirtualHost&gt;
</code></pre>

<p>The <code>config.ru</code> file for rack has no special configuration when using an
external CA.  Please follow the standard rack documentation for using Puppet
with rack.  The following example will work with Puppet 3.2.</p>

<div class="highlight"><pre><code class="ruby">    <span class="vg">$0</span> <span class="o">=</span> <span class="s2">"master"</span>
    <span class="no">ARGV</span> <span class="o">&lt;&lt;</span> <span class="s2">"--rack"</span>
    <span class="no">ARGV</span> <span class="o">&lt;&lt;</span> <span class="s2">"--confdir=/etc/puppet"</span>
    <span class="no">ARGV</span> <span class="o">&lt;&lt;</span> <span class="s2">"--vardir=/var/lib/puppet"</span>
    <span class="nb">require</span> <span class="s1">'puppet/util/command_line'</span>
    <span class="n">run</span> <span class="no">Puppet</span><span class="o">::</span><span class="no">Util</span><span class="o">::</span><span class="no">CommandLine</span><span class="o">.</span><span class="n">new</span><span class="o">.</span><span class="n">execute</span>
</code></pre>
</div>

<h3 id="puppet-agent">Puppet Agent</h3>

<p>You don&#8217;t need to change any settings.</p>

<p>Put the external credentials into the correct filesystem locations.  You can run the following commands to find the appropriate locations:</p>

<table>
  <thead>
    <tr>
      <th>Credential</th>
      <th>File location</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Agent SSL certificate</td>
      <td><code>puppet agent --configprint hostcert</code></td>
    </tr>
    <tr>
      <td>Agent SSL certificate private key</td>
      <td><code>puppet agent --configprint hostprivkey</code></td>
    </tr>
    <tr>
      <td>Root CA certificate</td>
      <td><code>puppet agent --configprint localcacert</code></td>
    </tr>
  </tbody>
</table>

<h2 id="option-2-single-intermediate-ca">Option 2: Single Intermediate CA</h2>

<p>The single intermediate CA configuration builds from the single self-signed CA
configuration and introduces one additional intermediate CA.</p>

<pre><code>               +------------------------+
               |                        |
               |  self-signed Root CA   |
               |                        |
               +-----------+------------+
                           |
                           |
                           v
               +------------------------+
               |                        |
               |    Intermediate CA     |
               |                        |
               +------+----------+------+
                      |          |
           +----------+          +------------+
           |                                  |
           v                                  v
  +-----------------+                +----------------+
  |                 |                |                |
  | Master SSL Cert |                | Agent SSL Cert |
  |                 |                |                |
  +-----------------+                +----------------+
</code></pre>

<p>The Root CA does not issue SSL certificates in this configuration.  The
intermediate CA issues SSL certificates for clients and servers alike.</p>

<h3 id="puppet-master-1">Puppet Master</h3>

<p>Configure the puppet master in four steps:</p>

<ol>
  <li>Disable the internal CA service</li>
  <li>Ensure that the certname will never change</li>
  <li>Put certificates/keys in place on disk</li>
  <li>Configure the web server</li>
</ol>

<p>On the master, in <a href="./../../../guides/configuring.html#puppetconf"><code>puppet.conf</code></a>, make sure the following settings are configured:</p>

<pre><code>[master]
ca = false
certname = &lt;some static string, e.g. 'puppetmaster'&gt;
</code></pre>

<ul>
  <li>The internal CA service must be disabled using <code>ca = false</code>.</li>
  <li>The certname must be set to a static value. This can still be the machine&#8217;s FQDN, but you must not leave the setting blank. (A static certname will keep Puppet from getting confused if the machine&#8217;s hostname ever changes.)</li>
</ul>

<p>Once this configuration is set, put the external credentials into the correct filesystem locations.  You can run the following commands to find the appropriate locations:</p>

<table>
  <thead>
    <tr>
      <th>Credential</th>
      <th>File location</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Master SSL certificate</td>
      <td><code>puppet master --configprint hostcert</code></td>
    </tr>
    <tr>
      <td>Master SSL certificate private key</td>
      <td><code>puppet master --configprint hostprivkey</code></td>
    </tr>
    <tr>
      <td>Root CA certificate</td>
      <td><code>puppet master --configprint localcacert</code></td>
    </tr>
  </tbody>
</table>

<p>You must also create a <strong>CA bundle</strong> for the web server. Append <strong>the two CA certificates</strong> together; the Root CA certificate must be located after the intermediate CA certificate within the file.</p>

<pre><code>$ cat intermediate_ca.pem root_ca.pem &gt; ca_bundle.pem
</code></pre>

<p>Put this file somewhere predictable. Puppet doesn&#8217;t use it directly, but it can live alongside Puppet&#8217;s copies of the certificates.</p>

<p>With these files in place, the web server should be configured to:</p>

<ul>
  <li>Use the intermediate+Root CA bundle, the master&#8217;s certificate, and the master&#8217;s key</li>
  <li>Set the verification header (as specified in the master&#8217;s <a href="./../../../references/latest/configuration.html#sslclientverifyheader"><code>ssl_client_verify_header</code> setting</a>)</li>
  <li>Set the client DN header (as specified in the master&#8217;s <a href="./../../../references/latest/configuration.html#sslclientheader"><code>ssl_client_header</code> setting</a>)</li>
</ul>

<p>An example of this configuration for Apache:</p>

<pre><code>Listen 8140
&lt;VirtualHost *:8140&gt;
    SSLEngine on
    SSLProtocol ALL -SSLv2
    SSLCipherSuite ALL:!ADH:RC4+RSA:+HIGH:+MEDIUM:-LOW:-SSLv2:-EXP

    # Replace with the value of `puppet master --configprint hostcert`
    SSLCertificateFile "/path/to/master.pem"
    # Replace with the value of `puppet master --configprint hostprivkey`
    SSLCertificateKeyFile "/path/to/master.key"

    # Replace with the value of `puppet master --configprint localcacert`
    SSLCACertificateFile "/path/to/ca_bundle.pem"
    SSLCertificateChainFile "/path/to/ca_bundle.pem"

    # Allow only clients with a SSL certificate issued by the intermediate CA with
    # common name "Puppet CA"  Replace "Puppet CA" with the CN of your
    # intermediate CA certificate.
    SSLRequire %{SSL_CLIENT_I_DN_CN} eq "Puppet CA"

    SSLVerifyClient optional
    SSLVerifyDepth 2
    SSLOptions +StdEnvVars
    RequestHeader set X-SSL-Subject %{SSL_CLIENT_S_DN}e
    RequestHeader set X-Client-DN %{SSL_CLIENT_S_DN}e
    RequestHeader set X-Client-Verify %{SSL_CLIENT_VERIFY}e

    DocumentRoot "/etc/puppet/public"

    PassengerRoot /usr/share/gems/gems/passenger-3.0.17
    PassengerRuby /usr/bin/ruby

    RackAutoDetect On
    RackBaseURI /
&lt;/VirtualHost&gt;
</code></pre>

<p>The <code>config.ru</code> file for rack has no special configuration when using an
external CA.  Please follow the standard rack documentation for using Puppet
with rack.  The following example will work with Puppet 3.2.</p>

<div class="highlight"><pre><code class="ruby">    <span class="vg">$0</span> <span class="o">=</span> <span class="s2">"master"</span>
    <span class="no">ARGV</span> <span class="o">&lt;&lt;</span> <span class="s2">"--rack"</span>
    <span class="no">ARGV</span> <span class="o">&lt;&lt;</span> <span class="s2">"--confdir=/etc/puppet"</span>
    <span class="no">ARGV</span> <span class="o">&lt;&lt;</span> <span class="s2">"--vardir=/var/lib/puppet"</span>
    <span class="nb">require</span> <span class="s1">'puppet/util/command_line'</span>
    <span class="n">run</span> <span class="no">Puppet</span><span class="o">::</span><span class="no">Util</span><span class="o">::</span><span class="no">CommandLine</span><span class="o">.</span><span class="n">new</span><span class="o">.</span><span class="n">execute</span>
</code></pre>
</div>

<h3 id="puppet-agent-1">Puppet Agent</h3>

<p>With an intermediate CA, puppet agent needs a modified value for <a href="./../../../references/latest/configuration.html#sslclientcaauth">the <code>ssl_client_ca_auth</code> setting</a> in its puppet.conf:</p>

<pre><code>[agent]
ssl_client_ca_auth = $certdir/issuer.pem
</code></pre>

<p>The value should point to somewhere in the <code>$certdir</code>.</p>

<p>Put the external credentials into the correct filesystem locations.  You can run the following commands to find the appropriate locations:</p>

<table>
  <thead>
    <tr>
      <th>Credential</th>
      <th>File location</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Agent SSL certificate</td>
      <td><code>puppet agent --configprint hostcert</code></td>
    </tr>
    <tr>
      <td>Agent SSL certificate private key</td>
      <td><code>puppet agent --configprint hostprivkey</code></td>
    </tr>
    <tr>
      <td>Root CA certificate</td>
      <td><code>puppet agent --configprint localcacert</code></td>
    </tr>
    <tr>
      <td>Intermediate CA certificate</td>
      <td><code>puppet agent --configprint ssl_client_ca_auth</code></td>
    </tr>
  </tbody>
</table>

<h2 id="option-3-two-intermediate-cas-issued-by-one-root-ca">Option 3: Two Intermediate CAs Issued by One Root CA</h2>

<p>This configuration uses different CAs to issue puppet master certificates and puppet agent
certificates.  This makes them easily distinguishable, and prevents any agent certificate from being
usable for a puppet master.</p>

<pre><code>               +------------------------+
               |                        |
               |  Root self-signed CA   |
               |                        |
               +------+----------+------+
                      |          |
           +----------+          +------------+
           |                                  |
           v                                  v
  +-----------------+                +----------------+
  |                 |                |                |
  |    Master CA    |                |    Agent CA    |
  |                 |                |                |
  +--------+--------+                +--------+-------+
           |                                  |
           |                                  |
           v                                  v
  +-----------------+                +----------------+
  |                 |                |                |
  | Master SSL Cert |                | Agent SSL Cert |
  |                 |                |                |
  +-----------------+                +----------------+
</code></pre>

<p>In this configuration puppet agents are configured to only authenticate peer
certificates issued by the Master CA.  Puppet masters are configured to only
authenticate peer certificates issued by the Agent CA.</p>

<blockquote>
  <p><strong>Note:</strong> If you&#8217;re using this configuration, you can&#8217;t use the ActiveRecord inventory service backend with multiple puppet master servers. Use <a href="./../../../puppetdb/latest/index.html">PuppetDB</a> for the inventory service instead.</p>
</blockquote>

<h3 id="puppet-master-2">Puppet Master</h3>

<p>Configure the puppet master in four steps:</p>

<ol>
  <li>Disable the internal CA service</li>
  <li>Ensure that the certname will never change</li>
  <li>Put certificates/keys in place on disk</li>
  <li>Configure the web server</li>
</ol>

<p>On the master, in <a href="./../../../guides/configuring.html#puppetconf"><code>puppet.conf</code></a>, make sure the following settings are configured:</p>

<pre><code>[master]
ca = false
certname = &lt;some static string, e.g. 'puppetmaster'&gt;
</code></pre>

<ul>
  <li>The internal CA service must be disabled using <code>ca = false</code>.</li>
  <li>The certname must be set to a static value. This can still be the machine&#8217;s FQDN, but you must not leave the setting blank. (A static certname will keep Puppet from getting confused if the machine&#8217;s hostname ever changes.)</li>
</ul>

<p>Once this configuration is set, put the external credentials into the correct filesystem locations.  You can run the following commands to find the appropriate locations:</p>

<table>
  <thead>
    <tr>
      <th>Credential</th>
      <th>File location</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Master SSL certificate</td>
      <td><code>puppet master --configprint hostcert</code></td>
    </tr>
    <tr>
      <td>Master SSL certificate private key</td>
      <td><code>puppet master --configprint hostprivkey</code></td>
    </tr>
    <tr>
      <td>Root CA certificate</td>
      <td><code>puppet master --configprint localcacert</code></td>
    </tr>
  </tbody>
</table>

<p>You must also create a <strong>CA bundle</strong> for the web server. Append the <strong>Agent CA certificate and Root CA certificate</strong> together; the Root CA certificate must be located after the Agent CA certificate within the file.</p>

<pre><code>$ cat agent_ca.pem root_ca.pem &gt; ca_bundle_for_master.pem
</code></pre>

<p>Put this file somewhere predictable. Puppet doesn&#8217;t use it directly, but it can live alongside Puppet&#8217;s copies of the certificates.</p>

<p>With these files in place, the web server should be configured to:</p>

<ul>
  <li>Use the Agent+Root CA bundle, the master&#8217;s certificate, and the master&#8217;s key</li>
  <li>Set the verification header (as specified in the master&#8217;s <a href="./../../../references/latest/configuration.html#sslclientverifyheader"><code>ssl_client_verify_header</code> setting</a>)</li>
  <li>Set the client DN header (as specified in the master&#8217;s <a href="./../../../references/latest/configuration.html#sslclientheader"><code>ssl_client_header</code> setting</a>)</li>
</ul>

<p>An example of this configuration for Apache:</p>

<pre><code>Listen 8140
&lt;VirtualHost *:8140&gt;
    SSLEngine on
    SSLProtocol ALL -SSLv2
    SSLCipherSuite ALL:!ADH:RC4+RSA:+HIGH:+MEDIUM:-LOW:-SSLv2:-EXP

    # Replace with the value of `puppet master --configprint hostcert`
    SSLCertificateFile "/path/to/master.pem"
    # Replace with the value of `puppet master --configprint hostprivkey`
    SSLCertificateKeyFile "/path/to/master.key"

    # Replace with the value of `puppet master --configprint localcacert`
    SSLCACertificateFile "/path/to/ca_bundle_for_master.pem"
    SSLCertificateChainFile "/path/to/ca_bundle_for_master.pem"

    # Allow only clients with a SSL certificate issued by the intermediate CA with
    # common name "Puppet Agent CA"  Replace "Puppet Agent CA" with the CN of your
    # Agent CA certificate.
    SSLRequire %{SSL_CLIENT_I_DN_CN} eq "Puppet Agent CA"

    SSLVerifyClient optional
    SSLVerifyDepth 2
    SSLOptions +StdEnvVars
    RequestHeader set X-SSL-Subject %{SSL_CLIENT_S_DN}e
    RequestHeader set X-Client-DN %{SSL_CLIENT_S_DN}e
    RequestHeader set X-Client-Verify %{SSL_CLIENT_VERIFY}e

    DocumentRoot "/etc/puppet/public"

    PassengerRoot /usr/share/gems/gems/passenger-3.0.17
    PassengerRuby /usr/bin/ruby

    RackAutoDetect On
    RackBaseURI /
&lt;/VirtualHost&gt;
</code></pre>

<p>The <code>config.ru</code> file for rack has no special configuration when using an
external CA.  Please follow the standard rack documentation for using Puppet
with rack.  The following example will work with Puppet 3.2.</p>

<div class="highlight"><pre><code class="ruby">    <span class="vg">$0</span> <span class="o">=</span> <span class="s2">"master"</span>
    <span class="no">ARGV</span> <span class="o">&lt;&lt;</span> <span class="s2">"--rack"</span>
    <span class="no">ARGV</span> <span class="o">&lt;&lt;</span> <span class="s2">"--confdir=/etc/puppet"</span>
    <span class="no">ARGV</span> <span class="o">&lt;&lt;</span> <span class="s2">"--vardir=/var/lib/puppet"</span>
    <span class="nb">require</span> <span class="s1">'puppet/util/command_line'</span>
    <span class="n">run</span> <span class="no">Puppet</span><span class="o">::</span><span class="no">Util</span><span class="o">::</span><span class="no">CommandLine</span><span class="o">.</span><span class="n">new</span><span class="o">.</span><span class="n">execute</span>
</code></pre>
</div>

<h3 id="puppet-agent-2">Puppet Agent</h3>

<p>With split CAs, puppet agent needs a modified value for <a href="./../../../references/latest/configuration.html#sslclientcaauth">the <code>ssl_client_ca_auth</code> setting</a> in its puppet.conf:</p>

<pre><code>[agent]
ssl_client_ca_auth = $certdir/ca_master.pem
</code></pre>

<p>The value should point to somewhere in the <code>$certdir</code>.</p>

<p>Put the external credentials into the correct filesystem locations.  You can run the following commands to find the appropriate locations:</p>

<table>
  <thead>
    <tr>
      <th>Credential</th>
      <th>File location</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>Agent SSL certificate</td>
      <td><code>puppet agent --configprint hostcert</code></td>
    </tr>
    <tr>
      <td>Agent SSL certificate private key</td>
      <td><code>puppet agent --configprint hostprivkey</code></td>
    </tr>
    <tr>
      <td>Root CA certificate</td>
      <td><code>puppet agent --configprint localcacert</code></td>
    </tr>
    <tr>
      <td>Master CA certificate</td>
      <td><code>puppet agent --configprint ssl_client_ca_auth</code></td>
    </tr>
  </tbody>
</table>


              <blockquote><p style="font-size: 1.3em; text-align: center;"><a href="#content">&#8593; Back to top</a></p></blockquote>
            </div>
            <nav class="main">
                  <div id="subCol">



<h3 id="puppet-3-reference-manual">Puppet 3 Reference Manual</h3>

<p><a href="./index.html">Main Index</a></p>


<ul>
  <li><strong>Puppet 3 Overview</strong>
    <ul>
      <li><a href="./index.html">Introduction</a></li>
      <li><a href="./whats_new.html">What's New in Puppet 3</a></li>
      <li><a href="./release_notes.html">Puppet 3.x.x Release Notes</a></li>
      <li><a href="./system_requirements.html">System Requirements</a></li>
    </ul>
  </li>
  <li><strong>The Puppet Language</strong>
    <ul>
      <li><a href="./lang_visual_index.html">Visual Index</a></li>
      <li><a href="./lang_summary.html">Summary</a></li>
      <li><a href="./lang_reserved.html">Reserved Words and Allowed Names</a></li>
      <li><a href="./lang_resources.html">Resources</a></li>
      <li><a href="./lang_relationships.html">Relationships and Ordering</a></li>
      <li><a href="./lang_defaults.html">Resource Defaults</a></li>
      <li><a href="./lang_variables.html">Variables</a></li>
      <li><a href="./lang_scope.html">Scope</a></li>
      <li><a href="./lang_conditional.html">Conditional Statements</a></li>
      <li><a href="./lang_expressions.html">Expressions</a></li>
      <li><a href="./lang_functions.html">Functions</a></li>
      <li><a href="./lang_classes.html">Classes</a></li>
      <li><a href="./lang_defined_types.html">Defined Types</a></li>
      <li><a href="./lang_containment.html">Containment</a></li>
      <li><a href="./lang_namespaces.html">Namespaces and Autoloading</a></li>
      <li><a href="./lang_collectors.html">Resource Collectors</a></li>
      <li><a href="./lang_node_definitions.html">Node definitions</a></li>
      <li><a href="./lang_datatypes.html">Data Types</a></li>
      <li><a href="./lang_comments.html">Comments</a></li>
      <li><a href="./lang_virtual.html">Virtual Resources</a></li>
      <li><a href="./lang_exported.html">Exported Resources</a></li>
      <li><a href="./lang_tags.html">Tags</a></li>
      <li><a href="./lang_run_stages.html">Run Stages</a></li>
      <li><a href="./lang_import.html">Importing Manifest Files</a></li>
      <li><a href="./lang_experimental_3_2.html">Experimental Features: Puppet 3.2</a></li>
    </ul>
  </li>


  <li><strong>Modules</strong>
    <ul>
      <li><a href="./modules_fundamentals.html">Fundamentals</a></li>
      <li><a href="./../../../guides/plugins_in_modules.html">Plugins in Modules</a></li>
      <li><a href="./modules_installing.html">Installing Modules</a></li>
      <li><a href="./modules_publishing.html">Publishing Modules on the Puppet Forge</a></li>
      <li><a href="./modules_documentation.html">Module Documentation</a></li>
    </ul>
  </li>

  <li><strong>Configuration</strong>
    <ul>
      <li><span class="currentpage">SSL: Using an External CA</span></li>
    </ul>
  </li>

  <li><strong>Data Formats</strong>
    <ul>
      <li><a href="./format_report.html">Report Format</a></li>
    </ul>
  </li>

  <li><strong>Puppet Subsystems</strong>
    <ul>
      <li><a href="./subsystem_agent_master_comm.html">Agent/Master HTTPS Communications</a></li>
    </ul>
  </li>
  <li><strong>Generated References</strong>
    <ul>
      <li><a href="./../../../references/3.2.latest/type.html">Resource Types</a></li>
      <li><a href="./../../../references/3.2.latest/configuration.html">Configuration Settings</a></li>
      <li><a href="./../../../references/3.2.latest/function.html">Functions</a></li>
      <li><a href="./../../../references/3.2.latest/metaparameter.html">Metaparameters</a></li>
      <li><a href="./../../../references/3.2.latest/report.html">Report Handlers</a></li>
      <li><a href="./../../../references/3.2.latest/indirection.html">Indirections and Termini</a></li>
      <li><a href="./../../../references/3.2.latest/developer/index.html">Developer Documentation</a></li>
    </ul>
  </li>
  <li><strong>More Sections Coming Later</strong>
    <ul>
      <li><strong>Standard Puppet Operation</strong></li>
      <li><strong>Command Line Interface</strong></li>
      <li><strong>The Puppet Services</strong></li>
      <li><strong>Node Classification</strong></li>
      <li><strong>File Serving</strong></li>
      <li><strong>Resource Types and Providers</strong></li>
      <li><strong>SSL and Certificates</strong></li>
      <li><strong>Puppet Data Library</strong></li>
      <li><strong>Environments</strong></li>
      <li><strong>Configuring Puppet</strong></li>
      <li><strong>Internals</strong></li>
    </ul>
  </li>
</ul>



                      <div style="margin-top: 1.5em; padding-bottom: 10px;">
                          <p style="font-family: 'Lucida Grande',Lucida,Verdana,sans-serif;font-size: 16px; font-weight: bold; line-height: 22px; margin-bottom: 10px;">Download the Docs</p>
                          <a href="http://info.puppetlabs.com/download-pdfs.html"><img src="./../../../images/smallbits_small_docs.png" alt="Puppet docs download" /></a>
                      </div>
                      <div style="margin-top: 0; padding-bottom: 10px;">
                          <p style="font-family: 'Lucida Grande',Lucida,Verdana,sans-serif;font-size: 16px; font-weight: bold; line-height: 22px; margin-bottom: 10px;">Download Puppet Enterprise</p>
                          <a href="http://info.puppetlabs.com/download-pe.html"><img src="./../../../images/puppet_cert_home.jpg" alt="Puppet Enterprise promo" /></a>
                      </div>
                  </div>
            </nav>
          </div>
        </div>
      </section>

		<footer id="footer">
      <div class="site-width">

        <div class="primary-secondary-content">
          <div class="primary-content">
            <section id="newsletter">
                 <h4>Puppet Labs is Hiring</h4>
                 <p><a href="http://www.puppetlabs.com/company/jobs/">Engineers, developers &amp; consultants</a>
                  </p><p>
		</p><h4>Newsletter</h4>

              <p>Stay up to date on all things puppet</p>

				<form class="lpeRegForm formNotEmpty" method="post" enctype="application/x-www-form-urlencoded" action="http://info.puppetlabs.com/index.php/leadCapture/save" id="mktForm_1013" name="mktForm_1013">

				<label>Email Address:</label><span class="mktInput"><input class="mktFormText mktFormEmail" name="Email" id="Email" type="text" value="" maxlength="255" /><span class="mktFormMsg"></span></span>

				<input id="mktFrmSubmit" type="submit" class="btn" style="width: auto; overflow: visible; padding-left: .25em; padding-right: .25em;" value="Subscribe" name="submitButton" onclick="formSubmit(document.getElementById(&quot;mktForm_1013&quot;)); return false;" />

				<input style="display: none;" id="mktFrmReset" type="reset" value="Clear" name="resetButton" onclick="formReset(document.getElementById(&quot;mktForm_1013&quot;)); return false;" />

				<span style="display:none;"><input type="text" name="_marketo_comments" value="" /></span>
				<input type="hidden" name="lpId" value="-1" />
				<input type="hidden" name="subId" value="100" />

				<input type="hidden" name="kw" value="" />
				<input type="hidden" name="cr" value="" />

				<input type="hidden" name="searchstr" value="" />
				<input type="hidden" name="lpurl" value="http://info.puppetlabs.com/testsubscription.html?cr={creative}&amp;kw={keyword}" />
				<input type="hidden" name="formid" value="1013" />
				<input type="hidden" name="returnURL" value="http://www.puppetlabs.com/misc/subscription-thank-you/" />
				<input type="hidden" name="retURL" value="http://www.puppetlabs.com/misc/subscription-thank-you/" />
				<input type="hidden" name="_mkt_disp" value="return" />
				<input type="hidden" name="_mkt_trk" value="" />

				</form>
				<script type="text/javascript" src="http://info.puppetlabs.com/js/mktFormSupport.js"></script>

				<script type="text/javascript"><![CDATA[
				function formSubmit(elt) {
				return Mkto.formSubmit(elt);
				}
				function formReset(elt) {
				return Mkto.formReset(elt);
				}
				]]></script>

<a href="http://info.puppetlabs.com/puppet-enterprise" class="fbtn">Try Puppet Enterprise FREE</a>

            </section>
            <section id="elsewhere">
              <h4>Get Involved</h4>
              <ul>

                <li class="chat"><a href="http://webchat.freenode.net/?channels=puppet" rel="external"><span class="indicator"></span><span>Chat with us on IRC</span></a></li>
		<li class="discussion"><a href="http://groups.google.com/group/puppet-dev" rel="external"><span class="indicator"></span><span>Join the Puppet Developer List</span></a></li>
                <li class="discussion"><a href="http://groups.google.com/group/puppet-users?pli=1" rel="external"><span class="indicator"></span><span>Join the Puppet User List</span></a></li>

                <li class="linkedin"><a href="http://www.linkedin.com/groups?about=&amp;gid=696467&amp;trk=anet_ug_grppro" rel="external"><span class="indicator"></span><span>Join the Puppet Users LinkedIn group</span></a></li>

              </ul>
		<p>
		              		</p><h4>Follow us&#8230;</h4>

              		<ul class="followus">


			<li><a href="http://feeds.feedburner.com/PuppetLabs" target="_blank"><img src="http://www.puppetlabs.com/wp-content/plugins/my-profiles/images/rss.png" border="0" /></a></li>
			<li><a href="http://www.facebook.com/pages/Puppet-Labs/219089920711" target="_blank"><img src="http://www.puppetlabs.com//wp-content/plugins/my-profiles/images/facebook.png" border="0" /></a></li>
			<li><a href="http://www.twitter.com/puppetlabs" target="_blank"><img src="http://www.puppetlabs.com//wp-content/plugins/my-profiles/images/twitter.png" border="0" /></a></li>
			<li><a href="http://www.linkedin.com/groups?about=&amp;gid=696467&amp;trk=anet_ug_grppro" target="_blank"><img src="http://www.puppetlabs.com//wp-content/uploads/2011/01/LinkedIn_IN_Icon_32px.png" border="0" /></a></li>    <li><a href="https://github.com/puppetlabs" target="_blank"><img src="http://www.puppetlabs.com//wp-content/uploads/2011/01/github_icon.png" border="0" /></a></li>
			<li><a href="https://plus.google.com/112682055028218091774?rel=author" target="_blank"><img src="https://puppetlabs.com/wp-content/uploads/2013/05/google_plus32x32.png" alt="Find Us on Google+" border="0" /></a></li>
					</ul>

              	

            </section>
          </div>
          <div class="secondary-content">
            <section id="book-it">
              <h4>Get the book!</h4>

              <p>James Turnbull and Jeff McCune's book <a href="http://www.apress.com/9781430230571" rel="nofollow">Pro Puppet</a> is a comprehensive and up-to-date look at Puppet and MCollective. </p>
              <a href="http://www.apress.com/9781430230571" rel="nofollow"><img src="http://www.puppetlabs.com/wp-content/uploads/2011/05/propuppetthumb.png" /></a>
            </section>
          </div>
        </div>
      </div>
		</footer>

    <div id="copyright">
      <div class="site-width">
        &#169; 2011 <a href="http://www.puppetlabs.com/" title="Puppet Labs">Puppet Labs</a>
        <span class="vcard">
         <span class="org"></span>
         <a class="email" href="mailto:info@puppetlabs.com">info@puppetlabs.com</a>

          <span class="adr">
           <span class="street-address">926 NW 13th Avenue #210</span>
           /
           <span class="locality">Portland</span>,
           <span class="region">OR</span>
           <span class="postal-code">97209</span>

          </span>

         <span class="tel">1-877-575-9775</span>
        </span>
      </div>
    </div>

  	<script type="text/javascript"><![CDATA[Cufon.now();]]></script>
  	<style type="text/css"><![CDATA[h1, h2, .btn { visibility : visible; }]]></style>


	</body>
</html>
