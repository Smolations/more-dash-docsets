<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" dir="ltr" lang="en-US" xml:lang="en-US">
  <head>
  	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  	<title>PE Deployment Guide &#8212; Documentation &#8212; Puppet Labs</title>
  	<link rel="alternate" type="application/atom+xml" title="Puppet Labs Documentation Updates" href="https://github.com/puppetlabs/puppet-docs/commits/master.atom" />
    <link rel="alternate" type="application/atom+xml" title="Puppet Labs Blog Feed" href="http://puppetlabs.com/feed/atom/" />
    <link rel="index" title="Puppet Labs Documentation" href="http://docs.puppetlabs.com" />
    <link rel="icon" href="./../../favicon.ico" />


  <meta name="description" content="IntroductionYou&#8217;ve just downloaded a shiny new tarball containing Puppet Enterprise (PE) and are wondering to yourself, &#8220;now what?&#822;..." />



    <!-- FIXME: absolute paths -->

    <script type="text/javascript" src="./../../files/javascripts/html5.js"></script>
    <script type="text/javascript" src="./../../files/javascripts/jquery-1.3.2.min.js"></script>
    <script type="text/javascript" src="./../../files/javascripts/drop_down.js"></script>
    <script type="text/javascript" src="./../../files/javascripts/cufon-yui.js"></script>
    <script type="text/javascript" src="./../../files/fonts/Klavika_400-Klavika_600.font.js"></script>
    <script type="text/javascript" src="./../../files/javascripts/ampersands.js"></script>
    <script type="text/javascript" src="./../../files/javascripts/navigation-accordion.js"></script>

    <script type="text/javascript" src="http://puppetlabs.com/wp-content/themes/puppetlabs/javascripts/leadcapture.js"></script>

    <!-- All in One SEO Pack 1.6.10.1 by Michael Torbert of Semper Fi Web Design[127,146] -->
    <meta name="keywords" content="Puppet, puppet labs, reductive labs, open source, system administrator, ruby, data center, automation, support" />
    <!-- /all in one seo pack -->

    <!-- Give us the option of setting a canonical URL in yaml frontmatter -NF -->
    <link rel="canonical" href="http://docs.puppetlabs.com/guides/deployment_guide/index.html" />

    <!-- FIXME: absolute paths -->

    <link rel="stylesheet" type="text/css" href="./../../files/stylesheets/style.css" media="screen" />
    <link rel="stylesheet" type="text/css" href="./../../files/stylesheets/syntax.css" media="screen" /> <!-- index -->
    <link rel="stylesheet" type="text/css" href="./../../files/stylesheets/adbanner.css" media="screen" />

    <!--[if IE 7]>
	  <link rel="stylesheet" type="text/css" href="/files/stylesheets/ie_7.css" media="screen"> <!-- index -->
    

    <!--[if IE 8]>
	    <link rel="stylesheet" type="text/css" href="/files/stylesheets/ie_8.css" media="screen"> <!-- index -->
    

  	<script type="text/javascript"><![CDATA[
      Cufon.replace('h1, h2', { fontWeight: '600' });
  	]]></script>
</head>




  <body id="puppetlabsdocs" class="docs">
  <style type="text/css"><![CDATA[h1, h2{ visibility : hidden }]]></style>
  <!--[if IE 8]>
    <style type="text/css">h1, h2{ visibility : visible }</style>
  <![endif]-->

  	<header id="header">
      <div class="site-width">
    		<h1><a href="http://puppetlabs.com/"><span>Puppet Labs</span></a></h1>
        <a class="screen-reader-content" href="#content">Skip navigation</a>
        <nav>
    		<ul id="global-navigation">
          <li id="puppet-tab" class="with-submenu">
            <a href="http://puppetlabs.com/puppet/puppet-enterprise">
              <span>Products</span>
              <span class="drop-down-trigger"></span>
            </a>
            <ul>
			<li>
                <ul>
                   <a href="http://puppetlabs.com/puppet/what-is-puppet/">What is Puppet?</a>
                </ul>
              </li>
			       <li>
                <ul>
                   <a href="http://puppetlabs.com/puppet/puppet-enterprise/">Puppet Enterprise</a>
                </ul>
              </li>
            <li>
                <ul>
                   <a href="http://puppetlabs.com/puppet/whats-new/">What's New in 2.5</a>
                </ul>
              </li>
            <li>
                <ul>
                   <a href="http://puppetlabs.com/puppet/puppet-open-source/">Puppet Open Source</a>
                </ul>
              </li>
            <li>
                <ul>
                   <a href="http://puppetlabs.com/puppet/enterprise-vs-open-source/">Enterprise vs. Open Source</a>
                </ul>
              </li>
              <li>
                <ul>
                  <a href="http://forge.puppetlabs.com">Puppet Forge</a>
                </ul>
              </li>
              <li>
                <ul>
                  <a href="http://puppetlabs.com/puppet/requirements/">Components &amp; Requirements</a>
                </ul>
              </li>
              <li>
                <ul>
                  <a href="http://puppetlabs.com/puppet/faq/">FAQ</a>
                </ul>
              </li>
			  <li>
                <ul>
                  <a href="http://puppetlabs.com/puppet/how-to-buy/">How to Buy</a>
                </ul>
              </li>
            </ul>
          </li>
          <li id="solutions-tab" class="with-submenu">
            <a href="http://puppetlabs.com/solutions/">
              <span>Solutions</span>
              <span class="drop-down-trigger"></span>
            </a>
            <ul>
              <li class="page_item page-item-12296"><a href="http://puppetlabs.com/solutions/configuration-management/">Configuration Management</a></li>
<li class="page_item page-item-986"><a href="http://puppetlabs.com/solutions/virtualization-management/">Virtualization Management</a></li>
<li class="page_item page-item-993"><a href="http://puppetlabs.com/solutions/cloud-management/">Cloud Management</a></li>
<li class="page_item page-item-996"><a href="http://puppetlabs.com/solutions/it-compliance/">IT Compliance</a></li>
<li class="page_item page-item-9520"><a href="http://puppetlabs.com/solutions/devops/">DevOps</a></li>
<li class="page_item page-item-991"><a href="http://puppetlabs.com/solutions/manage-os-x-resources/">OS X Desktops</a></li>
            </ul>
          </li>
          <li id="services-tab" class="with-submenu">
            <a href="http://puppetlabs.com/services/">
              <span>Services</span>
              <span class="drop-down-trigger"></span>
            </a>
            <ul>
              <li class="page_item page-item-783"><a href="http://puppetlabs.com/services/overview/">Overview</a></li>
<li class="page_item page-item-1052"><a href="http://puppetlabs.com/services/customer-support/">Customer Support</a></li>
<li class="page_item page-item-11022"><a href="http://puppetlabs.com/services/support-plans/">Support Plans</a></li>
<li class="page_item page-item-845"><a href="http://puppetlabs.com/services/training-workshops/">On-Site Education</a></li>
<li class="page_item page-item-4899"><a href="http://puppetlabs.com/services/consulting/">Professional Services</a></li>
<li class="page_item page-item-849"><a href="http://puppetlabs.com/category/events/upcoming/">Events &amp; Workshops</a></li>
<li class="page_item page-item-851"><a href="http://puppetlabs.com/services/partners/">Partners</a></li>
            </ul>
          </li>
                    <li id="resources-tab" class="with-submenu">
            <a href="http://puppetlabs.com/resources/">
              <span>Resources</span>
              <span class="drop-down-trigger"></span>
            </a>
            <ul>
              <li class="page_item page-item-1048"><a href="http://puppetlabs.com/resources/overview-2/">Overview</a></li>
<li class="page_item page-item-1040"><a href="http://docs.puppetlabs.com">Documentation</a></li>
<li class="page_item page-item-872"><a href="http://info.puppetlabs.com/register-download">Downloads</a></li>
<li class="page_item page-item-1961"><a href="http://forge.puppetlabs.com">Puppet Forge</a></li>
<li class="page_item page-item-835"><a href="http://info.puppetlabs.com/download-whitepapers.html">White Papers</a></li>
<li class="page_item page-item-1967"><a href="http://projects.puppetlabs.com/projects/puppet/wiki">Wiki</a></li>
<li class="page_item page-item-7279"><a href="http://puppetlabs.com/resources/webinars/">Upcoming Webinars</a></li>
<li class="page_item page-item-10183"><a href="http://puppetlabs.com/resources/newsletter/">Newsletter</a></li>
<li class="page_item page-item-12263"><a href="http://puppetlabs.com/resources/tech-notes/">Tech Notes</a></li>
<li class="page_item page-item-10265"><a href="http://info.puppetlabs.com/pe2-webinar.html">Webinars</a></li>
            </ul>
          </li>

          <li id="customers-tab" class="with-submenu">
            <a href="http://puppetlabs.com/customers/companies/">
              <span>Customers</span>
              <span class="drop-down-trigger"></span>
            </a>
            <ul>
			<li>
                <ul>
                  <a href="http://puppetlabs.com/customers/companies/">Companies</a>
                </ul>
              </li>
			  <li>
                <ul>
                  <a href="http://puppetlabs.com/customers/case-studies/">Case Studies</a>
                </ul>
              </li>
			  <li>
                <ul>
                  <a href="http://puppetlabs.com/customers/product-testimonials/">Product Testimonials</a>
                </ul>
              </li>
			    <li>
                <ul>
                  <a href="http://puppetlabs.com/customers/what-customers-are-saying/">Service Testimonials</a>
                </ul>
              </li>
            </ul>
          </li>
          <li id="community-tab" class="with-submenu">
            <a href="http://puppetlabs.com/community/">
              <span>Community</span>
              <span class="drop-down-trigger"></span>
            </a>

 <ul>
			<li>
                <ul>
                  <a href="http://puppetlabs.com/community/overview/">Overview</a>
                </ul>
              </li>
			<li>
                <ul>
                  <a href="http://puppetlabs.com/blog">Blog</a>
                </ul>
              </li>
			  <li>
                <ul>
                  <a href="http://puppetlabs.com/community/puppet-camp/">Puppet Camp</a>
                </ul>
              </li>
			  <li>
                <ul>
                  <a href="http://puppetlabs.com/community/user-groups-and-devops-groups/">Puppet User Groups &amp; DevOps Groups</a>
                </ul>
              </li>
	          <li>
                <ul>
                  <a href="http://puppetlabs.com/community/presentations/">Presentations</a>
                </ul>
              </li>
			    <li>
                <ul>
                  <a href="http://puppetlabs.com/community/videos/">Videos</a>
                </ul>
              </li>
            </ul>

          </li><li id="company-tab" class="with-submenu">
            <a href="http://puppetlabs.com/company/">
              <span>Company</span>
              <span class="drop-down-trigger"></span>
            </a>
            <ul>
              <li class="page_item page-item-2316"><a href="http://puppetlabs.com/company/overview/">Overview</a></li>
<li class="page_item page-item-2179"><a href="http://puppetlabs.com/company/news/">News</a>
<ul class="children">
	<li class="page_item page-item-2338"><a href="http://puppetlabs.com/company/news/press-releases/">Press Releases</a></li>
	<li class="page_item page-item-2383"><a href="http://puppetlabs.com/company/news/media-kit/">Media Kit</a></li>
</ul>
</li>
<li class="page_item page-item-1571"><a href="http://puppetlabs.com/company/careers/">Careers</a></li>
<li class="page_item page-item-10372"><a href="http://puppetlabs.com/company/management/">Management</a></li>
<li class="page_item page-item-10311"><a href="http://puppetlabs.com/company/board-and-advisors/">Board and Advisors</a></li>
<li class="page_item page-item-10367"><a href="http://puppetlabs.com/company/investors/">Investors</a></li>
<li class="page_item page-item-2313"><a href="http://puppetlabs.com/company/contact-us/">Contact Us</a></li>
<li class="page_item page-item-10579"><a href="http://puppetlabs.com/company/awards/">Awards</a></li>
            </ul>
          </li>
    		</ul>
          <div id="misc-navigation">
			  <ul>
				<li><a href="http://puppetlabs.com/security/">Security</a></li>
				<li><a href="http://docs.puppetlabs.com">Documentation</a></li>
				<li><a href="http://puppetlabs.com/resources/customer-support/">Support</a></li>
			        <li><a href="http://projects.puppetlabs.com/">Bug Tracker</a></li>
				<li><a href="http://puppetlabs.com/company/contact/contact-us">Contact Us</a></li>
				<li><a href="http://info.puppetlabs.com/download-pe2.html" class="gateway">Download</a></li>
			  </ul>
			<form action="http://www.google.com/cse" id="cse-search-box">
			  <div>
				<input type="hidden" name="cx" value="017668764424496204839:ubligvgbenm" />
				<input type="hidden" name="ie" value="UTF-8" />
				<input type="text" name="q" class="gsc-input" size="31" />
				<input type="submit" name="sa" class="searchbtn" value="Search" />
			  </div>
			</form>
			<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&amp;lang=en"></script>
          </div>
      </nav>
    	</div>
    </header>

      <section id="masthead">
        <div class="site-width">
          <h1>Docs: <span class="section-name">PE Deployment Guide</span></h1>
          <ul id="doc-navigation">
            <li><a href="./../../index.html">Docs Home</a></li>
            <li class="with-submenu">
              <a href="#">
                <span>Quick Nav</span>
                <span class="drop-down-trigger"></span>
              </a>
               <!-- the following links can't be relative, unfortunately -->
               <!-- future: add some JS to disable this if running from file:// -->
                               <dl>
                  <dt>Puppet Documentation</dt>
                      <dd><a href="./../../puppet/3/reference/index.html">Puppet 3 Reference Manual</a></dd>
                      <dd><a href="./../../puppet/2.7/reference/index.html">Puppet 2.7 Reference Manual</a></dd>
                      <dd><a href="./../../pe/latest/index.html">Puppet Enterprise User's Guide</a></dd>
                      <dd><a href="./../../learning/index.html">Learning Puppet</a></dd>
                      <dd><a href="./../../references/latest/type.html">Resource Types</a></dd>
                      <dd><a href="./../../references/latest/function.html">Functions</a></dd>
                      <dd><a href="./../../references/latest/configuration.html">Configuration</a></dd>
                      <dd><a href="./../../references/latest/developer/index.html">Developer</a></dd>
                      <dd><a href="./../../references/glossary.html">Glossary of Puppet Terms</a></dd>
                      <dd><a href="./../../references/index.html">Older References</a></dd>
                  <dt>Facter</dt>
                      <dd><a href="./../../facter/latest/core_facts.html">Core Facts Reference</a></dd>
                  <dt>PuppetDB</dt>
                      <dd><a href="./../../puppetdb/1/index.html">PuppetDB 1 Manual</a></dd>
                  <dt>MCollective</dt>
                      <dd><a href="./../../mcollective/index.html">Index</a></dd>
                      <dd><a href="./../../mcollective/reference/index.html">References</a></dd>
                      <dd><a href="./../../mcollective/simplerpc/index.html">Writing Plugins</a></dd>
                      <dd><a href="./../../mcollective/releasenotes.html">Release Notes</a></dd>
                </dl>

            </li>
            <li><a href="./../../contribute.html">Contribute</a></li>
          </ul>
        </div>
        <br />
      </section>

      <section id="content">
        <div class="site-width">
          <div class="primary-secondary-content">
            <div class="primary-content">
              <h1>Introduction and Installation</h1>
              <nav class="in-page" id="page-nav">
<ol class="toc">
  <li class="toc-lv2"><a href="#introduction">Introduction</a></li>
  <li class="toc-lv2"><a href="#installing-pe">Installing PE</a>
<ol class="toc">
   <li class="toc-lv3"><a href="#before-starting-the-install">Before Starting the install</a></li>
   <li class="toc-lv3"><a href="#choosing-where-to-install-each-role">Choosing Where to Install Each Role</a></li>
   <li class="toc-lv3"><a href="#run-the-install-script">Run the Install Script</a></li>
</ol></li>
  <li class="toc-lv2"><a href="#managing-certificates">Managing Certificates</a>
<ol class="toc">
   <li class="toc-lv3"><a href="#auto-signing-pre-signing-and-request-management">Auto-signing, Pre-signing and Request Management</a></li>
</ol></li>
  <li class="toc-lv2"><a href="#whats-next">What&#8217;s Next?</a></li>
</ol></nav>
              <h2 id="introduction">Introduction</h2>

<p>You&#8217;ve just <a href="http://info.puppetlabs.com/download-pe.html">downloaded a shiny new tarball</a> containing Puppet Enterprise (PE) and are wondering to yourself, &#8220;now what?&#8221; This guide will help you answer that question. Based on the collective decades of experience of Puppet Labs&#8217; professional services engineers and support staff, this guide will help you discover the best practices for initially deploying Puppet Enterprise in your infrastructure. It will also help you avoid common errors and pitfalls, and will point to detailed instructions for completing typical and important tasks you&#8217;ll encounter during deployment.</p>

<p>Because there is so much variation in the infrastructures where PE is used, we will focus on some standard things most sysadmins typically manage. Hopefully, learning how to automate basic services such as NTP will provide you with the knowledge you need to understand how and why PE&#8217;s automation is so powerful.  Armed with this knowledge, you&#8217;ll be ready to take care of more specialized needs &#8211; such as automating the configuration of application servers &#8211; and you&#8217;ll be able to take your infrastructure to the next level of performance, reliability and visibility.</p>

<p>The guide will be released in chapters.</p>

<ul>
  <li>This first chapter covers initial architecture decisions you&#8217;ll need to make, and other best practices for installation and preparation.</li>
  <li>The next chapter will look at setting up your work environment with version control, best practices for hardening your installation, and managing users and security.</li>
  <li>The third chapter gets to the meat of the matter by demonstrating how and why automation can help you do your job better and faster. You&#8217;ll follow a fictional sysadmin while she sets up automation for some simple services, configurations, and other things that a typical admin might want to first start managing with PE. This chapter will cover using the console and the forge, will introduce you to writing manifests, and will recommend some modules to help you get automation up and running quickly. We&#8217;ll also discuss some methods for testing your work before going live.</li>
  <li>The fourth chapter will move on to more advanced automation tasks and will explore manifest writing and the puppet language in more detail.</li>
  <li>The fifth chapter will discuss some of the regular maintenance tasks  and troubleshooting tips you&#8217;ll want to know about to keep things humming along smoothly.</li>
  <li>The final chapter will discuss different resources for reporting so you can stay on top of performance metrics and discover issues early before they become problems.</li>
</ul>

<p>So warm up your keyboard, grab a fresh cup of coffee and let&#8217;s get PE up and running.</p>

<h2 id="installing-pe">Installing PE</h2>

<p>First of all, if you are entirely new to PE and puppet, we strongly recommend you work your way through our <a href="./../../pe/latest/quick_start.html">Quick Start Guide</a>, if you haven&#8217;t done so already. It will familiarize you with basic concepts and components and give you a jump on creating a solid deployment and making good decisions.</p>

<p>The <a href="./../../pe/latest/install_basic.html">installing PE  page</a> provides detailed instructions for downloading and installing PE.  If you haven&#8217;t yet downloaded a fresh production copy of PE, that page also provides links and instructions for how to choose the version of PE best suited for your environment. Once you have a copy and are ready to install, the first major decision involves where and how to set up the various roles that make up PE.</p>

<h3 id="before-starting-the-install">Before Starting the install</h3>

<p>Having a few things set up correctly in advance will make installation and deployment much easier. Specifically:</p>

<ul>
  <li>Make sure that networking on the node chosen for the puppet master is working correctly and reliably.</li>
  <li>Similarly, make sure your firewalls are properly configured and are not blocking any of <a href="./../../pe/latest/install_system_requirements.html#firewall-configuration">PE&#8217;s needed ports</a>. Remember to check that any loop-back ports are also open.</li>
  <li>Make sure the system clocks on all the nodes you&#8217;ve selected are correct. They don&#8217;t need to be exactly synchronized, just all within a minute or two of each other. You&#8217;ll likely be setting up NTP management as one of the first services you manage with PE.</li>
  <li>Initially, you will want to start with a small number of carefully chosen nodes. Choose nodes that are not mission critical and select simple, easy to manage services. Many admins will start with dev and test machines. Eventually, you&#8217;ll deploy Puppet throughout your infrastructure, but because Puppet is so powerful, you&#8217;ll want to start out slowly and carefully while you get comfortable with the tools. In the next chapter, we&#8217;ll talk about some approaches to selecting initial nodes for management.</li>
</ul>

<h4 id="hostnames-and-dns">Hostnames and DNS</h4>

<p>Finally, you need to get hostnames and DNS resolving correctly for the nodes you want to manage, especially the master. Sanity check DNS by pinging the master and agents at their expected names. You should do this from a representative sample of the nodes you are expecting to manage so you can be sure that DNS is resolving correctly throughout your ecosystem and not being influenced by something like, for example, DNS Views.</p>

<p>While PE can be set up to use, for example, aliases, doing so can be complex and messy. Having hostnames in DNS the way you want them before you start installing will spare you from this pain. This is particularly true for the hostname of the machine that will take the master role, because its name needs to be in every agent&#8217;s config file and the master&#8217;s SSL certificate, and changing these later can be tedious.</p>

<p>At some point in the not too distant future, you will want to review and regularize the way your organization creates host names and IP tables.</p>

<p>If you need some help troubleshooting DNS, please refer to <a href="./../../pe/latest/trouble_install.html#is-dns-wrong">these requirements</a> in the Puppet Enterprise User&#8217;s Guide. Additionally, this <a href="https://ask.puppetlabs.com/question/25/how-can-i-troubleshoot-problems-with-puppets-ssl-layer/">troubleshooting thread</a> on our ask.puppetlabs site has tons more useful information.</p>

<h3 id="choosing-where-to-install-each-role">Choosing Where to Install Each Role</h3>

<p>PE consists of several components, which are grouped into a handful of <strong>roles.</strong></p>

<ul>
  <li>The <strong>puppet agent</strong> role gets installed on <em>every</em> server you will manage with PE.</li>
  <li>The <strong>puppet master, console server,</strong> and <strong>database support</strong> roles make up the central infrastructure of PE. They can either be installed on <em>three separate servers,</em> or <em>all on one server.</em> We strongly recommend installing them on separate servers.</li>
  <li>The optional <strong>cloud provisioner</strong> role can be installed on any puppet agent node.</li>
</ul>

<p>Before installing, you must plan where to install these roles.</p>

<h4 id="the-puppet-agent-role">The Puppet Agent Role</h4>

<p>This one is easy. The puppet agent will get installed on every node in your infrastructure that you want to manage with PE, including the master and any other nodes that run other PE roles. Don&#8217;t be shy about installing it on existing infrastructure.</p>

<h4 id="the-puppet-master-role">The Puppet Master Role</h4>

<p>The puppet master compiles and serves configuration catalogs to puppet agent nodes. It also issues orchestration commands to agents. In general, we recommend that you install the master, console, and database roles on separate servers.</p>

<p>Start by installing the master. Typically, the puppet master is installed on a single node. However, under certain circumstances it may be preferable to run another master. For example, you may wish to run another master in order to provide HA or failover protection.</p>

<blockquote>
  <p><strong>Note:</strong> Generally speaking, running multiple masters only becomes necessary when your infrastructure grows to a certain size. What that size is precisely will vary depending on how complex your infrastructure is, the number of classes and resources, etc. in your manifests, and so on. As a general rule of thumb, however, once you get to 800 nodes you will probably want to start separating out the various functions of the master, and once you get to 1200 nodes or so you will likely want to use multiple masters. In any case, you may wish to defer deploying multiple masters if you just starting out with PE and want to keep your learning environment simple and straightforward. When you&#8217;re ready to set up multiple masters, see <a href="./../../guides/scaling_multiple_masters.html">Using Multiple Puppet Masters</a>.</p>
</blockquote>

<p>Make sure that any machine you select for the master conforms to the <a href="./../../pe/latest/install_system_requirements.html#hardware">hardware system requirements</a> and, in particular, ensure you have plenty of disk space, especially if you will be running the console and database roles on the same hardware.</p>

<p>While it is also possible to run masterless, this is rarely done with PE. Once you have worked with Puppet at greater length, you can evaluate some of the discussions around running masterless (<a href="http://jamescun.com/2012/12/14/masterless-puppet.html">Masterless Puppet</a>).</p>

<h4 id="the-database-support-role">The Database Support Role</h4>

<p>The database support role runs a PosgreSQL server (which provides databases for use by the console) and PuppetDB (which enables exported resources and provides a query API for data generated by Puppet).</p>

<p>The database support role should generally be installed on a dedicated server and be installed before installing the console role. If your infrastructure and needs are modest (around 200 nodes or less), the database role can run on the same server as the puppet master and console roles.</p>

<p>The <a href="./../../pe/latest/install_basic.html#console-questions">installation instructions</a> provide complete information on the various options for set up and configuration of the databases.</p>

<p>The PostgreSQL databases and server are vital to the functioning of the console. To keep things secure and robust, you should consult one of the many available hardening guides and security best practices (<a href="https://www.owasp.org/index.php/OWASP_Backend_Security_Project_PostgreSQL_Hardening">such as these guidelines</a>).</p>

<p>You should not use the PostgreSQL server on the database support role for anything other than Puppet Enterprise.</p>

<h4 id="the-console-role">The Console Role</h4>

<p>The PE console provides a user interface for working with the Puppet data at your site. It allows users to assign configuration data, approve new node requests, view reports and node status, and issue orchestration commands.</p>

<p>The console role should generally be installed on a dedicated server. If your infrastructure and needs are modest (around 200 nodes or less), the console can run on the same server as the puppet master and database support roles.</p>

<p>When running the console on a separate server, the installer will automatically also install a puppet agent to manage that machine. Be sure to give the agent the same hostname as the console.</p>

<h4 id="the-cloud-provisioner">The Cloud Provisioner</h4>

<p>This optional role can create virtual machine instances in environments such as VMWare&#8217;s Vsphere or Amazon EC2. Whichever environment you are using, the node running the cloud provisioning tools must have ports open to the outside. The required ports are:</p>

<ul>
  <li>vCenter: 10443 (HTTPS), 10111 (service management), 10109 (linked mode communication), 443 (SSL)</li>
  <li>AWS: 80 and 443 (SSL)</li>
  <li>OpenStack: 5000 (service API), 8773 (EC2 compatibility endpoint), 35357 (admin API)</li>
</ul>

<p>In addition you must have the following port connections available to your Puppet master server:</p>

<ul>
  <li>Puppet Master: TCP/8140, TCP/22 (SSH), TCP/443 (SSL)</li>
</ul>

<p>When selecting the node for the cloud provisioner role, make sure that local firewall rules will allow access to these ports. (For this reason, running cloud provisioning on the same node as the master may not work.)</p>

<p>Refer to the <a href="./../../pe/latest/cloudprovisioner_configuring.html">cloud provisioner configuration guide</a> for more details on installing and setting up cloud provisioning tools.</p>

<h3 id="run-the-install-script">Run the Install Script</h3>

<p>Once you&#8217;ve determined where everything is going to go, you can run the install script. If you have questions about the script, the answer file, etc., remember you can get  detailed instructions on the <a href="./../../pe/latest/install_basic.html">installing PE  page</a>.</p>

<h4 id="installation-issues-and-tips">Installation Issues and Tips</h4>

<p>There are a few common problems users have encountered when installing, mainly related to pre-existing conditions in the environment. The most common include:</p>

<ul>
  <li>Errors caused by an existing, old version of PostgreSQL on the machine that will run the console database. Be sure to completely uninstall any existing instances of PostgreSQL and the data directory (e.g. <code>/var/lib/pgsql/9.2/data</code> on RHEL systems).</li>
  <li>If you experience issues during installation and just want to start over, you can uninstall everything with <code>puppet-enterprise-uninstaller -pd</code>. See the <a href="./../../pe/latest/install_uninstalling.html">uninstaller documentation</a> for more information. Note that this will not uninstall any pre-existing PostgreSQL instances and related files; if these are causing issues, they will continue to do so on subsequent installation attempts.</li>
  <li>The installer comes with an example answers file, which can save you some time. Don&#8217;t overlook it!</li>
  <li>The installer creates a log file at <code>install_log.lastrun.&lt;hostname&gt;</code>, which can be very useful for debugging install issues.</li>
  <li>Similarly, the installer generates an <code>answers.lastrun.&lt;hostname&gt;</code> file, which can help you keep a record of things like the console&#8217;s hostname or the database users&#8217; passwords. <em>Important:</em> You will want to delete this file or move it to a secured location after your install to eliminate the plaintext record of these passwords.</li>
</ul>

<h2 id="managing-certificates">Managing Certificates</h2>

<p>Once you&#8217;ve gotten all the parts installed where you want them, it&#8217;s time to get agents connected to their master. This is done by sending certificate signing requests (CSR&#8217;s) from the agents to a certificate authority (CA). By default, the CA is the same server as the master. In any case, the CA and certificate signing process is a vital part of PE&#8217;s security infrastructure. Make sure it is well protected.</p>

<h3 id="auto-signing-pre-signing-and-request-management">Auto-signing, Pre-signing and Request Management</h3>

<p>The easiest way to manage node requests is with the request management capabilities built into PE&#8217;s console. See the <a href="./../../pe/latest/console_cert_mgmt.html">PE Node Request Management manual page</a> for details.</p>

<p>If you&#8217;d prefer to manage certificates from the command line, refer to <a href="./../../pe/latest/install_basic.html#signing-agent-certificates">these instructions</a>.</p>

<p>Auto-signing certificates can be useful, but should be done very carefully since it potentially introduces major security liabilities. By default, auto-signing is managed by the <code>/etc/puppetlabs/puppet/autosign.conf</code> file, which is empty in a new PE installation. <a href="./../../guides/configuring.html#autosignconf">This guide</a> has more information about adding entries to <code>autosign.conf</code>. Alternately, you can (but shouldn&#8217;t) set <code>autosign = true</code> in <code>/etc/puppetlabs/puppet/puppet.conf</code> to auto-sign all requests.</p>

<p>Note that if your institution prefers or requires you to use externally purchased SSL certs, you can do it, but you should back up your original, PE generated certs first, just in case of unforeseen circumstances. To use external certs you&#8217;ll need to edit several lines in <code>/etc/puppetlabs/httpd/conf.d/puppetdashboard.conf</code> as follows:</p>

<pre><code>SSLCertificateFile      &lt;path_to_your_purchased_cert&gt;/cert.pem
SSLCertificateKeyFile   &lt;path_to_your_purchased_cert&gt;/key.pem
SSLCertificateChainFile &lt;path_to_your_purchased_cert&gt;/ca_cert.pem
SSLCACertificateFile    &lt;path_to_your_purchased_cert&gt;/ca_cert.pem
</code></pre>

<p>After saving these edits, you&#8217;ll want to restart the <code>pe-httpd</code> daemon. Also, make sure to leave in place the original pe-internal-dashboard cert, private key, and CA certs (at <code>/opt/puppet/share/puppet-dashboard/certs/</code>).</p>

<h2 id="whats-next">What&#8217;s Next?</h2>

<p>At this point you should have a functioning installation of Puppet Enterprise. Your agents should be able to talk to the master and you should be able to see them in the Console. The next chapter will focus on setting up your work environment so you can start classifying nodes and automating your infrastructure.</p>

<hr />

<ul>
  <li>Next: <a href="dg_first_steps.html">First Steps: Building Your Work Environment</a></li>
</ul>


              <blockquote><p style="font-size: 1.3em; text-align: center;"><a href="#content">&#8593; Back to top</a></p></blockquote>
            </div>
            <nav class="main">
                  <div id="subCol">


<h3><a href="index.html">Puppet Enterprise Deployment Guide</a></h3>

<ul>
  <li><strong>Chapters</strong>
    <ul>
      <li><span class="currentpage">1. Introduction &amp; Installation</span></li>
      <li><a href="./dg_first_steps.html">2. First Steps: Setting Up Your Environment</a></li>
      <li><a href="./dg_define_infrastructure.html">3. Automating Your Infrastructure</a></li>
    </ul>
  </li>
  <li><strong>Other Resources</strong>
    <ul>
        <li><a href="../../references/glossary.html">Glossary of Puppet Terminology</a></li>
        <li><a href="../../puppet/2.7/reference/index.html">Puppet Reference Manual</a></li>
        <li><a href="../../pe/latest/index.html">PE User Manual</a></li>
        <li><a href="../../pe/latest/quick_start.html">Quick Start: Using PE</a></li>
        <li><a href="../../pe/latest/quick_writing.html">Quick Start: Writing Modules</a></li>
    </ul>





                      <div style="margin-top: 1.5em; padding-bottom: 10px;">
                          <p style="font-family: 'Lucida Grande',Lucida,Verdana,sans-serif;font-size: 16px; font-weight: bold; line-height: 22px; margin-bottom: 10px;">Download the Docs</p>
                          <a href="http://info.puppetlabs.com/download-pdfs.html"><img src="./../../images/smallbits_small_docs.png" alt="Puppet docs download" /></a>
                      </div>
                      <div style="margin-top: 0; padding-bottom: 10px;">
                          <p style="font-family: 'Lucida Grande',Lucida,Verdana,sans-serif;font-size: 16px; font-weight: bold; line-height: 22px; margin-bottom: 10px;">Download Puppet Enterprise</p>
                          <a href="http://info.puppetlabs.com/download-pe.html"><img src="./../../images/puppet_cert_home.jpg" alt="Puppet Enterprise promo" /></a>
                      </div>
                  </li></ul></div>
            </nav>
          </div>
        </div>
      </section>

		<footer id="footer">
      <div class="site-width">

        <div class="primary-secondary-content">
          <div class="primary-content">
            <section id="newsletter">
                 <h4>Puppet Labs is Hiring</h4>
                 <p><a href="http://www.puppetlabs.com/company/jobs/">Engineers, developers &amp; consultants</a>
                  </p><p>
		</p><h4>Newsletter</h4>

              <p>Stay up to date on all things puppet</p>

				<form class="lpeRegForm formNotEmpty" method="post" enctype="application/x-www-form-urlencoded" action="http://info.puppetlabs.com/index.php/leadCapture/save" id="mktForm_1013" name="mktForm_1013">

				<label>Email Address:</label><span class="mktInput"><input class="mktFormText mktFormEmail" name="Email" id="Email" type="text" value="" maxlength="255" /><span class="mktFormMsg"></span></span>

				<input id="mktFrmSubmit" type="submit" class="btn" style="width: auto; overflow: visible; padding-left: .25em; padding-right: .25em;" value="Subscribe" name="submitButton" onclick="formSubmit(document.getElementById(&quot;mktForm_1013&quot;)); return false;" />

				<input style="display: none;" id="mktFrmReset" type="reset" value="Clear" name="resetButton" onclick="formReset(document.getElementById(&quot;mktForm_1013&quot;)); return false;" />

				<span style="display:none;"><input type="text" name="_marketo_comments" value="" /></span>
				<input type="hidden" name="lpId" value="-1" />
				<input type="hidden" name="subId" value="100" />

				<input type="hidden" name="kw" value="" />
				<input type="hidden" name="cr" value="" />

				<input type="hidden" name="searchstr" value="" />
				<input type="hidden" name="lpurl" value="http://info.puppetlabs.com/testsubscription.html?cr={creative}&amp;kw={keyword}" />
				<input type="hidden" name="formid" value="1013" />
				<input type="hidden" name="returnURL" value="http://www.puppetlabs.com/misc/subscription-thank-you/" />
				<input type="hidden" name="retURL" value="http://www.puppetlabs.com/misc/subscription-thank-you/" />
				<input type="hidden" name="_mkt_disp" value="return" />
				<input type="hidden" name="_mkt_trk" value="" />

				</form>
				<script type="text/javascript" src="http://info.puppetlabs.com/js/mktFormSupport.js"></script>

				<script type="text/javascript"><![CDATA[
				function formSubmit(elt) {
				return Mkto.formSubmit(elt);
				}
				function formReset(elt) {
				return Mkto.formReset(elt);
				}
				]]></script>

<a href="http://info.puppetlabs.com/puppet-enterprise" class="fbtn">Try Puppet Enterprise FREE</a>

            </section>
            <section id="elsewhere">
              <h4>Get Involved</h4>
              <ul>

                <li class="chat"><a href="http://webchat.freenode.net/?channels=puppet" rel="external"><span class="indicator"></span><span>Chat with us on IRC</span></a></li>
		<li class="discussion"><a href="http://groups.google.com/group/puppet-dev" rel="external"><span class="indicator"></span><span>Join the Puppet Developer List</span></a></li>
                <li class="discussion"><a href="http://groups.google.com/group/puppet-users?pli=1" rel="external"><span class="indicator"></span><span>Join the Puppet User List</span></a></li>

                <li class="linkedin"><a href="http://www.linkedin.com/groups?about=&amp;gid=696467&amp;trk=anet_ug_grppro" rel="external"><span class="indicator"></span><span>Join the Puppet Users LinkedIn group</span></a></li>

              </ul>
		<p>
		              		</p><h4>Follow us&#8230;</h4>

              		<ul class="followus">


			<li><a href="http://feeds.feedburner.com/PuppetLabs" target="_blank"><img src="http://www.puppetlabs.com/wp-content/plugins/my-profiles/images/rss.png" border="0" /></a></li>
			<li><a href="http://www.facebook.com/pages/Puppet-Labs/219089920711" target="_blank"><img src="http://www.puppetlabs.com//wp-content/plugins/my-profiles/images/facebook.png" border="0" /></a></li>
			<li><a href="http://www.twitter.com/puppetlabs" target="_blank"><img src="http://www.puppetlabs.com//wp-content/plugins/my-profiles/images/twitter.png" border="0" /></a></li>
			<li><a href="http://www.linkedin.com/groups?about=&amp;gid=696467&amp;trk=anet_ug_grppro" target="_blank"><img src="http://www.puppetlabs.com//wp-content/uploads/2011/01/LinkedIn_IN_Icon_32px.png" border="0" /></a></li>    <li><a href="https://github.com/puppetlabs" target="_blank"><img src="http://www.puppetlabs.com//wp-content/uploads/2011/01/github_icon.png" border="0" /></a></li>
			<li><a href="https://plus.google.com/112682055028218091774?rel=author" target="_blank"><img src="https://puppetlabs.com/wp-content/uploads/2013/05/google_plus32x32.png" alt="Find Us on Google+" border="0" /></a></li>
					</ul>

              	

            </section>
          </div>
          <div class="secondary-content">
            <section id="book-it">
              <h4>Get the book!</h4>

              <p>James Turnbull and Jeff McCune's book <a href="http://www.apress.com/9781430230571" rel="nofollow">Pro Puppet</a> is a comprehensive and up-to-date look at Puppet and MCollective. </p>
              <a href="http://www.apress.com/9781430230571" rel="nofollow"><img src="http://www.puppetlabs.com/wp-content/uploads/2011/05/propuppetthumb.png" /></a>
            </section>
          </div>
        </div>
      </div>
		</footer>

    <div id="copyright">
      <div class="site-width">
        &#169; 2011 <a href="http://www.puppetlabs.com/" title="Puppet Labs">Puppet Labs</a>
        <span class="vcard">
         <span class="org"></span>
         <a class="email" href="mailto:info@puppetlabs.com">info@puppetlabs.com</a>

          <span class="adr">
           <span class="street-address">926 NW 13th Avenue #210</span>
           /
           <span class="locality">Portland</span>,
           <span class="region">OR</span>
           <span class="postal-code">97209</span>

          </span>

         <span class="tel">1-877-575-9775</span>
        </span>
      </div>
    </div>

  	<script type="text/javascript"><![CDATA[Cufon.now();]]></script>
  	<style type="text/css"><![CDATA[h1, h2, .btn { visibility : visible; }]]></style>


	</body>
</html>
