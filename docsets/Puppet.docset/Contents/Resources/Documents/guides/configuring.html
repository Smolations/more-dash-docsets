<!DOCTYPE html>
<html dir="ltr" lang="en-US">
  <head>
  	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  	<title>Configuring Puppet — Documentation — Puppet Labs</title>
  	<link rel="alternate" type="application/atom+xml" title="Puppet Labs Documentation Updates" href="https://github.com/puppetlabs/puppet-docs/commits/master.atom">
    <link rel="alternate" type="application/atom+xml" title="Puppet Labs Blog Feed" href="http://puppetlabs.com/feed/atom/">
    <link rel='index' title='Puppet Labs Documentation' href='http://docs.puppetlabs.com' />
    <link rel='icon' href='./../favicon.ico' />

  <meta name="description" content="Configuring PuppetPuppet&#8217;s behavior can be customized with a rather large collection of settings. Most of these can be safely ignored, but yo...">




    <!-- FIXME: absolute paths -->

    <script type='text/javascript' src='./../files/javascripts/html5.js'></script>
    <script type='text/javascript' src='./../files/javascripts/jquery-1.3.2.min.js'></script>
    <script type='text/javascript' src='./../files/javascripts/drop_down.js'></script>
    <script type='text/javascript' src='./../files/javascripts/cufon-yui.js'></script>
    <script type='text/javascript' src='./../files/fonts/Klavika_400-Klavika_600.font.js'></script>
    <script type='text/javascript' src='./../files/javascripts/ampersands.js'></script>
    <script type="text/javascript" src="http://puppetlabs.com/wp-content/themes/puppetlabs/javascripts/leadcapture.js"></script>

    <!-- All in One SEO Pack 1.6.10.1 by Michael Torbert of Semper Fi Web Design[127,146] -->
    <meta name="keywords" content="Puppet, puppet labs, reductive labs, open source, system administrator, ruby, data center, automation, support" />
    <!-- /all in one seo pack -->

    <!-- Give us the option of setting a canonical URL in yaml frontmatter -NF -->
    <link rel="canonical" href="http://docs.puppetlabs.com/guides/configuring.html" />

    <!-- FIXME: absolute paths -->

    <link rel="stylesheet" type="text/css" href="./../files/stylesheets/style_legacy.css" media="screen">
    <link rel="stylesheet" type="text/css" href="./../files/stylesheets/syntax.css" media="screen"> <!-- index -->
    <link rel="stylesheet" type="text/css" href="./../files/stylesheets/adbanner.css" media="screen">

    <!--[if IE 7]>
	  <link rel="stylesheet" type="text/css" href="./../files/stylesheets/ie_7.css" media="screen"> <!-- index -->
    <![endif]-->

    <!--[if IE 8]>
	    <link rel="stylesheet" type="text/css" href="./../files/stylesheets/ie_8.css" media="screen"> <!-- index -->
    <![endif]-->

  	<script type="text/javascript">
      Cufon.replace('h1, h2', { fontWeight: '600' });
  	</script>
</head>




  <body id="puppetlabsdocs" class="docs">
  <style type="text/css">h1, h2{ visibility : hidden }</style>
  <!--[if IE 8]>
    <style type="text/css">h1, h2{ visibility : visible }</style>
  <![endif]-->

  	<header id="header">
      <div class="site-width">
    		<h1><a href="http://puppetlabs.com/"><span>Puppet Labs</span></a></h1>
        <a class="screen-reader-content" href="#content">Skip navigation</a>
        <nav>
    		<ul id="global-navigation">
          <li id="puppet-tab" class="with-submenu">
            <a href="http://puppetlabs.com/puppet/puppet-enterprise">
              <span>Products</span>
              <span class="drop-down-trigger"></span>
            </a>
            <ul>
			<li>
                <ul>
                   <a href="http://puppetlabs.com/puppet/what-is-puppet/">What is Puppet?</a>
                </ul>
              </li>
			       <li>
                <ul>
                   <a href="http://puppetlabs.com/puppet/puppet-enterprise/">Puppet Enterprise</a>
                </ul>
              </li>
            <li>
                <ul>
                   <a href="http://puppetlabs.com/puppet/whats-new/">What's New in 2.5</a>
                </ul>
              </li>
            <li>
                <ul>
                   <a href="http://puppetlabs.com/puppet/puppet-open-source/">Puppet Open Source</a>
                </ul>
              </li>
            <li>
                <ul>
                   <a href="http://puppetlabs.com/puppet/enterprise-vs-open-source/">Enterprise vs. Open Source</a>
                </ul>
              </li>
              <li>
                <ul>
                  <a href="http://forge.puppetlabs.com">Puppet Forge</a>
                </ul>
              </li>
              <li>
                <ul>
                  <a href="http://puppetlabs.com/puppet/requirements/">Components &amp; Requirements</a>
                </ul>
              </li>
              <li>
                <ul>
                  <a href="http://puppetlabs.com/puppet/faq/">FAQ</a>
                </ul>
              </li>
			  <li>
                <ul>
                  <a href="http://puppetlabs.com/puppet/how-to-buy/">How to Buy</a>
                </ul>
              </li>
            </ul>
          </li>
          <li id="solutions-tab" class="with-submenu">
            <a href="http://puppetlabs.com/solutions/">
              <span>Solutions</span>
              <span class="drop-down-trigger"></span>
            </a>
            <ul>
              <li class="page_item page-item-12296"><a href="http://puppetlabs.com/solutions/configuration-management/">Configuration Management</a></li>
<li class="page_item page-item-986"><a href="http://puppetlabs.com/solutions/virtualization-management/">Virtualization Management</a></li>
<li class="page_item page-item-993"><a href="http://puppetlabs.com/solutions/cloud-management/">Cloud Management</a></li>
<li class="page_item page-item-996"><a href="http://puppetlabs.com/solutions/it-compliance/">IT Compliance</a></li>
<li class="page_item page-item-9520"><a href="http://puppetlabs.com/solutions/devops/">DevOps</a></li>
<li class="page_item page-item-991"><a href="http://puppetlabs.com/solutions/manage-os-x-resources/">OS X Desktops</a></li>
            </ul>
          </li>
          <li id="services-tab" class="with-submenu">
            <a href="http://puppetlabs.com/services/">
              <span>Services</span>
              <span class="drop-down-trigger"></span>
            </a>
            <ul>
              <li class="page_item page-item-783"><a href="http://puppetlabs.com/services/overview/">Overview</a></li>
<li class="page_item page-item-1052"><a href="http://puppetlabs.com/services/customer-support/">Customer Support</a></li>
<li class="page_item page-item-11022"><a href="http://puppetlabs.com/services/support-plans/">Support Plans</a></li>
<li class="page_item page-item-845"><a href="http://puppetlabs.com/services/training-workshops/">On-Site Education</a></li>
<li class="page_item page-item-4899"><a href="http://puppetlabs.com/services/consulting/">Professional Services</a></li>
<li class="page_item page-item-849"><a href="http://puppetlabs.com/category/events/upcoming/">Events &amp; Workshops</a></li>
<li class="page_item page-item-851"><a href="http://puppetlabs.com/services/partners/">Partners</a></li>
            </ul>
          </li>
                    <li id="resources-tab" class="with-submenu">
            <a href="http://puppetlabs.com/resources/">
              <span>Resources</span>
              <span class="drop-down-trigger"></span>
            </a>
            <ul>
              <li class="page_item page-item-1048"><a href="http://puppetlabs.com/resources/overview-2/">Overview</a></li>
<li class="page_item page-item-1040"><a href="http://docs.puppetlabs.com">Documentation</a></li>
<li class="page_item page-item-872"><a href="http://info.puppetlabs.com/register-download">Downloads</a></li>
<li class="page_item page-item-1961"><a href="http://forge.puppetlabs.com">Puppet Forge</a></li>
<li class="page_item page-item-835"><a href="http://info.puppetlabs.com/download-whitepapers.html">White Papers</a></li>
<li class="page_item page-item-1967"><a href="http://projects.puppetlabs.com/projects/puppet/wiki">Wiki</a></li>
<li class="page_item page-item-7279"><a href="http://puppetlabs.com/resources/webinars/">Upcoming Webinars</a></li>
<li class="page_item page-item-10183"><a href="http://puppetlabs.com/resources/newsletter/">Newsletter</a></li>
<li class="page_item page-item-12263"><a href="http://puppetlabs.com/resources/tech-notes/">Tech Notes</a></li>
<li class="page_item page-item-10265"><a href="http://info.puppetlabs.com/pe2-webinar.html">Webinars</a></li>
            </ul>
          </li>

          <li id="customers-tab" class="with-submenu">
            <a href="http://puppetlabs.com/customers/companies/">
              <span>Customers</span>
              <span class="drop-down-trigger"></span>
            </a>
            <ul>
			<li>
                <ul>
                  <a href="http://puppetlabs.com/customers/companies/">Companies</a>
                </ul>
              </li>
			  <li>
                <ul>
                  <a href="http://puppetlabs.com/customers/case-studies/">Case Studies</a>
                </ul>
              </li>
			  <li>
                <ul>
                  <a href="http://puppetlabs.com/customers/product-testimonials/">Product Testimonials</a>
                </ul>
              </li>
			    <li>
                <ul>
                  <a href="http://puppetlabs.com/customers/what-customers-are-saying/">Service Testimonials</a>
                </ul>
              </li>
            </ul>
          </li>
          <li id="community-tab" class="with-submenu">
            <a href="http://puppetlabs.com/community/">
              <span>Community</span>
              <span class="drop-down-trigger"></span>
            </a>

 <ul>
			<li>
                <ul>
                  <a href="http://puppetlabs.com/community/overview/">Overview</a>
                </ul>
              </li>
			<li>
                <ul>
                  <a href="http://puppetlabs.com/blog">Blog</a>
                </ul>
              </li>
			  <li>
                <ul>
                  <a href="http://puppetlabs.com/community/puppet-camp/">Puppet Camp</a>
                </ul>
              </li>
			  <li>
                <ul>
                  <a href="http://puppetlabs.com/community/user-groups-and-devops-groups/">Puppet User Groups & DevOps Groups</a>
                </ul>
              </li>
	          <li>
                <ul>
                  <a href="http://puppetlabs.com/community/presentations/">Presentations</a>
                </ul>
              </li>
			    <li>
                <ul>
                  <a href="http://puppetlabs.com/community/videos/">Videos</a>
                </ul>
              </li>

            </ul>

          <li id="company-tab" class="with-submenu">
            <a href="http://puppetlabs.com/company/">
              <span>Company</span>
              <span class="drop-down-trigger"></span>
            </a>
            <ul>
              <li class="page_item page-item-2316"><a href="http://puppetlabs.com/company/overview/">Overview</a></li>
<li class="page_item page-item-2179"><a href="http://puppetlabs.com/company/news/">News</a>
<ul class='children'>
	<li class="page_item page-item-2338"><a href="http://puppetlabs.com/company/news/press-releases/">Press Releases</a></li>
	<li class="page_item page-item-2383"><a href="http://puppetlabs.com/company/news/media-kit/">Media Kit</a></li>
</ul>
</li>
<li class="page_item page-item-1571"><a href="http://puppetlabs.com/company/careers/">Careers</a></li>
<li class="page_item page-item-10372"><a href="http://puppetlabs.com/company/management/">Management</a></li>
<li class="page_item page-item-10311"><a href="http://puppetlabs.com/company/board-and-advisors/">Board and Advisors</a></li>
<li class="page_item page-item-10367"><a href="http://puppetlabs.com/company/investors/">Investors</a></li>
<li class="page_item page-item-2313"><a href="http://puppetlabs.com/company/contact-us/">Contact Us</a></li>
<li class="page_item page-item-10579"><a href="http://puppetlabs.com/company/awards/">Awards</a></li>
            </ul>
          </li>
    		</ul>
          <div id="misc-navigation">
			  <ul>
				<li><a href="http://puppetlabs.com/security/">Security</a></li>
				<li><a href="http://docs.puppetlabs.com">Documentation</a></li>
				<li><a href="http://puppetlabs.com/resources/customer-support/">Support</a></li>
			        <li><a href="http://projects.puppetlabs.com/">Bug Tracker</a></li>
				<li><a href="http://puppetlabs.com/company/contact/contact-us">Contact Us</a></li>
				<li><a href="http://info.puppetlabs.com/download-pe2.html" class="gateway">Download</a></li>
			  </ul>
			<form action="http://www.google.com/cse" id="cse-search-box">
			  <div>
				<input type="hidden" name="cx" value="017668764424496204839:ubligvgbenm" />
				<input type="hidden" name="ie" value="UTF-8" />
				<input type="text" name="q" class="gsc-input" size="31" />
				<input type="submit" name="sa" class="searchbtn" value="Search" />
			  </div>
			</form>
			<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&lang=en"></script>
          </div>
      </nav>
    	</div>
    </header>

      <section id="masthead">
        <div class="site-width">
          <h1>Docs: <span class="section-name">Configuring Puppet</span></h1>
          <ul id="doc-navigation">
            <li><a href="./../index.html">Docs Home</a></li>
            <li class="with-submenu">
              <a href="#">
                <span>Quick Nav</span>
                <span class="drop-down-trigger"></span>
              </a>
               <!-- the following links can't be relative, unfortunately -->
               <!-- future: add some JS to disable this if running from file:// -->
                               <dl>
                  <dt>Puppet Documentation</dt>
                      <dd><a href="./../puppet/3/reference/index.html">Puppet 3 Reference Manual</a></dd>
                      <dd><a href="./../puppet/2.7/reference/index.html">Puppet 2.7 Reference Manual</a></dd>
                      <dd><a href="./../pe/latest/index.html">Puppet Enterprise User's Guide</a></dd>
                      <dd><a href="./../learning/index.html">Learning Puppet</a></dd>
                      <dd><a href="./../references/latest/type.html">Resource Types</a></dd>
                      <dd><a href="./../references/latest/function.html">Functions</a></dd>
                      <dd><a href="./../references/latest/configuration.html">Configuration</a></dd>
                      <dd><a href="./../references/latest/developer/index.html">Developer</a></dd>
                      <dd><a href="./../references/glossary.html">Glossary of Puppet Terms</a></dd>
                      <dd><a href="./../references/index.html">Older References</a></dd>
                  <dt>Facter</dt>
                      <dd><a href="./../facter/latest/core_facts.html">Core Facts Reference</a></dd>
                  <dt>PuppetDB</dt>
                      <dd><a href="./../puppetdb/1/index.html">PuppetDB 1 Manual</a></dd>
                  <dt>MCollective</dt>
                      <dd><a href="./../mcollective/index.html">Index</a></dd>
                      <dd><a href="./../mcollective/reference/index.html">References</a></dd>
                      <dd><a href="./../mcollective/simplerpc/index.html">Writing Plugins</a></dd>
                      <dd><a href="./../mcollective/releasenotes.html">Release Notes</a></dd>
                </dl>

            </li>
            <li><a href="./../contribute.html">Contribute</a></li>
          </ul>
        </div>
        <br />
      </section>

      <section id="content">
        <div class="site-width">
          <div class="primary-secondary-content">
            <div class="primary-content">
              <h1 id="configuring-puppet">Configuring Puppet</h1>

<p>Puppet&#8217;s behavior can be customized with a <a href="./../references/stable/configuration.html">rather large collection of settings</a>. Most of these can be safely ignored, but you&#8217;ll almost definitely have to modify some of them.</p>

<p>This document describes how Puppet&#8217;s configuration settings work, and describes all of Puppet&#8217;s auxiliary config files.</p>

<hr />

<h2 id="puppets-settings">Puppet&#8217;s Settings</h2>

<p>Puppet is able to automatically generate a reference of all its config settings (<code>puppet doc --reference configuration</code>), and the documentation site includes <a href="./../references/index.html">archived references for every recent version of Puppet</a>. You will generally want to consult the <a href="/references/stable/configuration.html">the most recent stable version&#8217;s reference</a>.</p>

<p>When retrieving the value for a given setting, Puppet follows a simple lookup path, stopping at the first value it finds. In order, it will check:</p>

<ul>
  <li>Values specified on the command line</li>
  <li>Values in environment blocks in <code>puppet.conf</code></li>
  <li>Values in run mode blocks in <code>puppet.conf</code></li>
  <li>Values in the main block of <code>puppet.conf</code></li>
  <li>The default values</li>
</ul>

<p>The settings you&#8217;ll have to interact with will vary a lot, depending on what you&#8217;re doing with Puppet. But at the least, you should get familiar with the following:</p>

<ul>
  <li><a href="./../references/stable/configuration.html#certname"><code>certname</code></a> &#8212; The locally unique name for this node. If you aren&#8217;t using DNS names to identify your nodes, you&#8217;ll need to set it yourself.</li>
  <li><a href="./../references/stable/configuration.html#server"><code>server</code></a> &#8212; The puppet master server to request configurations from. If your puppet master server isn&#8217;t reachable at the default hostname of <code>puppet</code>, you&#8217;ll need to set this yourself.</li>
  <li><a href="./../references/stable/configuration.html#pluginsync"><code>pluginsync</code></a> &#8212; Whether to use <a href="/guides/plugins_in_modules.html">plugins from modules</a>. Most users should set this to true on all agent nodes.</li>
  <li><a href="./../references/stable/configuration.html#report"><code>report</code></a> &#8212; Whether to send reports to the puppet master. Most users should set this to true on all agent nodes.</li>
  <li><a href="./../guides/reporting.html"><code>reports</code></a> &#8212; On the puppet master, which report handler(s) to use.</li>
  <li><a href="./../references/stable/configuration.html#modulepath"><code>modulepath</code></a> &#8212; The search path for Puppet modules. Defaults to <code>/etc/puppet/modules:/usr/share/puppet/modules</code>.</li>
  <li><a href="./../references/stable/configuration.html#environment"><code>environment</code></a> &#8212; On agent nodes, the <a href="./environment.html">environment</a> to request configuration in.</li>
  <li><a href="./../references/stable/configuration.html#nodeterminus"><code>node_terminus</code></a> &#8212; How puppet master should get node definitions; if you use an ENC, you&#8217;ll need to set this to &#8220;exec&#8221; on the master (or on all nodes if running in a standalone arrangement).</li>
  <li><a href="./../references/stable/configuration.html#externalnodes"><code>external_nodes</code></a> &#8212; The script to run for node definitions (if <code>node_terminus</code> is set to &#8220;exec&#8221;).</li>
  <li><a href="./../references/stable/configuration.html#confdir"><code>confdir</code></a> &#8212; One of Puppet&#8217;s main working directories, which usually contains config files, manifests, modules, and certificates.</li>
  <li><a href="./../references/stable/configuration.html#vardir"><code>vardir</code></a> &#8212; Puppet&#8217;s other main working directory, which usually contains cached data and configurations, reports, and file backups.</li>
</ul>

<h2 id="puppetconf"><code>puppet.conf</code></h2>

<p>Puppet&#8217;s main config file is <code>puppet.conf</code>, which is <strong>located in Puppet&#8217;s <code>confdir</code>.</strong></p>

<h3 id="finding-puppetconf">Finding puppet.conf</h3>

<h4 id="personal-confdirs">Personal Confdirs</h4>

<ul>
  <li>When Puppet is not running as root (*nix) or not running with elevated privileges (Windows), it will read its config files from the <code>.puppet</code> directory in the current user&#8217;s home directory.</li>
</ul>

<h4 id="nix-systems">*nix Systems</h4>

<ul>
  <li>Puppet Enterprise&#8217;s confdir is <code>/etc/puppetlabs/puppet</code>.</li>
  <li>Most open source Puppet distributions use <code>/etc/puppet</code> as Puppet&#8217;s confdir.</li>
  <li>If you are unsure where the confdir is, run <code>sudo puppet agent --configprint confdir</code> to locate it.</li>
</ul>

<h4 id="windows-systems">Windows Systems</h4>

<p>On Windows, Puppet Enterprise and open source Puppet use the same confdir.</p>

<ul>
  <li>On Windows 2003, Puppet&#8217;s confdir is <code>%ALLUSERSPROFILE%\PuppetLabs\puppet\etc</code>. This is usually located on disk at <code>C:\Documents and Settings\All Users\Application Data\PuppetLabs\puppet\etc</code>.</li>
  <li>On Windows 7 and Windows 2008, Puppet&#8217;s confdir is <code>%PROGRAMDATA%\PuppetLabs\puppet\etc</code>. This is usually located on disk at <code>C:\ProgramData\PuppetLabs\puppet\etc</code>.</li>
</ul>

<blockquote>
  <p>Note: On Windows systems, the puppet.conf file is allowed to use Windows-style CRLF line endings as well as *nix-style LF line endings.</p>
</blockquote>

<h3 id="file-format">File Format</h3>

<p><code>puppet.conf</code> uses an INI-like format, with <code>[config blocks]</code> containing indented groups of <code>setting = value</code> lines.  Comment lines <code># start with an octothorpe</code>; partial-line comments are not allowed.</p>

<p>You can interpolate the value of a setting by using its name as a <code>$variable</code>. (Note that <code>$environment</code> has special behavior: most of the Puppet applications will interpolate their own environment, but puppet master will use the environment of the agent node it is serving.)</p>

<p>If a setting has multiple values, they should be a comma-separated list. &#8220;Path&#8221;-type settings made up of multiple directories should use the system path separator (colon, on most Unices).</p>

<p>Finally, for settings that accept only a single file or directory, you can set the owner, group, and/or mode by putting their desired states in curly braces after the value.</p>

<p>Putting that all together:</p>

<pre><code># a block:
[main]
  # setting = value pairs:
  server = master.example.com
  certname = 005056c00008.localcloud.example.com

  # variable interpolation:
  rundir = $vardir/run
  modulepath = /etc/puppet/modules/$environment:/usr/share/puppet/modules
[master]
  # a list:
  reports = store, http

  # a multi-directory modulepath:
  modulepath = /etc/puppet/modules:/usr/share/puppet/modules

  # setting owner and mode for a directory:
  vardir = /Volumes/zfs/vardir {owner = puppet, mode = 644}
</code></pre>

<h3 id="config-blocks">Config Blocks</h3>

<p>Settings in different config blocks take effect under varying conditions. Settings in a more specific block can override those in a less specific block, as per the lookup path described above.</p>

<h4 id="the-main-block">The <code>[main]</code> Block</h4>

<p>The <code>[main]</code> config block is the least specific. Settings here are always effective, unless overridden by a more specific block.</p>

<h4 id="agent-master-and-user-blocks"><code>[agent]</code>, <code>[master]</code>, and <code>[user]</code> Blocks</h4>

<p>These three blocks correspond to Puppet&#8217;s run modes. Settings in <code>[agent]</code> will only be used by puppet agent; settings in <code>[master]</code> will be used by puppet master and puppet cert; and settings in <code>[user]</code> will only be used by puppet apply. The faces subcommands introduced in Puppet 2.7 default to the <code>user</code> run mode, but their mode can be changed at run time with the <code>--mode</code> option. Note that not every setting makes sense for every run mode, but specifying a setting in a block where it is irrelevant has no observable effect.</p>

<h5 id="notes-on-puppet-0255-and-older">Notes on Puppet 0.25.5 and Older</h5>

<p>Prior to Puppet 2.6, blocks were assigned by application name rather than by run mode; e.g. <code>[puppetd]</code>, <code>[puppetmasterd]</code>, <code>[puppet]</code>, and <code>[puppetca]</code>. Although these names still work, their use is deprecated, and they interact poorly with the modern run mode blocks. If you have an older config file and are using Puppet 2.6 or later, you should consider changing <code>[puppetd]</code> to <code>[agent]</code>, <code>[puppet]</code> to <code>[user]</code>, and combining <code>[puppetmasterd]</code> and <code>[puppetca]</code> into <code>[master]</code>.</p>

<h4 id="per-environment-blocks">Per-environment Blocks</h4>

<p>Blocks named for <a href="./environment.html">environments</a> are the most specific, and can override settings in the run mode blocks. Only a small number of settings (specifically: <code>modulepath, manifest, manifestdir,</code> and <code>templatedir</code>) can be set in a per-environment block; any other settings will be ignored and read from a run mode or main block.</p>

<p>Like with the <code>$environment</code> variable, puppet master treats environments differently from the other run modes: instead of using the block corresponding to its own <code>environment</code> setting, it will use the block corresponding to each agent node&#8217;s environment. The puppet master&#8217;s own environment setting is effectively inert.</p>

<p>You may not create environments named <code>main</code>, <code>master</code>, <code>agent</code>, or <code>user</code>, as these are already taken by the primary config blocks.</p>

<h2 id="command-line-options">Command-Line Options</h2>

<p>You can override any config setting at runtime by specifying it as a command-line option to almost any Puppet application. (Puppet doc is the main exception.)</p>

<p>Boolean settings are handled a little differently: use a bare option for a true value, and add a prefix of <code>no-</code> for false:</p>

<pre><code># Equivalent to listen = true:
$ puppet agent --listen
# Equivalent to listen = false:
$ puppet agent --no-listen
</code></pre>

<p>For non-boolean settings, just follow the option with the desired value:</p>

<pre><code>$ puppet agent --certname magpie.example.com
# An equals sign is optional:
$ puppet agent --certname=magpie.example.com
</code></pre>

<h2 id="inspecting-settings">Inspecting Settings</h2>

<p>Puppet agent, apply, and master all accept the <code>--configprint &lt;setting&gt;</code> option, which makes them print their local value of the requested setting and exit. In Puppet 2.7, you can also use the <code>puppet config print &lt;setting&gt;</code> action, and view values in different run modes with the <code>--mode</code> flag. Either way, you can view all settings by passing <code>all</code> instead of a specific setting.</p>

<pre><code>$ puppet master --configprint modulepath
# or:
$ puppet config print modulepath --mode master

/etc/puppet/modules:/usr/share/puppet/modules
</code></pre>

<p>Puppet agent, apply, and master also accept a <code>--genconfig</code> option, which behaves similarly to <code>--configprint all</code> but outputs a complete <code>puppet.conf</code> file, with descriptive comments for each setting, default values explicitly declared, and settings irrelevant to the requested run mode commented out. Having the documentation inline and the default values laid out explicitly can be helpful for setting up your config file, or it can be noisy and hard to work with; it comes down to personal taste.</p>

<p>You can also inspect settings for specific environments with the <code>--environment</code> option:</p>

<pre><code>$ puppet agent --environment testing --configprint modulepath
/etc/puppet/testing/modules:/usr/share/puppet/modules
</code></pre>

<p>(As implied above, this doesn&#8217;t work in the master run mode, since the master effectively has no environment.)</p>

<h2 id="other-configuration-files">Other configuration files</h2>

<p>In addition to the main configuration file, there are five special-purpose config files you might need to interact with: <code>auth.conf</code>, <code>fileserver.conf</code>, <code>tagmail.conf</code>, <code>autosign.conf</code>, and <code>device.conf</code>.</p>

<h3 id="authconf"><code>auth.conf</code></h3>

<p><strong><a href="./rest_auth_conf.html">See the <code>auth.conf</code> documentation for more details about this file</a>.</strong></p>

<p>Access to Puppet&#8217;s HTTP API is configured in <code>auth.conf</code>, the location of which is determined by the <code>rest_authconfig</code> setting. (Default: <code>/etc/puppet/auth.conf</code>.) It consists of a series of ACL stanzas, and behaves quite differently from <code>puppet.conf</code>.</p>

<pre><code># Example auth.conf:

path /
auth true
environment override
allow magpie.example.com

path /certificate_status
auth true
environment production
allow magpie.example.com

path /facts
method save
auth true
allow magpie.example.com

path /facts
auth true
method find, search
allow magpie.example.com, dashboard.example.com, finch.example.com
</code></pre>

<h3 id="puppetdbconf"><code>puppetdb.conf</code></h3>

<p>The <code>puppetdb.conf</code> file contains the hostname and port of the <a href="./../puppetdb/latest/index.html">PuppetDB</a> server. It is only used if you are using PuppetDB and have <a href="/puppetdb/latest/connect_puppet_master.html">connected your puppet master to it</a>.</p>

<p>This file uses the same ini-like format as <code>puppet.conf</code>, but only uses a <code>[main]</code> block and only has two settings (<code>server</code> and <code>port</code>):</p>

<pre><code>[main]
server = puppetdb.example.com
port = 8081
</code></pre>

<p>See the <a href="./../puppetdb/latest/index.html">PuppetDB manual</a> for more information.</p>

<h3 id="routesyaml"><code>routes.yaml</code></h3>

<p>This file overrides configuration settings involving indirector termini, and allows termini to be set in greater detail than <code>puppet.conf</code> allows.</p>

<p>This file should be a YAML hash. Each top level key should be the name of a run mode (master, agent, user), and its value should be another hash. Each key of these second-level hashes should be the name of an indirection, and its value should be another hash. The only keys allowed in these third-level hashes are <code>terminus</code> and <code>cache</code>. The value of each of these keys should be the name of a valid terminus for the indirection.</p>

<p>Example:</p>

<pre><code>---
master:
  facts:
    terminus: puppetdb
    cache: yaml
</code></pre>

<h3 id="autosignconf"><code>autosign.conf</code></h3>

<p>The <code>autosign.conf</code> file (located at <code>/etc/puppet/autosign.conf</code> by default, and configurable with the <code>autosign</code> setting) is a list of certnames or certname globs (one per line) whose certificate requests will automatically be signed.</p>

<pre><code>rebuilt.example.com
*.scratch.example.com
*.local
</code></pre>

<p>Note that certname globs do not function as normal globs: an asterisk can only represent one or more subdomains at the front of a certname that resembles a fully-qualified domain name. (That is, if your certnames don&#8217;t look like FQDNs, you can&#8217;t use <code>autosign.conf</code> to full effect.</p>

<p>As any host can provide any certname, autosigning should only be used with great care, and only in situations where you essentially trust any computer able to connect to the puppet master.</p>

<h3 id="deviceconf"><code>device.conf</code></h3>

<p>Puppet device, added in Puppet 2.7, configures network hardware using a catalog downloaded from the puppet master; in order to function, it requires that the relevant devices be configured in <code>/etc/puppet/device.conf</code> (configurable with the <code>deviceconfig</code> setting).</p>

<p><code>device.conf</code> is organized in INI-like blocks, with one block per device:</p>

<pre><code>[device certname]
    type &lt;type&gt;
    url &lt;url&gt;
[router6.example.com]
    type cisco
    url ssh://admin:password@ef03c87a.local
</code></pre>

<h3 id="fileserverconf"><code>fileserver.conf</code></h3>

<p>By default, <code>fileserver.conf</code> isn&#8217;t necessary, provided that you only need to serve files from modules. If you want to create additional fileserver mount points, you can do so in <code>/etc/puppet/fileserver.conf</code> (or whatever is set in the <code>fileserverconfig</code> setting).</p>

<p><code>fileserver.conf</code> consists of a collection of mount-point stanzas, and looks like a hybrid of <code>puppet.conf</code> and <code>auth.conf</code>:</p>

<pre><code># Files in the /path/to/files directory will be served
# at puppet:///mount_point/.
[mount_point]
    path /path/to/files
    allow *.example.com
    deny *.wireless.example.com
</code></pre>

<p>See the <a href="./file_serving.html">file serving documentation</a> for more details.</p>

<p>Note that certname globs do not function as normal globs: an asterisk can only represent one or more subdomains at the front of a certname that resembles a fully-qualified domain name. (That is, if your certnames don&#8217;t look like FQDNs, you can&#8217;t use <code>autosign.conf</code> to full effect.</p>

<h3 id="tagmailconf"><code>tagmail.conf</code></h3>

<p>Your puppet master server can send targeted emails to different admin users whenever certain resources are changed. This requires that you:</p>

<ul>
  <li>Set <code>report = true</code> on your agent nodes</li>
  <li>Set <code>reports = tagmail</code> on the puppet master (<a href="./../guides/reporting.html">the <code>reports</code> setting</a> accepts a list, so you can enable any number of reports)</li>
  <li>Set the <a href="./../references/latest/configuration.html#reportfrom"><code>reportfrom</code></a> email address and either the <a href="/references/latest/configuration.html#smtpserver"><code>smtpserver</code></a> or <a href="/references/latest/configuration.html#sendmail"><code>sendmail</code></a> setting on the puppet master</li>
  <li>Create a <code>tagmail.conf</code> file at the location specified in the <code>tagmap</code> setting</li>
</ul>

<p>More details are available at the <a href="http://docs.puppetlabs.com/references/stable/report.html#tagmail">tagmail report reference</a>.</p>

<p>The <code>tagmail.conf</code> file (located at <code>/etc/puppet/tagmail.conf</code> by default, and configurable with the <code>tagmap</code> setting) is list of lines, each of which consists of:</p>

<ul>
  <li>A comma-separated list of tags and !negated tags; valid tags include:
    <ul>
      <li>Explicit tags</li>
      <li>Class names</li>
      <li>&#8220;<code>all</code>&#8221;</li>
      <li>Any valid Puppet log level (<code>debug</code>, <code>info</code>, <code>notice</code>, <code>warning</code>, <code>err</code>, <code>alert</code>, <code>emerg</code>, <code>crit</code>, or <code>verbose</code>)</li>
    </ul>
  </li>
  <li>A colon</li>
  <li>A comma-separated list of email addresses</li>
</ul>

<p>The list of tags on a line builds the set of resources whose messages will be included in the mailing; each additional tag adds to the set, and each !negated tag subtracts from the set.</p>

<p>So, for example:</p>

<pre><code>all: log-archive@example.com
webserver, !mailserver: httpadmins@example.com
emerg, crit: james@example.com, zach@example.com, ben@example.com
</code></pre>

<p>This <code>tagmail.conf</code> file will mail any resource events tagged with <code>webserver</code> but <em>not</em> with <code>mailserver</code> to the httpadmins group; any emergency or critical events to to James, Zach, and Ben, and all events to the log-archive group.</p>


              <blockquote><p style="font-size: 1.3em; text-align: center;"><a href="#content">↑ Back to top</a></p></blockquote>
            </div>
            <div class="secondary-content">
                  <div id="subCol">
                      <h3 class="chapter">Contents</h3>

<ol class="toc">
  <li class="toc-lv2"><a href="#puppets-settings">Puppet&#8217;s Settings</a></li>
  <li class="toc-lv2"><a href="#puppetconf">puppet.conf</a>
<ol class="toc">
   <li class="toc-lv3"><a href="#finding-puppetconf">Finding puppet.conf</a></li>
   <li class="toc-lv3"><a href="#file-format">File Format</a></li>
   <li class="toc-lv3"><a href="#config-blocks">Config Blocks</a></li>
</ol></li>
  <li class="toc-lv2"><a href="#command-line-options">Command-Line Options</a></li>
  <li class="toc-lv2"><a href="#inspecting-settings">Inspecting Settings</a></li>
  <li class="toc-lv2"><a href="#other-configuration-files">Other configuration files</a>
<ol class="toc">
   <li class="toc-lv3"><a href="#authconf">auth.conf</a></li>
   <li class="toc-lv3"><a href="#puppetdbconf">puppetdb.conf</a></li>
   <li class="toc-lv3"><a href="#routesyaml">routes.yaml</a></li>
   <li class="toc-lv3"><a href="#autosignconf">autosign.conf</a></li>
   <li class="toc-lv3"><a href="#deviceconf">device.conf</a></li>
   <li class="toc-lv3"><a href="#fileserverconf">fileserver.conf</a></li>
   <li class="toc-lv3"><a href="#tagmailconf">tagmail.conf</a></li>
</ol></li>
</ol>
                      <div style="margin-top: 1.5em; padding-bottom: 10px;">
                          <p style="font-family: 'Lucida Grande',Lucida,Verdana,sans-serif;font-size: 16px; font-weight: bold; line-height: 22px; margin-bottom: 10px;">Download the Docs</p>
                          <a href="http://info.puppetlabs.com/download-pdfs.html"><img src="./../images/smallbits_small_docs.png" alt="Puppet docs download"></a>
                      </div>
                      <div style="margin-top: 0; padding-bottom: 10px;">
                          <p style="font-family: 'Lucida Grande',Lucida,Verdana,sans-serif;font-size: 16px; font-weight: bold; line-height: 22px; margin-bottom: 10px;">Download Puppet Enterprise</p>
                          <a href="http://info.puppetlabs.com/download-pe.html"><img src="./../images/puppet_cert_home.jpg" alt="Puppet Enterprise promo"></a>
                      </div>
                  </div>
            </div>
          </div>
        </div>
      </section>

		<footer id="footer">
      <div class="site-width">

        <div class="primary-secondary-content">
          <div class="primary-content">
            <section id="newsletter">
                 <h4>Puppet Labs is Hiring</h4>
                 <p><a href="http://www.puppetlabs.com/company/jobs/">Engineers, developers & consultants</a>
                  <p>
		<h4>Newsletter</h4>

              <p>Stay up to date on all things puppet</p>

				<form class="lpeRegForm formNotEmpty" method="post" enctype="application/x-www-form-urlencoded" action="http://info.puppetlabs.com/index.php/leadCapture/save"; id="mktForm_1013" name="mktForm_1013">

				<label>Email Address:</label><span class='mktInput'><input class='mktFormText mktFormEmail' name="Email" id="Email" type='text' value="" maxlength='255'  /><span class='mktFormMsg'></span></span>

				<input id='mktFrmSubmit' type='submit' class='btn' style="width: auto; overflow: visible; padding-left: .25em; padding-right: .25em;" value='Subscribe' name='submitButton' onclick='formSubmit(document.getElementById("mktForm_1013")); return false;' />

				<input style='display: none;' id='mktFrmReset' type='reset' value='Clear' name='resetButton' onclick='formReset(document.getElementById("mktForm_1013")); return false;' />

				<span style="display:none;"><input type="text" name="_marketo_comments" value="" /></span>
				<input type="hidden" name="lpId" value="-1" />
				<input type="hidden" name="subId" value="100" />

				<input type="hidden" name="kw" value="" />
				<input type="hidden" name="cr" value="" />

				<input type="hidden" name="searchstr" value="" />
				<input type="hidden" name="lpurl" value="http://info.puppetlabs.com/testsubscription.html?cr={creative}&kw={keyword}"; />
				<input type="hidden" name="formid" value="1013" />
				<input type="hidden" name="returnURL" value="http://www.puppetlabs.com/misc/subscription-thank-you/"; />
				<input type="hidden" name="retURL" value="http://www.puppetlabs.com/misc/subscription-thank-you/"; />
				<input type="hidden" name="_mkt_disp" value="return" />
				<input type="hidden" name="_mkt_trk" value="" />

				</form>
				<script type="text/javascript" src="http://info.puppetlabs.com/js/mktFormSupport.js"></script>

				<script type="text/javascript">
				function formSubmit(elt) {
				return Mkto.formSubmit(elt);
				}
				function formReset(elt) {
				return Mkto.formReset(elt);
				}
				</script>

<a href="http://info.puppetlabs.com/puppet-enterprise" class="fbtn">Try Puppet Enterprise FREE</a>

            </section>
            <section id="elsewhere">
              <h4>Get Involved</h4>
              <ul>

                <li class="chat"><a href="http://webchat.freenode.net/?channels=puppet" rel="external"><span class="indicator"></span><span>Chat with us on IRC</span></a></li>
		<li class="discussion"><a href="http://groups.google.com/group/puppet-dev" rel="external"><span class="indicator"></span><span>Join the Puppet Developer List</span></a></li>
                <li class="discussion"><a href="http://groups.google.com/group/puppet-users?pli=1" rel="external"><span class="indicator"></span><span>Join the Puppet User List</span></a></li>

                <li class="linkedin"><a href="http://www.linkedin.com/groups?about=&gid=696467&trk=anet_ug_grppro" rel="external"><span class="indicator"></span><span>Join the Puppet Users LinkedIn group</span></a></li>

              </ul>
		<p>
		              		<h4>Follow us&#8230;</h4>

              		<ul class="followus">


			<li><a href="http://feeds.feedburner.com/PuppetLabs" target="_blank"><img src="http://www.puppetlabs.com/wp-content/plugins/my-profiles/images/rss.png" border="0"></a></li>
			<li><a href="http://www.facebook.com/pages/Puppet-Labs/219089920711" target="_blank"><img src="http://www.puppetlabs.com//wp-content/plugins/my-profiles/images/facebook.png" border="0"></a></li>
			<li><a href="http://www.twitter.com/puppetlabs" target="_blank"><img src="http://www.puppetlabs.com//wp-content/plugins/my-profiles/images/twitter.png" border="0"></a></li>
			<li><a href="http://www.linkedin.com/groups?about=&amp;gid=696467&amp;trk=anet_ug_grppro" target="_blank"><img src="http://www.puppetlabs.com//wp-content/uploads/2011/01/LinkedIn_IN_Icon_32px.png" border="0"></a></li>    <li><a href="https://github.com/puppetlabs" target="_blank"><img src="http://www.puppetlabs.com//wp-content/uploads/2011/01/github_icon.png" border="0"></a></li>
			<li><a href="https://plus.google.com/112682055028218091774?rel=author" target="_blank"><img src="https://puppetlabs.com/wp-content/uploads/2013/05/google_plus32x32.png" alt="Find Us on Google+" border="0"></a></li>
					</ul>

              	</p>

            </section>
          </div>
          <div class="secondary-content">
            <section id="book-it">
              <h4>Get the book!</h4>

              <p>James Turnbull and Jeff McCune's book <a href="http://www.apress.com/9781430230571" rel="nofollow">Pro Puppet</a> is a comprehensive and up-to-date look at Puppet and MCollective. </p>
              <a href="http://www.apress.com/9781430230571" rel="nofollow"><img src="http://www.puppetlabs.com/wp-content/uploads/2011/05/propuppetthumb.png" /></a>
            </section>
          </div>
        </div>
      </div>
		</footer>

    <div id="copyright">
      <div class="site-width">
        &copy; 2011 <a href="http://www.puppetlabs.com/" title="Puppet Labs">Puppet Labs</a>
        <span class="vcard">
         <span class="org"></span>
         <a class="email" href="mailto:info@puppetlabs.com">info@puppetlabs.com</a>

          <span class="adr">
           <span class="street-address">926 NW 13th Avenue #210</span>
           /
           <span class="locality">Portland</span>,
           <span class="region">OR</span>
           <span class="postal-code">97209</span>

          </span>

         <span class="tel">1-877-575-9775</span>
        </span>
      </div>
    </div>

  	<script type="text/javascript">Cufon.now();</script>
  	<style type="text/css">h1, h2, .btn { visibility : visible; }</style>

	</body>
</html>
