<!DOCTYPE html><html><head><title> Provisioning - Getting Started - Vagrant Documentation</title><meta name=viewport content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no"><link href="./../../stylesheets/bootstrap-2bdef9a2.css" media=screen rel=stylesheet /><link href="./../../stylesheets/vagrantup-d5d54c59.css" media=screen rel=stylesheet /><script src="./../../javascripts/jquery-08c11650.js"></script><script src="./../../javascripts/modernizr-84c0465a.js"></script><script src="./../../javascripts/bootstrap.min-98cc7a22.js"></script><script src="./../../javascripts/backstretch-3d1212ad.js"></script><script src="./../../javascripts/vagrantup-03aae2a8.js"></script><link href='//fonts.googleapis.com/css?family=Inconsolata' rel=stylesheet><script src="//use.typekit.net/xfs6zus.js"></script><script>try{Typekit.load();}catch(e){}</script></head><body><div class=wrapper><nav class=docs><a class=vagrant-docs-logo href="/">Vagrant Documentation</a><ul class="pull-right unstyled"><li><a href="//www.vagrantup.com/">Home</a></li></ul></nav><div class="page docs docs-home"><div class=container><div class=row><div class="sidebar span3"><aside class=sidebar-nav><div class="toggle hidden-desktop"><div class="open-close open"></div><a href="#">Contents</a></div><ul class=unstyled><li><a href="./../../v2/">Overview</a></li><li><a href="./../../v2/why-vagrant/index.html">Why Vagrant?</a></li><li><a href="./../../v2/installation/index.html">Installation</a></li><li class=current><a href="./../../v2/getting-started/index.html">Getting Started</a></li><ul class="sub unstyled"><li><a href="./../../v2/getting-started/project_setup.html">Project Setup</a></li><li><a href="./../../v2/getting-started/boxes.html">Boxes</a></li><li><a href="./../../v2/getting-started/up.html">Up and SSH</a></li><li><a href="./../../v2/getting-started/synced_folders.html">Synced Folders</a></li><li class=current><a href="./../../v2/getting-started/provisioning.html">Provisioning</a></li><li><a href="./../../v2/getting-started/networking.html">Networking</a></li><li><a href="./../../v2/getting-started/teardown.html">Teardown</a></li><li><a href="./../../v2/getting-started/rebuild.html">Rebuild</a></li><li><a href="./../../v2/getting-started/providers.html">Providers</a></li></ul><li><a href="./../../v2/cli/index.html">Command-Line Interface</a></li><li><a href="./../../v2/vagrantfile/index.html">Vagrantfile</a></li><li><a href="./../../v2/boxes.html">Boxes</a></li><li><a href="./../../v2/provisioning/index.html">Provisioning</a></li><li><a href="./../../v2/networking/index.html">Networking</a></li><li><a href="./../../v2/synced-folders/index.html">Synced Folders</a></li><li><a href="./../../v2/multi-machine/index.html">Multi-Machine</a></li><li><a href="./../../v2/providers/index.html">Providers</a></li><li><a href="./../../v2/virtualbox/index.html">VirtualBox</a></li><li><a href="./../../v2/vmware/index.html">VMware</a></li><li><a href="./../../v2/plugins/index.html">Plugins</a></li><li><a href="./../../v2/debugging.html">Debugging</a></li></ul></aside></div><div class="page-contents span9"><div class=page-background></div><div class=row><div class="span8 offset1"><h1>Provisioning</h1><p>Alright, so we have a virtual machine running a basic copy of Ubuntu and we can edit files from our machine and have them synced into the virtual machine. Let&#39;s now serve those files using a webserver.</p><p>We could just SSH in and install a webserver and be on our way, but then every person who used Vagrant would have to do the same thing. Instead, Vagrant has built-in support for <em>automated provisioning</em>. Using this feature, Vagrant will automatically install software when you <code>vagrant up</code> so that the guest machine can be repeatably created and ready-to-use.</p><h2>Installing Apache</h2><p>We&#39;ll just setup <a href="//httpd.apache.org/">Apache</a> for our basic project, and we&#39;ll do so using a shell script. Create the following shell script and save it as <code>bootstrap.sh</code> in the same directory as your Vagrantfile:</p><pre><code class="bash">#!/usr/bin/env bash

apt-get update
apt-get install -y apache2
rm -rf /var/www
ln -fs /vagrant /var/www
</code></pre><p>Next, we configure Vagrant to run this shell script when setting up our machine. We do this by editing the Vagrantfile, which should now look like this:</p><pre><code class="ruby">Vagrant.configure(&quot;2&quot;) do |config|
  config.vm.box = &quot;precise32&quot;
  config.vm.provision :shell, :path =&gt; &quot;bootstrap.sh&quot;
end
</code></pre><p>The &quot;provision&quot; line is new, and tells Vagrant to use the <code>shell</code> provisioner to setup the machine, with the <code>bootstrap.sh</code> file. The file path is relative to the location of the project root (where the Vagrantfile is).</p><h2>Provision!</h2><p>After everything is configured, just run <code>vagrant up</code> to create your machine and Vagrant will automatically provision it. You should see the output from the shell script appear in your terminal. If the guest machine is already running from a previous step, run <code>vagrant reload --provision</code>, which will quickly restart your virtual machine, skipping the initial import step. The provision flag on the reload command instructs Vagrant to run the provisioners, since usually Vagrant will only do this on the first <code>vagrant up</code>.</p><p>After Vagrant completes running, the web server will be up and running. You can&#39;t see the website from your own browser (yet), but you can verify that the provisioning works by loading a file from SSH within the machine:</p><pre><code>$ vagrant ssh
...
vagrant@precise32:~$ wget -qO- 127.0.0.1
</code></pre><p>This works because in the shell script above we installed Apache and setup the default <code>DocumentRoot</code> of Apache to point to our <code>/vagrant</code> directory, which is the default synced folder setup by Vagrant.</p><p>You can play around some more by creating some more files and viewing them from the terminal, but in the next step we&#39;ll cover networking options so that you can use your own browser to access the guest machine.</p></div></div></div></div></div></div><footer><div class=container><div class=row><div class=span12><ul class="unstyled footer-nav"><li><a href="//docs.vagrantup.com/">Documentation</a></li><li><a href="//www.vagrantup.com/about">About</a></li><li><a href="//www.vagrantup.com/support">Support</a></li><a href="//downloads.vagrantup.com/"><li class="button inline-button">Download</li></a></ul><ul class="unstyled logos"><a href="//www.vagrantup.com"><li class=vagrant-logo-monochrome></li></a><li><span>by</span></li><a href="//www.hashicorp.com"><li class="hashi-logo-monochrome "></li></a></ul></div></div><div class=row><h6 class=legal> &#169; 2013 HashiCorp </h6></div></div></footer></div><script>
			$(".big-background").backstretch("assets/photos/full_width.jpg");
		</script></body></html>
