<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!--NewPage-->
<HTML>
<HEAD>
<!-- Generated by javadoc (build 1.4.2_05) on Fri Dec 23 12:54:53 EST 2005 -->
<TITLE>
OrderDiscountCalculator (ATG Java API)
</TITLE>

<META NAME="keywords" CONTENT="atg.commerce.pricing.OrderDiscountCalculator class">

<LINK REL ="stylesheet" TYPE="text/css" HREF="../../../stylesheet.css" TITLE="Style">

<SCRIPT type="text/javascript">
function windowTitle()
{
    parent.document.title="OrderDiscountCalculator (ATG Java API)";
}
</SCRIPT>

</HEAD>

<BODY BGCOLOR="white" onload="windowTitle();">


<!-- ========= START OF TOP NAVBAR ======= -->
<A NAME="navbar_top"><!-- --></A>
<A HREF="#skip-navbar_top" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=3 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_top_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../atg/commerce/pricing/OrderClosenessQualifierEvaluator.html" title="class in atg.commerce.pricing"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../atg/commerce/pricing/OrderPriceInfo.html" title="class in atg.commerce.pricing"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="OrderDiscountCalculator.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>

</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_top"></A>
<!-- ========= END OF TOP NAVBAR ========= -->

<HR>
<!-- ======== START OF CLASS DATA ======== -->
<H2>
<FONT SIZE="-1">
atg.commerce.pricing</FONT>
<BR>
Class OrderDiscountCalculator</H2>
<PRE>
java.lang.Object
  <IMG SRC="../../../resources/inherit.gif" ALT="extended by"><A HREF="../../../atg/nucleus/GenericService.html" title="class in atg.nucleus">atg.nucleus.GenericService</A>
      <IMG SRC="../../../resources/inherit.gif" ALT="extended by"><A HREF="../../../atg/commerce/pricing/DiscountCalculatorService.html" title="class in atg.commerce.pricing">atg.commerce.pricing.DiscountCalculatorService</A>
          <IMG SRC="../../../resources/inherit.gif" ALT="extended by"><B>atg.commerce.pricing.OrderDiscountCalculator</B>
</PRE>
<DL>
<DT><B>All Implemented Interfaces:</B> <DD><A HREF="../../../atg/nucleus/AdminableService.html" title="interface in atg.nucleus">AdminableService</A>, <A HREF="../../../atg/nucleus/logging/ApplicationLogging.html" title="interface in atg.nucleus.logging">ApplicationLogging</A>, <A HREF="../../../atg/nucleus/naming/ComponentNameResolver.html" title="interface in atg.nucleus.naming">ComponentNameResolver</A>, java.util.EventListener, <A HREF="../../../atg/naming/NameContextBindingListener.html" title="interface in atg.naming">NameContextBindingListener</A>, <A HREF="../../../atg/naming/NameContextElement.html" title="interface in atg.naming">NameContextElement</A>, <A HREF="../../../atg/naming/NameResolver.html" title="interface in atg.naming">NameResolver</A>, <A HREF="../../../atg/commerce/pricing/OrderPricingCalculator.html" title="interface in atg.commerce.pricing">OrderPricingCalculator</A>, <A HREF="../../../atg/nucleus/Service.html" title="interface in atg.nucleus">Service</A>, <A HREF="../../../atg/nucleus/ServiceListener.html" title="interface in atg.nucleus">ServiceListener</A></DD>
</DL>
<HR>
<DL>
<DT>public class <B>OrderDiscountCalculator</B><DT>extends <A HREF="../../../atg/commerce/pricing/DiscountCalculatorService.html" title="class in atg.commerce.pricing">DiscountCalculatorService</A><DT>implements <A HREF="../../../atg/commerce/pricing/OrderPricingCalculator.html" title="interface in atg.commerce.pricing">OrderPricingCalculator</A></DL>

<P>
Calculates OrderPriceInfos for Orders which the calculator is given.
 This calculator consults the Qualifer service, looking for the Order to be priced.
 It calls <code>Qualifier.findQualifyingOrder</code> for this purpose.  If it gets back an Order,
 an OrderPriceInfo is computed based on the input PricingModel (RepositoryItem).
<P>

<P>
<DL>
<DT><B>See Also:</B><DD><A HREF="../../../atg/commerce/pricing/Qualifier.html" title="class in atg.commerce.pricing"><CODE>Qualifier</CODE></A></DL>
<HR>

<P>
<!-- ======== NESTED CLASS SUMMARY ======== -->


<!-- =========== FIELD SUMMARY =========== -->

<A NAME="field_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Field Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>static&nbsp;java.lang.String</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../atg/commerce/pricing/OrderDiscountCalculator.html#CLASS_VERSION">CLASS_VERSION</A></B></CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Class version string</TD>
</TR>
</TABLE>
&nbsp;<A NAME="fields_inherited_from_class_atg.commerce.pricing.DiscountCalculatorService"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TD><B>Fields inherited from class atg.commerce.pricing.<A HREF="../../../atg/commerce/pricing/DiscountCalculatorService.html" title="class in atg.commerce.pricing">DiscountCalculatorService</A></B></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="../../../atg/commerce/pricing/DiscountCalculatorService.html#AMOUNT_OFF_TYPE">AMOUNT_OFF_TYPE</A>, <A HREF="../../../atg/commerce/pricing/DiscountCalculatorService.html#FIXED_PRICE_TYPE">FIXED_PRICE_TYPE</A>, <A HREF="../../../atg/commerce/pricing/DiscountCalculatorService.html#ILLEGAL_TYPE">ILLEGAL_TYPE</A>, <A HREF="../../../atg/commerce/pricing/DiscountCalculatorService.html#PERCENT_OFF_TYPE">PERCENT_OFF_TYPE</A></CODE></TD>
</TR>
</TABLE>
&nbsp;<A NAME="fields_inherited_from_class_atg.nucleus.GenericService"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TD><B>Fields inherited from class atg.nucleus.<A HREF="../../../atg/nucleus/GenericService.html" title="class in atg.nucleus">GenericService</A></B></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="../../../atg/nucleus/GenericService.html#SERVICE_INFO_KEY">SERVICE_INFO_KEY</A></CODE></TD>
</TR>
</TABLE>
&nbsp;<A NAME="fields_inherited_from_class_atg.nucleus.logging.ApplicationLogging"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TD><B>Fields inherited from interface atg.nucleus.logging.<A HREF="../../../atg/nucleus/logging/ApplicationLogging.html" title="interface in atg.nucleus.logging">ApplicationLogging</A></B></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="../../../atg/nucleus/logging/ApplicationLogging.html#DEFAULT_LOG_DEBUG_STATUS">DEFAULT_LOG_DEBUG_STATUS</A>, <A HREF="../../../atg/nucleus/logging/ApplicationLogging.html#DEFAULT_LOG_ERROR_STATUS">DEFAULT_LOG_ERROR_STATUS</A>, <A HREF="../../../atg/nucleus/logging/ApplicationLogging.html#DEFAULT_LOG_INFO_STATUS">DEFAULT_LOG_INFO_STATUS</A>, <A HREF="../../../atg/nucleus/logging/ApplicationLogging.html#DEFAULT_LOG_WARNING_STATUS">DEFAULT_LOG_WARNING_STATUS</A></CODE></TD>
</TR>
</TABLE>
&nbsp;
<!-- ======== CONSTRUCTOR SUMMARY ======== -->

<A NAME="constructor_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Constructor Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><B><A HREF="../../../atg/commerce/pricing/OrderDiscountCalculator.html#OrderDiscountCalculator()">OrderDiscountCalculator</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
</TABLE>
&nbsp;
<!-- ========== METHOD SUMMARY =========== -->

<A NAME="method_summary"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=2><FONT SIZE="+2">
<B>Method Summary</B></FONT></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;double</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../atg/commerce/pricing/OrderDiscountCalculator.html#computeGroupSubtotal(long, int, double, double, java.lang.String, java.lang.String)">computeGroupSubtotal</A></B>(long&nbsp;pTimesToDiscount,
                     int&nbsp;pNumberOfGroups,
                     double&nbsp;pGroupSubTotal,
                     double&nbsp;pAdjuster,
                     java.lang.String&nbsp;pDiscountType,
                     java.lang.String&nbsp;pId)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Computes a shippinggroup subtotal based on the type of discount given.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;double</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../atg/commerce/pricing/OrderDiscountCalculator.html#computeGroupSubtotal(long, int, double, double, java.lang.String, java.lang.String, double)">computeGroupSubtotal</A></B>(long&nbsp;pTimesToDiscount,
                     int&nbsp;pNumberOfGroups,
                     double&nbsp;pGroupSubTotal,
                     double&nbsp;pAdjuster,
                     java.lang.String&nbsp;pDiscountType,
                     java.lang.String&nbsp;pOrderId,
                     double&nbsp;pOldOrderAmount)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Computes a shippinggroup subtotal based on the type of discount given.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../atg/commerce/pricing/OrderDiscountCalculator.html#doStartService()">doStartService</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This is called after a Service has been created, placed into the
 naming hierarchy, and initialized with its configured property
 values.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;double</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../atg/commerce/pricing/OrderDiscountCalculator.html#getAmountToDiscount(atg.commerce.pricing.OrderPriceInfo, atg.commerce.order.Order, atg.repository.RepositoryItem, java.util.Locale, atg.repository.RepositoryItem, java.util.Map)">getAmountToDiscount</A></B>(<A HREF="../../../atg/commerce/pricing/OrderPriceInfo.html" title="class in atg.commerce.pricing">OrderPriceInfo</A>&nbsp;pPriceQuote,
                    <A HREF="../../../atg/commerce/order/Order.html" title="interface in atg.commerce.order">Order</A>&nbsp;pOrder,
                    <A HREF="../../../atg/repository/RepositoryItem.html" title="interface in atg.repository">RepositoryItem</A>&nbsp;pPricingModel,
                    java.util.Locale&nbsp;pLocale,
                    <A HREF="../../../atg/repository/RepositoryItem.html" title="interface in atg.repository">RepositoryItem</A>&nbsp;pProfile,
                    java.util.Map&nbsp;pExtraParameters)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This will return the amount that will eventually be discounted.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;java.util.List</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../atg/commerce/pricing/OrderDiscountCalculator.html#getDetailsToReceiveDiscountShare(atg.commerce.pricing.ItemPriceInfo)">getDetailsToReceiveDiscountShare</A></B>(<A HREF="../../../atg/commerce/pricing/ItemPriceInfo.html" title="class in atg.commerce.pricing">ItemPriceInfo</A>&nbsp;pItemPriceInfo)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This will return the price details in an item price info that will be marked as receiving a share of the 
 order discount.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;java.util.List</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../atg/commerce/pricing/OrderDiscountCalculator.html#getItemsToReceiveDiscountShare(atg.commerce.order.Order)">getItemsToReceiveDiscountShare</A></B>(<A HREF="../../../atg/commerce/order/Order.html" title="interface in atg.commerce.order">Order</A>&nbsp;pOrder)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This will return the items in an order that will be marked as receiving a share of the 
 order discount.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;<A HREF="../../../atg/commerce/pricing/PricingTools.html" title="class in atg.commerce.pricing">PricingTools</A></CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../atg/commerce/pricing/OrderDiscountCalculator.html#getPricingTools()">getPricingTools</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pricing tools to help with calculating prices</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../atg/commerce/pricing/OrderDiscountCalculator.html#isSaveDetailsOrderDiscountShare()">isSaveDetailsOrderDiscountShare</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If this is true, update itemPriceInfo.orderDiscountShare</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;boolean</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../atg/commerce/pricing/OrderDiscountCalculator.html#isSaveItemsOrderDiscountShare()">isSaveItemsOrderDiscountShare</A></B>()</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;If this is true, update itemPriceInfo.orderDiscountShare</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../atg/commerce/pricing/OrderDiscountCalculator.html#priceOrder(atg.commerce.pricing.OrderPriceInfo, atg.commerce.order.Order, atg.repository.RepositoryItem, java.util.Locale, atg.repository.RepositoryItem, java.util.Map)">priceOrder</A></B>(<A HREF="../../../atg/commerce/pricing/OrderPriceInfo.html" title="class in atg.commerce.pricing">OrderPriceInfo</A>&nbsp;pPriceQuote,
           <A HREF="../../../atg/commerce/order/Order.html" title="interface in atg.commerce.order">Order</A>&nbsp;pOrder,
           <A HREF="../../../atg/repository/RepositoryItem.html" title="interface in atg.repository">RepositoryItem</A>&nbsp;pPricingModel,
           java.util.Locale&nbsp;pLocale,
           <A HREF="../../../atg/repository/RepositoryItem.html" title="interface in atg.repository">RepositoryItem</A>&nbsp;pProfile,
           java.util.Map&nbsp;pExtraParameters)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;Price a single order within a context defined by the input parameters.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../atg/commerce/pricing/OrderDiscountCalculator.html#setPricingTools(atg.commerce.pricing.PricingTools)">setPricingTools</A></B>(<A HREF="../../../atg/commerce/pricing/PricingTools.html" title="class in atg.commerce.pricing">PricingTools</A>&nbsp;pPricingTools)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;pricing tools to help with calculating prices</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../atg/commerce/pricing/OrderDiscountCalculator.html#setSaveDetailsOrderDiscountShare(boolean)">setSaveDetailsOrderDiscountShare</A></B>(boolean&nbsp;pSaveDetailsOrderDiscountShare)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>&nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../atg/commerce/pricing/OrderDiscountCalculator.html#setSaveItemsOrderDiscountShare(boolean)">setSaveItemsOrderDiscountShare</A></B>(boolean&nbsp;pSaveItemsOrderDiscountShare)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;void</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../atg/commerce/pricing/OrderDiscountCalculator.html#updateItemsDiscountShare(atg.commerce.order.Order, double, double, double, java.lang.String, long)">updateItemsDiscountShare</A></B>(<A HREF="../../../atg/commerce/order/Order.html" title="interface in atg.commerce.order">Order</A>&nbsp;pOrder,
                         double&nbsp;pUnadjustedPrice,
                         double&nbsp;pTotalAdjustment,
                         double&nbsp;pAdjuster,
                         java.lang.String&nbsp;pDiscountType,
                         long&nbsp;pTimesToDiscount)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;This method will set the orderDiscountShare property of each
 CommerceItem's priceInfo.</TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD ALIGN="right" VALIGN="top" WIDTH="1%"><FONT SIZE="-1">
<CODE>protected &nbsp;double</CODE></FONT></TD>
<TD><CODE><B><A HREF="../../../atg/commerce/pricing/OrderDiscountCalculator.html#updateShippingItemsSubtotalMaps(double, double, atg.commerce.pricing.definition.MatchingObject, double, java.lang.String, atg.commerce.pricing.OrderPriceInfo, atg.commerce.order.Order, atg.repository.RepositoryItem, java.util.Map)">updateShippingItemsSubtotalMaps</A></B>(double&nbsp;pOrderSubTotal,
                                double&nbsp;pOldOrderAmount,
                                <A HREF="../../../atg/commerce/pricing/definition/MatchingObject.html" title="class in atg.commerce.pricing.definition">MatchingObject</A>&nbsp;pQualifier,
                                double&nbsp;pAdjuster,
                                java.lang.String&nbsp;pDiscountType,
                                <A HREF="../../../atg/commerce/pricing/OrderPriceInfo.html" title="class in atg.commerce.pricing">OrderPriceInfo</A>&nbsp;pPriceQuote,
                                <A HREF="../../../atg/commerce/order/Order.html" title="interface in atg.commerce.order">Order</A>&nbsp;pOrder,
                                <A HREF="../../../atg/repository/RepositoryItem.html" title="interface in atg.repository">RepositoryItem</A>&nbsp;pPricingModel,
                                java.util.Map&nbsp;pExtraParameters)</CODE>

<BR>
&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;These method will iterate through each of the maps in the OrderPriceInfo that contain
 shipping group subtotal information.</TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_atg.commerce.pricing.DiscountCalculatorService"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TD><B>Methods inherited from class atg.commerce.pricing.<A HREF="../../../atg/commerce/pricing/DiscountCalculatorService.html" title="class in atg.commerce.pricing">DiscountCalculatorService</A></B></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="../../../atg/commerce/pricing/DiscountCalculatorService.html#adjust(double, double, java.lang.String, java.lang.String)">adjust</A>, <A HREF="../../../atg/commerce/pricing/DiscountCalculatorService.html#getPricingModelProperties()">getPricingModelProperties</A>, <A HREF="../../../atg/commerce/pricing/DiscountCalculatorService.html#getQualifierService()">getQualifierService</A>, <A HREF="../../../atg/commerce/pricing/DiscountCalculatorService.html#isNegativeAmountException()">isNegativeAmountException</A>, <A HREF="../../../atg/commerce/pricing/DiscountCalculatorService.html#setNegativeAmountException(boolean)">setNegativeAmountException</A>, <A HREF="../../../atg/commerce/pricing/DiscountCalculatorService.html#setPricingModelProperties(atg.commerce.pricing.PricingModelProperties)">setPricingModelProperties</A>, <A HREF="../../../atg/commerce/pricing/DiscountCalculatorService.html#setQualifierService(atg.commerce.pricing.Qualifier)">setQualifierService</A></CODE></TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_atg.nucleus.GenericService"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TD><B>Methods inherited from class atg.nucleus.<A HREF="../../../atg/nucleus/GenericService.html" title="class in atg.nucleus">GenericService</A></B></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE><A HREF="../../../atg/nucleus/GenericService.html#addLogListener(atg.nucleus.logging.LogListener)">addLogListener</A>, <A HREF="../../../atg/nucleus/GenericService.html#createAdminServlet()">createAdminServlet</A>, <A HREF="../../../atg/nucleus/GenericService.html#doStopService()">doStopService</A>, <A HREF="../../../atg/nucleus/GenericService.html#getAbsoluteName()">getAbsoluteName</A>, <A HREF="../../../atg/nucleus/GenericService.html#getAdminServlet()">getAdminServlet</A>, <A HREF="../../../atg/nucleus/GenericService.html#getLogListenerCount()">getLogListenerCount</A>, <A HREF="../../../atg/nucleus/GenericService.html#getLogListeners()">getLogListeners</A>, <A HREF="../../../atg/nucleus/GenericService.html#getName()">getName</A>, <A HREF="../../../atg/nucleus/GenericService.html#getNameContext()">getNameContext</A>, <A HREF="../../../atg/nucleus/GenericService.html#getNucleus()">getNucleus</A>, <A HREF="../../../atg/nucleus/GenericService.html#getRoot()">getRoot</A>, <A HREF="../../../atg/nucleus/GenericService.html#getServiceConfiguration()">getServiceConfiguration</A>, <A HREF="../../../atg/nucleus/GenericService.html#getServiceInfo()">getServiceInfo</A>, <A HREF="../../../atg/nucleus/GenericService.html#isLoggingDebug()">isLoggingDebug</A>, <A HREF="../../../atg/nucleus/GenericService.html#isLoggingError()">isLoggingError</A>, <A HREF="../../../atg/nucleus/GenericService.html#isLoggingInfo()">isLoggingInfo</A>, <A HREF="../../../atg/nucleus/GenericService.html#isLoggingWarning()">isLoggingWarning</A>, <A HREF="../../../atg/nucleus/GenericService.html#isRunning()">isRunning</A>, <A HREF="../../../atg/nucleus/GenericService.html#logDebug(java.lang.String)">logDebug</A>, <A HREF="../../../atg/nucleus/GenericService.html#logDebug(java.lang.String, java.lang.Throwable)">logDebug</A>, <A HREF="../../../atg/nucleus/GenericService.html#logDebug(java.lang.Throwable)">logDebug</A>, <A HREF="../../../atg/nucleus/GenericService.html#logError(java.lang.String)">logError</A>, <A HREF="../../../atg/nucleus/GenericService.html#logError(java.lang.String, java.lang.Throwable)">logError</A>, <A HREF="../../../atg/nucleus/GenericService.html#logError(java.lang.Throwable)">logError</A>, <A HREF="../../../atg/nucleus/GenericService.html#logInfo(java.lang.String)">logInfo</A>, <A HREF="../../../atg/nucleus/GenericService.html#logInfo(java.lang.String, java.lang.Throwable)">logInfo</A>, <A HREF="../../../atg/nucleus/GenericService.html#logInfo(java.lang.Throwable)">logInfo</A>, <A HREF="../../../atg/nucleus/GenericService.html#logWarning(java.lang.String)">logWarning</A>, <A HREF="../../../atg/nucleus/GenericService.html#logWarning(java.lang.String, java.lang.Throwable)">logWarning</A>, <A HREF="../../../atg/nucleus/GenericService.html#logWarning(java.lang.Throwable)">logWarning</A>, <A HREF="../../../atg/nucleus/GenericService.html#nameContextElementBound(atg.naming.NameContextBindingEvent)">nameContextElementBound</A>, <A HREF="../../../atg/nucleus/GenericService.html#nameContextElementUnbound(atg.naming.NameContextBindingEvent)">nameContextElementUnbound</A>, <A HREF="../../../atg/nucleus/GenericService.html#removeLogListener(atg.nucleus.logging.LogListener)">removeLogListener</A>, <A HREF="../../../atg/nucleus/GenericService.html#resolveName(atg.nucleus.naming.ComponentName)">resolveName</A>, <A HREF="../../../atg/nucleus/GenericService.html#resolveName(atg.nucleus.naming.ComponentName, boolean)">resolveName</A>, <A HREF="../../../atg/nucleus/GenericService.html#resolveName(java.lang.String)">resolveName</A>, <A HREF="../../../atg/nucleus/GenericService.html#resolveName(java.lang.String, boolean)">resolveName</A>, <A HREF="../../../atg/nucleus/GenericService.html#sendLogEvent(atg.nucleus.logging.LogEvent)">sendLogEvent</A>, <A HREF="../../../atg/nucleus/GenericService.html#setLoggingDebug(boolean)">setLoggingDebug</A>, <A HREF="../../../atg/nucleus/GenericService.html#setLoggingError(boolean)">setLoggingError</A>, <A HREF="../../../atg/nucleus/GenericService.html#setLoggingInfo(boolean)">setLoggingInfo</A>, <A HREF="../../../atg/nucleus/GenericService.html#setLoggingWarning(boolean)">setLoggingWarning</A>, <A HREF="../../../atg/nucleus/GenericService.html#setServiceInfo(java.lang.String)">setServiceInfo</A>, <A HREF="../../../atg/nucleus/GenericService.html#startService(atg.nucleus.ServiceEvent)">startService</A>, <A HREF="../../../atg/nucleus/GenericService.html#stopService()">stopService</A></CODE></TD>
</TR>
</TABLE>
&nbsp;<A NAME="methods_inherited_from_class_java.lang.Object"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#EEEEFF" CLASS="TableSubHeadingColor">
<TD><B>Methods inherited from class java.lang.Object</B></TD>
</TR>
<TR BGCOLOR="white" CLASS="TableRowColor">
<TD><CODE>clone, equals, finalize, getClass, hashCode, notify, notifyAll, toString, wait, wait, wait</CODE></TD>
</TR>
</TABLE>
&nbsp;
<P>

<!-- ============ FIELD DETAIL =========== -->

<A NAME="field_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=1><FONT SIZE="+2">
<B>Field Detail</B></FONT></TD>
</TR>
</TABLE>

<A NAME="CLASS_VERSION"><!-- --></A><H3>
CLASS_VERSION</H3>
<PRE>
public static java.lang.String <B>CLASS_VERSION</B></PRE>
<DL>
<DD>Class version string
<P>
<DL>
</DL>
</DL>

<!-- ========= CONSTRUCTOR DETAIL ======== -->

<A NAME="constructor_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=1><FONT SIZE="+2">
<B>Constructor Detail</B></FONT></TD>
</TR>
</TABLE>

<A NAME="OrderDiscountCalculator()"><!-- --></A><H3>
OrderDiscountCalculator</H3>
<PRE>
public <B>OrderDiscountCalculator</B>()</PRE>
<DL>
</DL>

<!-- ============ METHOD DETAIL ========== -->

<A NAME="method_detail"><!-- --></A>
<TABLE BORDER="1" WIDTH="100%" CELLPADDING="3" CELLSPACING="0" SUMMARY="">
<TR BGCOLOR="#CCCCFF" CLASS="TableHeadingColor">
<TD COLSPAN=1><FONT SIZE="+2">
<B>Method Detail</B></FONT></TD>
</TR>
</TABLE>

<A NAME="setPricingTools(atg.commerce.pricing.PricingTools)"><!-- --></A><H3>
setPricingTools</H3>
<PRE>
public void <B>setPricingTools</B>(<A HREF="../../../atg/commerce/pricing/PricingTools.html" title="class in atg.commerce.pricing">PricingTools</A>&nbsp;pPricingTools)</PRE>
<DL>
<DD>pricing tools to help with calculating prices
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>pPricingTools</CODE> - new value to set</DL>
</DD>
</DL>
<HR>

<A NAME="getPricingTools()"><!-- --></A><H3>
getPricingTools</H3>
<PRE>
public <A HREF="../../../atg/commerce/pricing/PricingTools.html" title="class in atg.commerce.pricing">PricingTools</A> <B>getPricingTools</B>()</PRE>
<DL>
<DD>pricing tools to help with calculating prices
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>property PricingTools</DL>
</DD>
</DL>
<HR>

<A NAME="setSaveItemsOrderDiscountShare(boolean)"><!-- --></A><H3>
setSaveItemsOrderDiscountShare</H3>
<PRE>
public void <B>setSaveItemsOrderDiscountShare</B>(boolean&nbsp;pSaveItemsOrderDiscountShare)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="isSaveItemsOrderDiscountShare()"><!-- --></A><H3>
isSaveItemsOrderDiscountShare</H3>
<PRE>
public boolean <B>isSaveItemsOrderDiscountShare</B>()</PRE>
<DL>
<DD>If this is true, update itemPriceInfo.orderDiscountShare
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="setSaveDetailsOrderDiscountShare(boolean)"><!-- --></A><H3>
setSaveDetailsOrderDiscountShare</H3>
<PRE>
public void <B>setSaveDetailsOrderDiscountShare</B>(boolean&nbsp;pSaveDetailsOrderDiscountShare)</PRE>
<DL>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="isSaveDetailsOrderDiscountShare()"><!-- --></A><H3>
isSaveDetailsOrderDiscountShare</H3>
<PRE>
public boolean <B>isSaveDetailsOrderDiscountShare</B>()</PRE>
<DL>
<DD>If this is true, update itemPriceInfo.orderDiscountShare
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
</DL>
</DD>
</DL>
<HR>

<A NAME="priceOrder(atg.commerce.pricing.OrderPriceInfo, atg.commerce.order.Order, atg.repository.RepositoryItem, java.util.Locale, atg.repository.RepositoryItem, java.util.Map)"><!-- --></A><H3>
priceOrder</H3>
<PRE>
public void <B>priceOrder</B>(<A HREF="../../../atg/commerce/pricing/OrderPriceInfo.html" title="class in atg.commerce.pricing">OrderPriceInfo</A>&nbsp;pPriceQuote,
                       <A HREF="../../../atg/commerce/order/Order.html" title="interface in atg.commerce.order">Order</A>&nbsp;pOrder,
                       <A HREF="../../../atg/repository/RepositoryItem.html" title="interface in atg.repository">RepositoryItem</A>&nbsp;pPricingModel,
                       java.util.Locale&nbsp;pLocale,
                       <A HREF="../../../atg/repository/RepositoryItem.html" title="interface in atg.repository">RepositoryItem</A>&nbsp;pProfile,
                       java.util.Map&nbsp;pExtraParameters)
                throws <A HREF="../../../atg/commerce/pricing/PricingException.html" title="class in atg.commerce.pricing">PricingException</A></PRE>
<DL>
<DD>Price a single order within a context defined by the input parameters.  The order's
 price is adjusted as well as the shipping group subtotals.
<P>
<DD><DL>
<DT><B>Specified by:</B><DD><CODE><A HREF="../../../atg/commerce/pricing/OrderPricingCalculator.html#priceOrder(atg.commerce.pricing.OrderPriceInfo, atg.commerce.order.Order, atg.repository.RepositoryItem, java.util.Locale, atg.repository.RepositoryItem, java.util.Map)">priceOrder</A></CODE> in interface <CODE><A HREF="../../../atg/commerce/pricing/OrderPricingCalculator.html" title="interface in atg.commerce.pricing">OrderPricingCalculator</A></CODE></DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>pPriceQuote</CODE> - OrderPriceInfo representing the current price quote for the order<DD><CODE>pOrder</CODE> - The order to price<DD><CODE>pPricingModel</CODE> - A RepositoryItems representing a PricingModel<DD><CODE>pProfile</CODE> - The user's profile<DD><CODE>pExtraParameters</CODE> - A Map of extra parameters to be used in the pricing, may be null
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../atg/commerce/pricing/PricingException.html" title="class in atg.commerce.pricing">PricingException</A></CODE><DT><B>See Also:</B><DD><A HREF="../../../atg/commerce/pricing/OrderDiscountCalculator.html#updateShippingItemsSubtotalMaps(double, double, atg.commerce.pricing.definition.MatchingObject, double, java.lang.String, atg.commerce.pricing.OrderPriceInfo, atg.commerce.order.Order, atg.repository.RepositoryItem, java.util.Map)"><CODE>updateShippingItemsSubtotalMaps(double, double, atg.commerce.pricing.definition.MatchingObject, double, java.lang.String, atg.commerce.pricing.OrderPriceInfo, atg.commerce.order.Order, atg.repository.RepositoryItem, java.util.Map)</CODE></A></DL>
</DD>
</DL>
<HR>

<A NAME="updateShippingItemsSubtotalMaps(double, double, atg.commerce.pricing.definition.MatchingObject, double, java.lang.String, atg.commerce.pricing.OrderPriceInfo, atg.commerce.order.Order, atg.repository.RepositoryItem, java.util.Map)"><!-- --></A><H3>
updateShippingItemsSubtotalMaps</H3>
<PRE>
protected double <B>updateShippingItemsSubtotalMaps</B>(double&nbsp;pOrderSubTotal,
                                                 double&nbsp;pOldOrderAmount,
                                                 <A HREF="../../../atg/commerce/pricing/definition/MatchingObject.html" title="class in atg.commerce.pricing.definition">MatchingObject</A>&nbsp;pQualifier,
                                                 double&nbsp;pAdjuster,
                                                 java.lang.String&nbsp;pDiscountType,
                                                 <A HREF="../../../atg/commerce/pricing/OrderPriceInfo.html" title="class in atg.commerce.pricing">OrderPriceInfo</A>&nbsp;pPriceQuote,
                                                 <A HREF="../../../atg/commerce/order/Order.html" title="interface in atg.commerce.order">Order</A>&nbsp;pOrder,
                                                 <A HREF="../../../atg/repository/RepositoryItem.html" title="interface in atg.repository">RepositoryItem</A>&nbsp;pPricingModel,
                                                 java.util.Map&nbsp;pExtraParameters)
                                          throws <A HREF="../../../atg/commerce/pricing/PricingException.html" title="class in atg.commerce.pricing">PricingException</A></PRE>
<DL>
<DD>These method will iterate through each of the maps in the OrderPriceInfo that contain
 shipping group subtotal information.  These include:
 <ul>
  <li><code>taxableShippingItemsSubtotalPriceInfos</code>
  <li><code>nonTaxableShippingItemsSubtotalPriceInfos</code>
  <li><code>shippingItemsSubtotalPriceInfos</code>
 </ul>
 For each of entry in each of these maps, <code>computeGroupSubtotal</code> is called.  The amount
 of the price info in the entry is set to this value, the info is marked discounted, and 
 a new adjustement is added to the info
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>pOrderSubTotal</CODE> - The new subtotal of the order<DD><CODE>pOldOrderAmount</CODE> - The previous subtotal of the order<DD><CODE>pQualifier</CODE> - The MatchingObject as returned by Qualifier.evaluateQualifier<DD><CODE>pAdjuster</CODE> - The adjuster of the promotion<DD><CODE>pDiscountType</CODE> - The type of discount being given<DD><CODE>pPriceQuote</CODE> - The order's price info<DD><CODE>pOrder</CODE> - The order that was discounted<DD><CODE>pPricingModel</CODE> - The promotion that changed the price of the order<DD><CODE>pExtraParameters</CODE> - Any extra parameters
<DT><B>Returns:</B><DD>The new subtotal of the order.  This is the sum of the shipping group subtotals
         and should match pOrderSubTotal
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../atg/commerce/pricing/PricingException.html" title="class in atg.commerce.pricing">PricingException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="computeGroupSubtotal(long, int, double, double, java.lang.String, java.lang.String)"><!-- --></A><H3>
computeGroupSubtotal</H3>
<PRE>
protected double <B>computeGroupSubtotal</B>(long&nbsp;pTimesToDiscount,
                                      int&nbsp;pNumberOfGroups,
                                      double&nbsp;pGroupSubTotal,
                                      double&nbsp;pAdjuster,
                                      java.lang.String&nbsp;pDiscountType,
                                      java.lang.String&nbsp;pId)
                               throws <A HREF="../../../atg/commerce/pricing/PricingException.html" title="class in atg.commerce.pricing">PricingException</A></PRE>
<DL>
<DD>Computes a shippinggroup subtotal based on the type of discount given.
 The logic is as follows:
 <p>
 <ul>
  <li>If the discount is a percent off, the percent adjuster is applied to
      the group's price.
  <li>If the discount is an amount off, the adjuster is divided by the number of groups,
      and [adjuster/n] is applied to the group price.
  <li>If the discount is a fixed amount, the adjuster is divided by the number of groups,
      and the group price is set to [adjuster/n]
 </ul>

 If functionality other than that described above, this method can be overridden to
 do that which is necessary.  For example, rather than spreading out amount off discounts
 across all shippingGroups, some implementations might want the first ShippingGroup to
 get the full benefit of the discount.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>pTimesToDiscount</CODE> - the number of times we should apply the configured discount<DD><CODE>pNumberOfGroups</CODE> - the number of groups in the order, including the one for which
        this method is computing a subtotal<DD><CODE>pGroupSubTotal</CODE> - is the subtotal that needs adjusting<DD><CODE>pAdjuster</CODE> - is the amount by which to adjust pGroupSubTotal<DD><CODE>pDiscountType</CODE> - the way in which pAdjuster is applied to pGroupSubTotal.  May be one of:
        "Fixed Price", "Amount Off", or "Percent Off".<DD><CODE>pId</CODE> - an ID to associate with this adjustment for error reporting
<DT><B>Returns:</B><DD>the adjusted subtotal for the input pGroupSubTotal
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../atg/commerce/pricing/PricingException.html" title="class in atg.commerce.pricing">PricingException</A></CODE> - if there was a problem computing the group subtotal</DL>
</DD>
</DL>
<HR>

<A NAME="computeGroupSubtotal(long, int, double, double, java.lang.String, java.lang.String, double)"><!-- --></A><H3>
computeGroupSubtotal</H3>
<PRE>
protected double <B>computeGroupSubtotal</B>(long&nbsp;pTimesToDiscount,
                                      int&nbsp;pNumberOfGroups,
                                      double&nbsp;pGroupSubTotal,
                                      double&nbsp;pAdjuster,
                                      java.lang.String&nbsp;pDiscountType,
                                      java.lang.String&nbsp;pOrderId,
                                      double&nbsp;pOldOrderAmount)
                               throws <A HREF="../../../atg/commerce/pricing/PricingException.html" title="class in atg.commerce.pricing">PricingException</A></PRE>
<DL>
<DD>Computes a shippinggroup subtotal based on the type of discount given.
 The logic is as follows:
 <p>
 <ul>
  <li>If the discount is a percent off, the percent adjuster is applied to
      the group's price.
  <li>If the discount is an amount off, the adjuster is divided by the number of groups,
      and [adjuster/n] is applied to the group price.
  <li>If the discount is a fixed amount, the adjuster is divided by the number of groups,
      and the group price is set to [adjuster/n]
 </ul>

 If functionality other than that described above, this method can be overridden to
 do that which is necessary.  For example, rather than spreading out amount off discounts
 across all shippingGroups, some implementations might want the first ShippingGroup to
 get the full benefit of the discount.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>pTimesToDiscount</CODE> - the number of times we should apply the configured discount<DD><CODE>pNumberOfGroups</CODE> - the number of groups in the order, including the one for which
        this method is computing a subtotal<DD><CODE>pGroupSubTotal</CODE> - is the subtotal that needs adjusting<DD><CODE>pAdjuster</CODE> - is the amount by which to adjust pGroupSubTotal<DD><CODE>pDiscountType</CODE> - the way in which pAdjuster is applied to pGroupSubTotal.  May be one of:
        "Fixed Price", "Amount Off", or "Percent Off".
<DT><B>Returns:</B><DD>the adjusted subtotal for the input pGroupSubTotal
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../atg/commerce/pricing/PricingException.html" title="class in atg.commerce.pricing">PricingException</A></CODE> - if there was a problem computing the group subtotal</DL>
</DD>
</DL>
<HR>

<A NAME="updateItemsDiscountShare(atg.commerce.order.Order, double, double, double, java.lang.String, long)"><!-- --></A><H3>
updateItemsDiscountShare</H3>
<PRE>
protected void <B>updateItemsDiscountShare</B>(<A HREF="../../../atg/commerce/order/Order.html" title="interface in atg.commerce.order">Order</A>&nbsp;pOrder,
                                        double&nbsp;pUnadjustedPrice,
                                        double&nbsp;pTotalAdjustment,
                                        double&nbsp;pAdjuster,
                                        java.lang.String&nbsp;pDiscountType,
                                        long&nbsp;pTimesToDiscount)
                                 throws <A HREF="../../../atg/commerce/pricing/PricingException.html" title="class in atg.commerce.pricing">PricingException</A></PRE>
<DL>
<DD>This method will set the orderDiscountShare property of each
 CommerceItem's priceInfo.  This happens if <code>saveItemsOrderDiscountShare</code>
 is true.  If <code>saveDetailsOrderDiscountShare</code> is true, then the 
 orderDiscountShare property of each DetailedItemPriceInfo is also updated.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>pOrder</CODE> - the order that was discounted<DD><CODE>pUnadjustedPrice</CODE> - The original pre-discount price of the order<DD><CODE>pTotalAdjustment</CODE> - This is the total change to the order total, for the current promotion<DD><CODE>pAdjuster</CODE> - The size of the discount<DD><CODE>pDiscountType</CODE> - the way in which pAdjuster is applied to pGroupSubTotal.  May be one of:
        "Fixed Price", "Amount Off", or "Percent Off".<DD><CODE>pTimesToDiscount</CODE> - The number of times to apply the given discount
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../atg/commerce/pricing/PricingException.html" title="class in atg.commerce.pricing">PricingException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="getAmountToDiscount(atg.commerce.pricing.OrderPriceInfo, atg.commerce.order.Order, atg.repository.RepositoryItem, java.util.Locale, atg.repository.RepositoryItem, java.util.Map)"><!-- --></A><H3>
getAmountToDiscount</H3>
<PRE>
protected double <B>getAmountToDiscount</B>(<A HREF="../../../atg/commerce/pricing/OrderPriceInfo.html" title="class in atg.commerce.pricing">OrderPriceInfo</A>&nbsp;pPriceQuote,
                                     <A HREF="../../../atg/commerce/order/Order.html" title="interface in atg.commerce.order">Order</A>&nbsp;pOrder,
                                     <A HREF="../../../atg/repository/RepositoryItem.html" title="interface in atg.repository">RepositoryItem</A>&nbsp;pPricingModel,
                                     java.util.Locale&nbsp;pLocale,
                                     <A HREF="../../../atg/repository/RepositoryItem.html" title="interface in atg.repository">RepositoryItem</A>&nbsp;pProfile,
                                     java.util.Map&nbsp;pExtraParameters)
                              throws <A HREF="../../../atg/commerce/pricing/PricingException.html" title="class in atg.commerce.pricing">PricingException</A></PRE>
<DL>
<DD>This will return the amount that will eventually be discounted.  This will 
 be priceQuote.amount by default (and there will usually be no need to change this.)
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>pPriceQuote</CODE> - OrderPriceInfo representing the current price quote for the order<DD><CODE>pOrder</CODE> - The order that will be discounted (ignored by default)<DD><CODE>pPricingModel</CODE> - A RepositoryItems representing a PricingModel (ignored by default)<DD><CODE>pProfile</CODE> - The user's profile (ignored by default)<DD><CODE>pExtraParameters</CODE> - A Map of extra parameters to be used in the pricing, may be null (ignored by default)
<DT><B>Returns:</B><DD>The amount to discount... defaults to pPriceQuote.getAmount()
<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../atg/commerce/pricing/PricingException.html" title="class in atg.commerce.pricing">PricingException</A></CODE></DL>
</DD>
</DL>
<HR>

<A NAME="getDetailsToReceiveDiscountShare(atg.commerce.pricing.ItemPriceInfo)"><!-- --></A><H3>
getDetailsToReceiveDiscountShare</H3>
<PRE>
protected java.util.List <B>getDetailsToReceiveDiscountShare</B>(<A HREF="../../../atg/commerce/pricing/ItemPriceInfo.html" title="class in atg.commerce.pricing">ItemPriceInfo</A>&nbsp;pItemPriceInfo)</PRE>
<DL>
<DD>This will return the price details in an item price info that will be marked as receiving a share of the 
 order discount.  This will be all price details with a non-zero amount.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>

<DT><B>Returns:</B><DD>The list of items to be marked for receiving a share of the order discount</DL>
</DD>
</DL>
<HR>

<A NAME="getItemsToReceiveDiscountShare(atg.commerce.order.Order)"><!-- --></A><H3>
getItemsToReceiveDiscountShare</H3>
<PRE>
protected java.util.List <B>getItemsToReceiveDiscountShare</B>(<A HREF="../../../atg/commerce/order/Order.html" title="interface in atg.commerce.order">Order</A>&nbsp;pOrder)</PRE>
<DL>
<DD>This will return the items in an order that will be marked as receiving a share of the 
 order discount.  This will be all items in the order with a non-zero price.
<P>
<DD><DL>
</DL>
</DD>
<DD><DL>
<DT><B>Parameters:</B><DD><CODE>pOrder</CODE> - The order that will be discounted
<DT><B>Returns:</B><DD>The list of items to be marked for receiving a share of the order discount</DL>
</DD>
</DL>
<HR>

<A NAME="doStartService()"><!-- --></A><H3>
doStartService</H3>
<PRE>
public void <B>doStartService</B>()
                    throws <A HREF="../../../atg/nucleus/ServiceException.html" title="class in atg.nucleus">ServiceException</A></PRE>
<DL>
<DD><B>Description copied from class: <CODE><A HREF="../../../atg/nucleus/GenericService.html" title="class in atg.nucleus">GenericService</A></CODE></B></DD>
<DD>This is called after a Service has been created, placed into the
 naming hierarchy, and initialized with its configured property
 values.  The Service should override this method to start any
 processes it requires.
<P>
<DD><DL>
<DT><B>Overrides:</B><DD><CODE><A HREF="../../../atg/nucleus/GenericService.html#doStartService()">doStartService</A></CODE> in class <CODE><A HREF="../../../atg/nucleus/GenericService.html" title="class in atg.nucleus">GenericService</A></CODE></DL>
</DD>
<DD><DL>

<DT><B>Throws:</B>
<DD><CODE><A HREF="../../../atg/nucleus/ServiceException.html" title="class in atg.nucleus">ServiceException</A></CODE> - if the Service had a problem starting up</DL>
</DD>
</DL>
<!-- ========= END OF CLASS DATA ========= -->
<HR>


<!-- ======= START OF BOTTOM NAVBAR ====== -->
<A NAME="navbar_bottom"><!-- --></A>
<A HREF="#skip-navbar_bottom" title="Skip navigation links"></A>
<TABLE BORDER="0" WIDTH="100%" CELLPADDING="1" CELLSPACING="0" SUMMARY="">
<TR>
<TD COLSPAN=3 BGCOLOR="#EEEEFF" CLASS="NavBarCell1">
<A NAME="navbar_bottom_firstrow"><!-- --></A>
<TABLE BORDER="0" CELLPADDING="0" CELLSPACING="3" SUMMARY="">
  <TR ALIGN="center" VALIGN="top">
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../overview-summary.html"><FONT CLASS="NavBarFont1"><B>Overview</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-summary.html"><FONT CLASS="NavBarFont1"><B>Package</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#FFFFFF" CLASS="NavBarCell1Rev"> &nbsp;<FONT CLASS="NavBarFont1Rev"><B>Class</B></FONT>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="package-tree.html"><FONT CLASS="NavBarFont1"><B>Tree</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../deprecated-list.html"><FONT CLASS="NavBarFont1"><B>Deprecated</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../index-all.html"><FONT CLASS="NavBarFont1"><B>Index</B></FONT></A>&nbsp;</TD>
  <TD BGCOLOR="#EEEEFF" CLASS="NavBarCell1">    <A HREF="../../../help-doc.html"><FONT CLASS="NavBarFont1"><B>Help</B></FONT></A>&nbsp;</TD>
  </TR>
</TABLE>
</TD>
<TD ALIGN="right" VALIGN="top" ROWSPAN=3><EM>
</EM>
</TD>
</TR>

<TR>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
&nbsp;<A HREF="../../../atg/commerce/pricing/OrderClosenessQualifierEvaluator.html" title="class in atg.commerce.pricing"><B>PREV CLASS</B></A>&nbsp;
&nbsp;<A HREF="../../../atg/commerce/pricing/OrderPriceInfo.html" title="class in atg.commerce.pricing"><B>NEXT CLASS</B></A></FONT></TD>
<TD BGCOLOR="white" CLASS="NavBarCell2"><FONT SIZE="-2">
  <A HREF="../../../index.html" target="_top"><B>FRAMES</B></A>  &nbsp;
&nbsp;<A HREF="OrderDiscountCalculator.html" target="_top"><B>NO FRAMES</B></A>  &nbsp;
&nbsp;<SCRIPT type="text/javascript">
  <!--
  if(window==top) {
    document.writeln('<A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>');
  }
  //-->
</SCRIPT>
<NOSCRIPT>
  <A HREF="../../../allclasses-noframe.html"><B>All Classes</B></A>
</NOSCRIPT>

</FONT></TD>
</TR>
<TR>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
  SUMMARY:&nbsp;NESTED&nbsp;|&nbsp;<A HREF="#field_summary">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_summary">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_summary">METHOD</A></FONT></TD>
<TD VALIGN="top" CLASS="NavBarCell3"><FONT SIZE="-2">
DETAIL:&nbsp;<A HREF="#field_detail">FIELD</A>&nbsp;|&nbsp;<A HREF="#constructor_detail">CONSTR</A>&nbsp;|&nbsp;<A HREF="#method_detail">METHOD</A></FONT></TD>
</TR>
</TABLE>
<A NAME="skip-navbar_bottom"></A>
<!-- ======== END OF BOTTOM NAVBAR ======= -->

<HR>

</BODY>
</HTML>
