<!DOCTYPE html>
<html dir="ltr" lang="en-US">
  <head>
  	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  	<title>Getting Started With Cloud Provisioner — Documentation — Puppet Labs</title>
  	<link rel="alternate" type="application/atom+xml" title="Puppet Labs Documentation Updates" href="https://github.com/puppetlabs/puppet-docs/commits/master.atom">
    <link rel="alternate" type="application/atom+xml" title="Puppet Labs Blog Feed" href="http://puppetlabs.com/feed/atom/">
    <link rel='index' title='Puppet Labs Documentation' href='http://docs.puppetlabs.com' />
    <link rel='icon' href='./../favicon.ico' />

  <meta name="description" content="Getting Started With Puppet Cloud ProvisionerLearn how to install and start using Cloud Provisioner, Puppet&#8217;s extension fornode bootstrapping...">




    <!-- FIXME: absolute paths -->

    <script type='text/javascript' src='./../files/javascripts/html5.js'></script>
    <script type='text/javascript' src='./../files/javascripts/jquery-1.3.2.min.js'></script>
    <script type='text/javascript' src='./../files/javascripts/drop_down.js'></script>
    <script type='text/javascript' src='./../files/javascripts/cufon-yui.js'></script>
    <script type='text/javascript' src='./../files/fonts/Klavika_400-Klavika_600.font.js'></script>
    <script type='text/javascript' src='./../files/javascripts/ampersands.js'></script>
    <script type="text/javascript" src="http://puppetlabs.com/wp-content/themes/puppetlabs/javascripts/leadcapture.js"></script>

    <!-- All in One SEO Pack 1.6.10.1 by Michael Torbert of Semper Fi Web Design[127,146] -->
    <meta name="keywords" content="Puppet, puppet labs, reductive labs, open source, system administrator, ruby, data center, automation, support" />
    <!-- /all in one seo pack -->

    <!-- Give us the option of setting a canonical URL in yaml frontmatter -NF -->
    <link rel="canonical" href="http://docs.puppetlabs.com/guides/cloud_pack_getting_started.html" />

    <!-- FIXME: absolute paths -->

    <link rel="stylesheet" type="text/css" href="./../files/stylesheets/style_legacy.css" media="screen">
    <link rel="stylesheet" type="text/css" href="./../files/stylesheets/syntax.css" media="screen"> <!-- index -->
    <link rel="stylesheet" type="text/css" href="./../files/stylesheets/adbanner.css" media="screen">

    <!--[if IE 7]>
	  <link rel="stylesheet" type="text/css" href="./../files/stylesheets/ie_7.css" media="screen"> <!-- index -->
    <![endif]-->

    <!--[if IE 8]>
	    <link rel="stylesheet" type="text/css" href="./../files/stylesheets/ie_8.css" media="screen"> <!-- index -->
    <![endif]-->

  	<script type="text/javascript">
      Cufon.replace('h1, h2', { fontWeight: '600' });
  	</script>
</head>




  <body id="puppetlabsdocs" class="docs">
  <style type="text/css">h1, h2{ visibility : hidden }</style>
  <!--[if IE 8]>
    <style type="text/css">h1, h2{ visibility : visible }</style>
  <![endif]-->

  	<header id="header">
      <div class="site-width">
    		<h1><a href="http://puppetlabs.com/"><span>Puppet Labs</span></a></h1>
        <a class="screen-reader-content" href="#content">Skip navigation</a>
        <nav>
    		<ul id="global-navigation">
          <li id="puppet-tab" class="with-submenu">
            <a href="http://puppetlabs.com/puppet/puppet-enterprise">
              <span>Products</span>
              <span class="drop-down-trigger"></span>
            </a>
            <ul>
			<li>
                <ul>
                   <a href="http://puppetlabs.com/puppet/what-is-puppet/">What is Puppet?</a>
                </ul>
              </li>
			       <li>
                <ul>
                   <a href="http://puppetlabs.com/puppet/puppet-enterprise/">Puppet Enterprise</a>
                </ul>
              </li>
            <li>
                <ul>
                   <a href="http://puppetlabs.com/puppet/whats-new/">What's New in 2.5</a>
                </ul>
              </li>
            <li>
                <ul>
                   <a href="http://puppetlabs.com/puppet/puppet-open-source/">Puppet Open Source</a>
                </ul>
              </li>
            <li>
                <ul>
                   <a href="http://puppetlabs.com/puppet/enterprise-vs-open-source/">Enterprise vs. Open Source</a>
                </ul>
              </li>
              <li>
                <ul>
                  <a href="http://forge.puppetlabs.com">Puppet Forge</a>
                </ul>
              </li>
              <li>
                <ul>
                  <a href="http://puppetlabs.com/puppet/requirements/">Components &amp; Requirements</a>
                </ul>
              </li>
              <li>
                <ul>
                  <a href="http://puppetlabs.com/puppet/faq/">FAQ</a>
                </ul>
              </li>
			  <li>
                <ul>
                  <a href="http://puppetlabs.com/puppet/how-to-buy/">How to Buy</a>
                </ul>
              </li>
            </ul>
          </li>
          <li id="solutions-tab" class="with-submenu">
            <a href="http://puppetlabs.com/solutions/">
              <span>Solutions</span>
              <span class="drop-down-trigger"></span>
            </a>
            <ul>
              <li class="page_item page-item-12296"><a href="http://puppetlabs.com/solutions/configuration-management/">Configuration Management</a></li>
<li class="page_item page-item-986"><a href="http://puppetlabs.com/solutions/virtualization-management/">Virtualization Management</a></li>
<li class="page_item page-item-993"><a href="http://puppetlabs.com/solutions/cloud-management/">Cloud Management</a></li>
<li class="page_item page-item-996"><a href="http://puppetlabs.com/solutions/it-compliance/">IT Compliance</a></li>
<li class="page_item page-item-9520"><a href="http://puppetlabs.com/solutions/devops/">DevOps</a></li>
<li class="page_item page-item-991"><a href="http://puppetlabs.com/solutions/manage-os-x-resources/">OS X Desktops</a></li>
            </ul>
          </li>
          <li id="services-tab" class="with-submenu">
            <a href="http://puppetlabs.com/services/">
              <span>Services</span>
              <span class="drop-down-trigger"></span>
            </a>
            <ul>
              <li class="page_item page-item-783"><a href="http://puppetlabs.com/services/overview/">Overview</a></li>
<li class="page_item page-item-1052"><a href="http://puppetlabs.com/services/customer-support/">Customer Support</a></li>
<li class="page_item page-item-11022"><a href="http://puppetlabs.com/services/support-plans/">Support Plans</a></li>
<li class="page_item page-item-845"><a href="http://puppetlabs.com/services/training-workshops/">On-Site Education</a></li>
<li class="page_item page-item-4899"><a href="http://puppetlabs.com/services/consulting/">Professional Services</a></li>
<li class="page_item page-item-849"><a href="http://puppetlabs.com/category/events/upcoming/">Events &amp; Workshops</a></li>
<li class="page_item page-item-851"><a href="http://puppetlabs.com/services/partners/">Partners</a></li>
            </ul>
          </li>
                    <li id="resources-tab" class="with-submenu">
            <a href="http://puppetlabs.com/resources/">
              <span>Resources</span>
              <span class="drop-down-trigger"></span>
            </a>
            <ul>
              <li class="page_item page-item-1048"><a href="http://puppetlabs.com/resources/overview-2/">Overview</a></li>
<li class="page_item page-item-1040"><a href="http://docs.puppetlabs.com">Documentation</a></li>
<li class="page_item page-item-872"><a href="http://info.puppetlabs.com/register-download">Downloads</a></li>
<li class="page_item page-item-1961"><a href="http://forge.puppetlabs.com">Puppet Forge</a></li>
<li class="page_item page-item-835"><a href="http://info.puppetlabs.com/download-whitepapers.html">White Papers</a></li>
<li class="page_item page-item-1967"><a href="http://projects.puppetlabs.com/projects/puppet/wiki">Wiki</a></li>
<li class="page_item page-item-7279"><a href="http://puppetlabs.com/resources/webinars/">Upcoming Webinars</a></li>
<li class="page_item page-item-10183"><a href="http://puppetlabs.com/resources/newsletter/">Newsletter</a></li>
<li class="page_item page-item-12263"><a href="http://puppetlabs.com/resources/tech-notes/">Tech Notes</a></li>
<li class="page_item page-item-10265"><a href="http://info.puppetlabs.com/pe2-webinar.html">Webinars</a></li>
            </ul>
          </li>

          <li id="customers-tab" class="with-submenu">
            <a href="http://puppetlabs.com/customers/companies/">
              <span>Customers</span>
              <span class="drop-down-trigger"></span>
            </a>
            <ul>
			<li>
                <ul>
                  <a href="http://puppetlabs.com/customers/companies/">Companies</a>
                </ul>
              </li>
			  <li>
                <ul>
                  <a href="http://puppetlabs.com/customers/case-studies/">Case Studies</a>
                </ul>
              </li>
			  <li>
                <ul>
                  <a href="http://puppetlabs.com/customers/product-testimonials/">Product Testimonials</a>
                </ul>
              </li>
			    <li>
                <ul>
                  <a href="http://puppetlabs.com/customers/what-customers-are-saying/">Service Testimonials</a>
                </ul>
              </li>
            </ul>
          </li>
          <li id="community-tab" class="with-submenu">
            <a href="http://puppetlabs.com/community/">
              <span>Community</span>
              <span class="drop-down-trigger"></span>
            </a>

 <ul>
			<li>
                <ul>
                  <a href="http://puppetlabs.com/community/overview/">Overview</a>
                </ul>
              </li>
			<li>
                <ul>
                  <a href="http://puppetlabs.com/blog">Blog</a>
                </ul>
              </li>
			  <li>
                <ul>
                  <a href="http://puppetlabs.com/community/puppet-camp/">Puppet Camp</a>
                </ul>
              </li>
			  <li>
                <ul>
                  <a href="http://puppetlabs.com/community/user-groups-and-devops-groups/">Puppet User Groups & DevOps Groups</a>
                </ul>
              </li>
	          <li>
                <ul>
                  <a href="http://puppetlabs.com/community/presentations/">Presentations</a>
                </ul>
              </li>
			    <li>
                <ul>
                  <a href="http://puppetlabs.com/community/videos/">Videos</a>
                </ul>
              </li>

            </ul>

          <li id="company-tab" class="with-submenu">
            <a href="http://puppetlabs.com/company/">
              <span>Company</span>
              <span class="drop-down-trigger"></span>
            </a>
            <ul>
              <li class="page_item page-item-2316"><a href="http://puppetlabs.com/company/overview/">Overview</a></li>
<li class="page_item page-item-2179"><a href="http://puppetlabs.com/company/news/">News</a>
<ul class='children'>
	<li class="page_item page-item-2338"><a href="http://puppetlabs.com/company/news/press-releases/">Press Releases</a></li>
	<li class="page_item page-item-2383"><a href="http://puppetlabs.com/company/news/media-kit/">Media Kit</a></li>
</ul>
</li>
<li class="page_item page-item-1571"><a href="http://puppetlabs.com/company/careers/">Careers</a></li>
<li class="page_item page-item-10372"><a href="http://puppetlabs.com/company/management/">Management</a></li>
<li class="page_item page-item-10311"><a href="http://puppetlabs.com/company/board-and-advisors/">Board and Advisors</a></li>
<li class="page_item page-item-10367"><a href="http://puppetlabs.com/company/investors/">Investors</a></li>
<li class="page_item page-item-2313"><a href="http://puppetlabs.com/company/contact-us/">Contact Us</a></li>
<li class="page_item page-item-10579"><a href="http://puppetlabs.com/company/awards/">Awards</a></li>
            </ul>
          </li>
    		</ul>
          <div id="misc-navigation">
			  <ul>
				<li><a href="http://puppetlabs.com/security/">Security</a></li>
				<li><a href="http://docs.puppetlabs.com">Documentation</a></li>
				<li><a href="http://puppetlabs.com/resources/customer-support/">Support</a></li>
			        <li><a href="http://projects.puppetlabs.com/">Bug Tracker</a></li>
				<li><a href="http://puppetlabs.com/company/contact/contact-us">Contact Us</a></li>
				<li><a href="http://info.puppetlabs.com/download-pe2.html" class="gateway">Download</a></li>
			  </ul>
			<form action="http://www.google.com/cse" id="cse-search-box">
			  <div>
				<input type="hidden" name="cx" value="017668764424496204839:ubligvgbenm" />
				<input type="hidden" name="ie" value="UTF-8" />
				<input type="text" name="q" class="gsc-input" size="31" />
				<input type="submit" name="sa" class="searchbtn" value="Search" />
			  </div>
			</form>
			<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&lang=en"></script>
          </div>
      </nav>
    	</div>
    </header>

      <section id="masthead">
        <div class="site-width">
          <h1>Docs: <span class="section-name">Getting Started With Cloud Provisioner</span></h1>
          <ul id="doc-navigation">
            <li><a href="./../index.html">Docs Home</a></li>
            <li class="with-submenu">
              <a href="#">
                <span>Quick Nav</span>
                <span class="drop-down-trigger"></span>
              </a>
               <!-- the following links can't be relative, unfortunately -->
               <!-- future: add some JS to disable this if running from file:// -->
                               <dl>
                  <dt>Puppet Documentation</dt>
                      <dd><a href="./../puppet/3/reference/index.html">Puppet 3 Reference Manual</a></dd>
                      <dd><a href="./../puppet/2.7/reference/index.html">Puppet 2.7 Reference Manual</a></dd>
                      <dd><a href="./../pe/latest/index.html">Puppet Enterprise User's Guide</a></dd>
                      <dd><a href="./../learning/index.html">Learning Puppet</a></dd>
                      <dd><a href="./../references/latest/type.html">Resource Types</a></dd>
                      <dd><a href="./../references/latest/function.html">Functions</a></dd>
                      <dd><a href="./../references/latest/configuration.html">Configuration</a></dd>
                      <dd><a href="./../references/latest/developer/index.html">Developer</a></dd>
                      <dd><a href="./../references/glossary.html">Glossary of Puppet Terms</a></dd>
                      <dd><a href="./../references/index.html">Older References</a></dd>
                  <dt>Facter</dt>
                      <dd><a href="./../facter/latest/core_facts.html">Core Facts Reference</a></dd>
                  <dt>PuppetDB</dt>
                      <dd><a href="./../puppetdb/1/index.html">PuppetDB 1 Manual</a></dd>
                  <dt>MCollective</dt>
                      <dd><a href="./../mcollective/index.html">Index</a></dd>
                      <dd><a href="./../mcollective/reference/index.html">References</a></dd>
                      <dd><a href="./../mcollective/simplerpc/index.html">Writing Plugins</a></dd>
                      <dd><a href="./../mcollective/releasenotes.html">Release Notes</a></dd>
                </dl>

            </li>
            <li><a href="./../contribute.html">Contribute</a></li>
          </ul>
        </div>
        <br />
      </section>

      <section id="content">
        <div class="site-width">
          <div class="primary-secondary-content">
            <div class="primary-content">

<h1 id="getting-started-with-puppet-cloud-provisioner">Getting Started With Puppet Cloud Provisioner</h1>

<p>Learn how to install and start using Cloud Provisioner, Puppet&#8217;s extension for
node bootstrapping.</p>

<hr />

<h2 id="overview">Overview</h2>

<p>Puppet Cloud Provisioner is a Puppet extension that adds new actions for
creating and puppetizing new machines in Amazon&#8217;s EC2.</p>

<p>Cloud Provisioner gives you an easy command line interface to the following
tasks:</p>

<ul>
  <li>Create a new Amazon EC2 instance</li>
  <li>Install Puppet on a remote machine of your choice</li>
  <li>Remotely sign a node&#8217;s certificate</li>
  <li>Do all of the above with a single <code>puppet node_aws bootstrap</code> invocation</li>
</ul>

<h2 id="prerequisites">Prerequisites</h2>

<p>Puppet Cloud Provisioner has several requirements beyond those of Puppet.</p>

<h3 id="software">Software</h3>

<p>Cloud Provisioner can only be used with <strong>Puppet 2.7.2 or greater.</strong></p>

<p>Cloud Provisioner requires <a href="http://fog.io/">Fog</a>, a Ruby cloud services library. You&#8217;ll need
to <strong>ensure that Fog is installed</strong> on the machine running Cloud Provisioner:</p>

<pre><code># gem install fog -v 0.7.2
</code></pre>

<p>Depending on your operating system and Ruby environment, you may need to
manually install some of Fog&#8217;s dependencies.</p>

<p>Cloud Provisier also requires the GUID library for generating unique
identifiers.</p>

<pre><code># gem install guid
</code></pre>

<h3 id="services">Services</h3>

<p>Currently, Amazon EC2 is the only supported cloud platform for creating new
machine instances; you&#8217;ll need a pre-existing <strong>Amazon EC2 account</strong> to use
this feature.</p>

<h2 id="installing">Installing</h2>

<p>Puppet Cloud Provisioner should be installed with the puppet module subcommand, which is included in Puppet 2.7.14 and later.</p>

<pre><code>$ sudo puppet module install puppetlabs-cloud_provisioner
</code></pre>

<p>The command will tell you where it is installing the module; take note:</p>

<pre><code>admin@magpie$ puppet module install puppetlabs-cloud_provisioner
Preparing to install into /etc/puppet/modules ...
Downloading from https://forge.puppetlabs.com ...
Installing -- do not interrupt ...
/etc/puppet/modules
└── puppetlabs-cloud_provisioner (v1.0.5)
</code></pre>

<p>After installing it, you must add the <code>lib</code> directory of the module to your <code>$RUBYLIB</code>. Add the following to your <code>.profile</code> file (replacing <code>/etc/puppet/modules</code> with the directory from the install command, if necessary), then run <code>source ~/.profile</code> to re-load it in the current shell:</p>

<pre><code>export RUBYLIB=/etc/puppet/modules/cloud_provisioner/lib:$RUBYLIB
</code></pre>

<p>You can verify that it is installed and usable by running:</p>

<pre><code># puppet help node_aws
</code></pre>

<p>If you are installing the Cloud Provisioner on an older version of Puppet, you will have to do so manually or with the add-on <code>puppet-module</code> gem. </p>

<h2 id="configuration">Configuration</h2>

<h3 id="fog">Fog</h3>

<p>For Cloud Provisioner to work, Fog needs to be configured with your AWS access
key ID and secret access key. Create a <code>~/.fog</code> file as follows:</p>

<pre><code>:default:
  :aws_access_key_id:     XXXXXXXXXXXXXXXXXXXXX
  :aws_secret_access_key: Xx+xxXX+XxxXXXXXXxxXxxXXXXxxxXXxXXxxxxXX
</code></pre>

<p>You may obtain your AWS Access key id and secret access key using the following information:</p>
<pre>
To view your AWS Secret access key, go to http://aws.amazon.com and click on
Account &gt; Security Credentials. From their, under the "Access Credentials"
section of the page, click on the "Access Keys" tab to view your Access Keys.
To see your Secret Access Key, just click on the "Show" link under "Secret
Access Key".

From here, you can create new access keys or delete old ones. Just click on
"Create a new Access Key" and confirm that you'd like to generate a new pair.
This will generate both access and secret access keys. But, keep in mind that
your account is only able to have two sets of keys at any given time. If you
already have two sets created, you will not see the option to create a new set
until one has been made inactive and then deleted.
</pre>
<p>Information from <a href="https://forums.aws.amazon.com/thread.jspa?threadID=49738">AWS Discussion
Forums</a></p>

<p>To test whether Fog is working, execute the following command:</p>

<pre><code>$ ruby -rubygems -e 'require "fog"' -e 'puts Fog::Compute.new(:provider =&gt; "AWS").servers.length &gt;= 0'
</code></pre>

<p>This should return &#8220;true&#8221;</p>

<p>If you do not have the ~/.fog configuration file correct, you may receive an
error such as the following:</p>

<pre><code>fog-0.9.0/lib/fog/core/service.rb:155
in `validate_options': Missing required arguments: aws_access_key_id, aws_secret_access_key (ArgumentError)
        from /Users/jeff/.rvm/gems/ruby-1.8.7-p334@puppet/gems/fog-0.9.0/lib/fog/core/service.rb:53:in `new'
        from /Users/jeff/.rvm/gems/ruby-1.8.7-p334@puppet/gems/fog-0.9.0/lib/fog/compute.rb:13:in `new'
        from -e:2
</code></pre>

<p>In this case, please verify your <code>aws_access_key_id</code> and <code>aws_secret_access_key</code> are properly set in the ~/.fog file.</p>

<h3 id="ec2">EC2</h3>

<p>Your EC2 account will need to have at least one Amazon-managed <strong>SSH keypair,</strong>
and a security group that <strong>allows outbound traffic on port 8140 and SSH
traffic from the machine running the Cloud Provisioner actions.</strong></p>

<p>Your puppet master server will also have to be reachable from your newly
created instances.</p>

<p>script chosen. Testing has only currently been done on Ubuntu 11.04 (Natty) and
CentOS 5.4.</p>

<h3 id="provisioning">Provisioning</h3>

<p>In order to use the <code>install</code> action, any newly provisioned instances will need
to have their root user enabled, or will need a user account configured to
<code>sudo</code> as root without a password.</p>

<h3 id="puppet-master">puppet master</h3>

<p>If you want to automatically sign certificates with the Cloud Provisioner,
you&#8217;ll have to allow the computer running the Cloud Provisioner actions to
access the puppet master&#8217;s <code>certificate_status</code> REST endpoint. This can be
configured in the master&#8217;s
<a href="http://docs.puppetlabs.com/guides/rest_auth_conf.html">auth.conf</a> file:</p>

<pre><code>path /certificate_status
method save
auth yes
allow {certname}
</code></pre>

<p>If you&#8217;re running the Cloud Provisioner actions on a machine other than your
puppet master, you&#8217;ll have to ensure it can communicate with the puppet master
over port 8140.</p>

<h3 id="certificates-and-keys">Certificates and Keys</h3>

<p>You&#8217;ll also have to make sure the control node has a certificate signed by the
puppet master&#8217;s CA. If the control node is already known to the puppet master
(e.g. it is or was a puppet agent node), you&#8217;ll be able to use the existing
certificate, but we recommend generating a per-user certificate for a more
explicit and readable security policy. On the control node, run:</p>

<pre><code>puppet certificate generate {certname} --ca-location remote
</code></pre>

<p>Then sign the certificate as usual on the master (<code>puppet cert sign
{certname}</code>). On the control node again, run:</p>

<pre><code>puppet certificate find ca --ca-location remote
puppet certificate find {certname} --ca-location remote
</code></pre>

<p>This should let you operate under the new certname when you run puppet commands
with the <code>--certname {certname}</code> option.</p>

<p>The control node will also need a private key to allow SSH access to the new
machine; for EC2 nodes, this is the private key from the keypair used to create
the instance. If you are working with non-EC2 nodes, please note that the
<code>install</code> action does not currently support keys with passphrases.</p>

<h2 id="usage">Usage</h2>

<p>Puppet Cloud Provisioner provides seven new actions on the <code>node</code> face:</p>

<ul>
  <li><code>create</code>: Creates a new EC2 machine instance.</li>
  <li><code>install</code>: Install&#8217;s Puppet on an arbitrary machine, including non-cloud
hardware.</li>
  <li><code>init</code>: Perform the <code>install</code> and <code>classify</code> actions, and automatically sign
the new agent node&#8217;s certificate.</li>
  <li><code>bootstrap</code>: Create a new EC2 machine instance and perform the <code>init</code> action
on it.</li>
  <li><code>terminate</code>: Tear down an EC2 machine instance.</li>
  <li><code>list</code>: List running instances in the specified zone.</li>
  <li><code>fingerprint</code>: Make a best effort to securely obtain the SSH host key
fingerprint.</li>
</ul>

<h3 id="puppet-nodeaws-create">puppet node_aws create</h3>

<p>Argument(s): none.</p>

<p>Options:</p>

<ul>
  <li><code>--image, -i</code> &#8212; The name of the AMI to use when creating the instance.
<strong>Required.</strong></li>
  <li><code>--keyname</code> &#8212; The name of the Amazon-managed SSH keypair to use for accessing the
instance. <strong>Required.</strong></li>
  <li><code>--group, -g, --security-group</code> &#8212; The security group(s) to apply to the
instance. Can be a single group or a path-separator (colon, on *nix systems)
separated list of groups.</li>
  <li><code>--region</code> &#8212; The geographic region of the instance. Defaults to us-east-1.</li>
  <li><code>--type</code> &#8212; Type of instance to be launched.</li>
</ul>

<p>Example:</p>

<pre><code>$ puppet node_aws create --image ami-XxXXxXXX --keyname puppetlabs.admin --type m1.small / Creates a new EC2 machine instance and returns its DNS name. If the process fails, Puppet will automatically clean up after itself and tear down the instance.
</code></pre>

<h3 id="puppet-nodeaws-install">puppet node_aws install</h3>

<p>Argument(s): the hostname of the system to install Puppet on.</p>

<p>Options:</p>

<ul>
  <li><code>--login, -l, --username</code> &#8212; The user to log in as. <strong>Required.</strong></li>
  <li><code>--keyfile</code> &#8212; The SSH private key file to use. This key cannot require a
passphrase. <strong>Required.</strong></li>
  <li><code>--install-script</code> &#8212; The install script that should be used to install
Puppet. Currently supported options are: gems (<strong>default</strong>), puppet-enterprise, and puppet-enterprise-s3</li>
  <li><code>--installer-payload, --puppet</code> &#8212; The location of the <a href="http://info.puppetlabs.com/download">Puppet
Enterprise</a> universal tarball. (Used with puppet-enterprise install script)</li>
  <li><code>--installer-answers</code> &#8212; The location of an answers file to use with the PE
installer. (Used with puppet-enterprise and puppet-enterprise-s3 install
scripts).</li>
  <li><code>--puppet-version</code> &#8212; The version of puppet to install with the gems install
script.</li>
  <li><code>--facter-version</code> &#8212; The version of facter to install with the gems install
script.</li>
  <li><code>--pe-version</code> &#8212; The version of PE to install with the puppet-enterprise
script (e.g. <code>1.1</code>). Defaults to <code>1.1</code>.</li>
</ul>

<p>Example:</p>

<pre><code>puppet node_aws install ec2-XXX-XXX-XXX-XX.compute-1.amazonaws.com \
--login root --keyfile ~/.ssh/puppetlabs-ec2_rsa \
--install-script gems --puppet-version 2.6.9
</code></pre>

<p>Installs Puppet on an arbitrary system and returns the new agent
node&#8217;s certname.</p>

<p>Interactive installation of PE is not supported, so you&#8217;ll need an answers
file. See the PE manual for complete documentation of the answers file format.
A reasonable default has been supplied in Cloud Provisioner&#8217;s <code>ext</code> directory.</p>

<p>This action is not restricted to cloud machine instances, and will install Puppet
on any machine accessible by SSH.</p>

<h3 id="puppet-nodeaws-init">puppet node_aws init</h3>

<p>Argument(s): the hostname of the system to install Puppet on.</p>

<p>Options: See &#8220;install&#8221;</p>

<p>Example:</p>

<pre><code>puppet node_aws init ec2-XXX-XXX-XXX-XX.compute-1.amazonaws.com \
--login root --keyfile ~/.ssh/puppetlabs-ec2_rsa \
--certname cloud_admin
</code></pre>

<p>Install Puppet on an arbitrary system (see &#8220;install&#8221;) and automatically sign
its certificate request (using the <code>certificate</code> face&#8217;s <code>sign</code> action).</p>

<h3 id="puppet-nodeaws-bootstrap">puppet node_aws bootstrap</h3>

<p>Argument(s): none.</p>

<p>Options: See &#8220;create&#8221; and &#8220;install&#8221;</p>

<p>Example:</p>

<pre><code>puppet node_aws bootstrap --image ami-XxXXxXXX --keyname \
puppetlabs.admin --login root --keyfile ~/.ssh/puppetlabs-ec2_rsa \
--certname cloud_admin
</code></pre>

<p>Create a new EC2 machine instance and pass the new node&#8217;s hostname to the
<code>init</code> action.</p>

<h3 id="puppet-nodeaws-terminate">puppet node_aws terminate</h3>

<p>Argument(s): the hostname of the machine instance to tear down.</p>

<p>Options:</p>

<ul>
  <li><code>--region</code> &#8212; The geographic region of the instance. Defaults to us-east-1.</li>
</ul>

<p>Example:</p>

<pre><code>puppet node_aws terminate ec2-XXX-XXX-XXX-XX.compute-1.amazonaws.com
</code></pre>

<p>Tear down an EC2 machine instance.</p>

<h3 id="puppet-nodeaws-list">puppet node_aws list</h3>

<p>Argument(s): None</p>

<p>Options:</p>

<ul>
  <li><code>--region</code> &#8212; The geographic region of the instance. Defaults to us-east-1.</li>
</ul>

<p>Example:</p>

<pre><code>puppet node_aws list --region us-west-1
</code></pre>

<p>List the Amazon EC2 instances in the specified region and report on their status (pending, running, shutting down, or terminated). This is not limited to instances created by Cloud Provisioner. </p>

              <blockquote><p style="font-size: 1.3em; text-align: center;"><a href="#content">↑ Back to top</a></p></blockquote>
            </div>
            <div class="secondary-content">
                  <div id="subCol">
                      <h3 class="chapter">Contents</h3>

<ol class="toc">
  <li class="toc-lv2"><a href="#overview">Overview</a></li>
  <li class="toc-lv2"><a href="#prerequisites">Prerequisites</a>
<ol class="toc">
   <li class="toc-lv3"><a href="#software">Software</a></li>
   <li class="toc-lv3"><a href="#services">Services</a></li>
</ol></li>
  <li class="toc-lv2"><a href="#installing">Installing</a></li>
  <li class="toc-lv2"><a href="#configuration">Configuration</a>
<ol class="toc">
   <li class="toc-lv3"><a href="#fog">Fog</a></li>
   <li class="toc-lv3"><a href="#ec2">EC2</a></li>
   <li class="toc-lv3"><a href="#provisioning">Provisioning</a></li>
   <li class="toc-lv3"><a href="#puppet-master">puppet master</a></li>
   <li class="toc-lv3"><a href="#certificates-and-keys">Certificates and Keys</a></li>
</ol></li>
  <li class="toc-lv2"><a href="#usage">Usage</a>
<ol class="toc">
   <li class="toc-lv3"><a href="#puppet-nodeaws-create">puppet node_aws create</a></li>
   <li class="toc-lv3"><a href="#puppet-nodeaws-install">puppet node_aws install</a></li>
   <li class="toc-lv3"><a href="#puppet-nodeaws-init">puppet node_aws init</a></li>
   <li class="toc-lv3"><a href="#puppet-nodeaws-bootstrap">puppet node_aws bootstrap</a></li>
   <li class="toc-lv3"><a href="#puppet-nodeaws-terminate">puppet node_aws terminate</a></li>
   <li class="toc-lv3"><a href="#puppet-nodeaws-list">puppet node_aws list</a></li>
</ol></li>
</ol>
                      <div style="margin-top: 1.5em; padding-bottom: 10px;">
                          <p style="font-family: 'Lucida Grande',Lucida,Verdana,sans-serif;font-size: 16px; font-weight: bold; line-height: 22px; margin-bottom: 10px;">Download the Docs</p>
                          <a href="http://info.puppetlabs.com/download-pdfs.html"><img src="./../images/smallbits_small_docs.png" alt="Puppet docs download"></a>
                      </div>
                      <div style="margin-top: 0; padding-bottom: 10px;">
                          <p style="font-family: 'Lucida Grande',Lucida,Verdana,sans-serif;font-size: 16px; font-weight: bold; line-height: 22px; margin-bottom: 10px;">Download Puppet Enterprise</p>
                          <a href="http://info.puppetlabs.com/download-pe.html"><img src="./../images/puppet_cert_home.jpg" alt="Puppet Enterprise promo"></a>
                      </div>
                  </div>
            </div>
          </div>
        </div>
      </section>

		<footer id="footer">
      <div class="site-width">

        <div class="primary-secondary-content">
          <div class="primary-content">
            <section id="newsletter">
                 <h4>Puppet Labs is Hiring</h4>
                 <p><a href="http://www.puppetlabs.com/company/jobs/">Engineers, developers & consultants</a>
                  <p>
		<h4>Newsletter</h4>

              <p>Stay up to date on all things puppet</p>

				<form class="lpeRegForm formNotEmpty" method="post" enctype="application/x-www-form-urlencoded" action="http://info.puppetlabs.com/index.php/leadCapture/save"; id="mktForm_1013" name="mktForm_1013">

				<label>Email Address:</label><span class='mktInput'><input class='mktFormText mktFormEmail' name="Email" id="Email" type='text' value="" maxlength='255'  /><span class='mktFormMsg'></span></span>

				<input id='mktFrmSubmit' type='submit' class='btn' style="width: auto; overflow: visible; padding-left: .25em; padding-right: .25em;" value='Subscribe' name='submitButton' onclick='formSubmit(document.getElementById("mktForm_1013")); return false;' />

				<input style='display: none;' id='mktFrmReset' type='reset' value='Clear' name='resetButton' onclick='formReset(document.getElementById("mktForm_1013")); return false;' />

				<span style="display:none;"><input type="text" name="_marketo_comments" value="" /></span>
				<input type="hidden" name="lpId" value="-1" />
				<input type="hidden" name="subId" value="100" />

				<input type="hidden" name="kw" value="" />
				<input type="hidden" name="cr" value="" />

				<input type="hidden" name="searchstr" value="" />
				<input type="hidden" name="lpurl" value="http://info.puppetlabs.com/testsubscription.html?cr={creative}&kw={keyword}"; />
				<input type="hidden" name="formid" value="1013" />
				<input type="hidden" name="returnURL" value="http://www.puppetlabs.com/misc/subscription-thank-you/"; />
				<input type="hidden" name="retURL" value="http://www.puppetlabs.com/misc/subscription-thank-you/"; />
				<input type="hidden" name="_mkt_disp" value="return" />
				<input type="hidden" name="_mkt_trk" value="" />

				</form>
				<script type="text/javascript" src="http://info.puppetlabs.com/js/mktFormSupport.js"></script>

				<script type="text/javascript">
				function formSubmit(elt) {
				return Mkto.formSubmit(elt);
				}
				function formReset(elt) {
				return Mkto.formReset(elt);
				}
				</script>

<a href="http://info.puppetlabs.com/puppet-enterprise" class="fbtn">Try Puppet Enterprise FREE</a>

            </section>
            <section id="elsewhere">
              <h4>Get Involved</h4>
              <ul>

                <li class="chat"><a href="http://webchat.freenode.net/?channels=puppet" rel="external"><span class="indicator"></span><span>Chat with us on IRC</span></a></li>
		<li class="discussion"><a href="http://groups.google.com/group/puppet-dev" rel="external"><span class="indicator"></span><span>Join the Puppet Developer List</span></a></li>
                <li class="discussion"><a href="http://groups.google.com/group/puppet-users?pli=1" rel="external"><span class="indicator"></span><span>Join the Puppet User List</span></a></li>

                <li class="linkedin"><a href="http://www.linkedin.com/groups?about=&gid=696467&trk=anet_ug_grppro" rel="external"><span class="indicator"></span><span>Join the Puppet Users LinkedIn group</span></a></li>

              </ul>
		<p>
		              		<h4>Follow us&#8230;</h4>

              		<ul class="followus">


			<li><a href="http://feeds.feedburner.com/PuppetLabs" target="_blank"><img src="http://www.puppetlabs.com/wp-content/plugins/my-profiles/images/rss.png" border="0"></a></li>
			<li><a href="http://www.facebook.com/pages/Puppet-Labs/219089920711" target="_blank"><img src="http://www.puppetlabs.com//wp-content/plugins/my-profiles/images/facebook.png" border="0"></a></li>
			<li><a href="http://www.twitter.com/puppetlabs" target="_blank"><img src="http://www.puppetlabs.com//wp-content/plugins/my-profiles/images/twitter.png" border="0"></a></li>
			<li><a href="http://www.linkedin.com/groups?about=&amp;gid=696467&amp;trk=anet_ug_grppro" target="_blank"><img src="http://www.puppetlabs.com//wp-content/uploads/2011/01/LinkedIn_IN_Icon_32px.png" border="0"></a></li>    <li><a href="https://github.com/puppetlabs" target="_blank"><img src="http://www.puppetlabs.com//wp-content/uploads/2011/01/github_icon.png" border="0"></a></li>
			<li><a href="https://plus.google.com/112682055028218091774?rel=author" target="_blank"><img src="https://puppetlabs.com/wp-content/uploads/2013/05/google_plus32x32.png" alt="Find Us on Google+" border="0"></a></li>
					</ul>

              	</p>

            </section>
          </div>
          <div class="secondary-content">
            <section id="book-it">
              <h4>Get the book!</h4>

              <p>James Turnbull and Jeff McCune's book <a href="http://www.apress.com/9781430230571" rel="nofollow">Pro Puppet</a> is a comprehensive and up-to-date look at Puppet and MCollective. </p>
              <a href="http://www.apress.com/9781430230571" rel="nofollow"><img src="http://www.puppetlabs.com/wp-content/uploads/2011/05/propuppetthumb.png" /></a>
            </section>
          </div>
        </div>
      </div>
		</footer>

    <div id="copyright">
      <div class="site-width">
        &copy; 2011 <a href="http://www.puppetlabs.com/" title="Puppet Labs">Puppet Labs</a>
        <span class="vcard">
         <span class="org"></span>
         <a class="email" href="mailto:info@puppetlabs.com">info@puppetlabs.com</a>

          <span class="adr">
           <span class="street-address">926 NW 13th Avenue #210</span>
           /
           <span class="locality">Portland</span>,
           <span class="region">OR</span>
           <span class="postal-code">97209</span>

          </span>

         <span class="tel">1-877-575-9775</span>
        </span>
      </div>
    </div>

  	<script type="text/javascript">Cufon.now();</script>
  	<style type="text/css">h1, h2, .btn { visibility : visible; }</style>

	</body>
</html>
