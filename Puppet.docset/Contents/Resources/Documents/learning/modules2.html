<!DOCTYPE html>
<html dir="ltr" lang="en-US">
  <head>
  	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  	<title>Learning Puppet — Class Parameters — Documentation — Puppet Labs</title>
  	<link rel="alternate" type="application/atom+xml" title="Puppet Labs Documentation Updates" href="https://github.com/puppetlabs/puppet-docs/commits/master.atom">
    <link rel="alternate" type="application/atom+xml" title="Puppet Labs Blog Feed" href="http://puppetlabs.com/feed/atom/">
    <link rel='index' title='Puppet Labs Documentation' href='http://docs.puppetlabs.com' />
    <link rel='icon' href='./../favicon.ico' />


  <meta name="description" content="Begin    class echo_class ($to_echo = &quot;default value&quot;) {      notify {&quot;What are we echoing? ${to_echo}.&quot;:}    }    class {&#39;...">



    <!-- FIXME: absolute paths -->

    <script type='text/javascript' src='./../files/javascripts/html5.js'></script>
    <script type='text/javascript' src='./../files/javascripts/jquery-1.3.2.min.js'></script>
    <script type='text/javascript' src='./../files/javascripts/drop_down.js'></script>
    <script type='text/javascript' src='./../files/javascripts/cufon-yui.js'></script>
    <script type='text/javascript' src='./../files/fonts/Klavika_400-Klavika_600.font.js'></script>
    <script type='text/javascript' src='./../files/javascripts/ampersands.js'></script>
    <script type='text/javascript' src='./../files/javascripts/navigation-accordion.js'></script>

    <script type="text/javascript" src="http://puppetlabs.com/wp-content/themes/puppetlabs/javascripts/leadcapture.js"></script>

    <!-- All in One SEO Pack 1.6.10.1 by Michael Torbert of Semper Fi Web Design[127,146] -->
    <meta name="keywords" content="Puppet, puppet labs, reductive labs, open source, system administrator, ruby, data center, automation, support" />
    <!-- /all in one seo pack -->

    <!-- Give us the option of setting a canonical URL in yaml frontmatter -NF -->
    <link rel="canonical" href="http://docs.puppetlabs.com/learning/modules2.html" />

    <!-- FIXME: absolute paths -->

    <link rel="stylesheet" type="text/css" href="./../files/stylesheets/style.css" media="screen">
    <link rel="stylesheet" type="text/css" href="./../files/stylesheets/syntax.css" media="screen"> <!-- index -->
    <link rel="stylesheet" type="text/css" href="./../files/stylesheets/adbanner.css" media="screen">

    <!--[if IE 7]>
	  <link rel="stylesheet" type="text/css" href="./../files/stylesheets/ie_7.css" media="screen"> <!-- index -->
    <![endif]-->

    <!--[if IE 8]>
	    <link rel="stylesheet" type="text/css" href="./../files/stylesheets/ie_8.css" media="screen"> <!-- index -->
    <![endif]-->

  	<script type="text/javascript">
      Cufon.replace('h1, h2', { fontWeight: '600' });
  	</script>
</head>




  <body id="puppetlabsdocs" class="docs">
  <style type="text/css">h1, h2{ visibility : hidden }</style>
  <!--[if IE 8]>
    <style type="text/css">h1, h2{ visibility : visible }</style>
  <![endif]-->

  	<header id="header">
      <div class="site-width">
    		<h1><a href="http://puppetlabs.com/"><span>Puppet Labs</span></a></h1>
        <a class="screen-reader-content" href="#content">Skip navigation</a>
        <nav>
    		<ul id="global-navigation">
          <li id="puppet-tab" class="with-submenu">
            <a href="http://puppetlabs.com/puppet/puppet-enterprise">
              <span>Products</span>
              <span class="drop-down-trigger"></span>
            </a>
            <ul>
			<li>
                <ul>
                   <a href="http://puppetlabs.com/puppet/what-is-puppet/">What is Puppet?</a>
                </ul>
              </li>
			       <li>
                <ul>
                   <a href="http://puppetlabs.com/puppet/puppet-enterprise/">Puppet Enterprise</a>
                </ul>
              </li>
            <li>
                <ul>
                   <a href="http://puppetlabs.com/puppet/whats-new/">What's New in 2.5</a>
                </ul>
              </li>
            <li>
                <ul>
                   <a href="http://puppetlabs.com/puppet/puppet-open-source/">Puppet Open Source</a>
                </ul>
              </li>
            <li>
                <ul>
                   <a href="http://puppetlabs.com/puppet/enterprise-vs-open-source/">Enterprise vs. Open Source</a>
                </ul>
              </li>
              <li>
                <ul>
                  <a href="http://forge.puppetlabs.com">Puppet Forge</a>
                </ul>
              </li>
              <li>
                <ul>
                  <a href="http://puppetlabs.com/puppet/requirements/">Components &amp; Requirements</a>
                </ul>
              </li>
              <li>
                <ul>
                  <a href="http://puppetlabs.com/puppet/faq/">FAQ</a>
                </ul>
              </li>
			  <li>
                <ul>
                  <a href="http://puppetlabs.com/puppet/how-to-buy/">How to Buy</a>
                </ul>
              </li>
            </ul>
          </li>
          <li id="solutions-tab" class="with-submenu">
            <a href="http://puppetlabs.com/solutions/">
              <span>Solutions</span>
              <span class="drop-down-trigger"></span>
            </a>
            <ul>
              <li class="page_item page-item-12296"><a href="http://puppetlabs.com/solutions/configuration-management/">Configuration Management</a></li>
<li class="page_item page-item-986"><a href="http://puppetlabs.com/solutions/virtualization-management/">Virtualization Management</a></li>
<li class="page_item page-item-993"><a href="http://puppetlabs.com/solutions/cloud-management/">Cloud Management</a></li>
<li class="page_item page-item-996"><a href="http://puppetlabs.com/solutions/it-compliance/">IT Compliance</a></li>
<li class="page_item page-item-9520"><a href="http://puppetlabs.com/solutions/devops/">DevOps</a></li>
<li class="page_item page-item-991"><a href="http://puppetlabs.com/solutions/manage-os-x-resources/">OS X Desktops</a></li>
            </ul>
          </li>
          <li id="services-tab" class="with-submenu">
            <a href="http://puppetlabs.com/services/">
              <span>Services</span>
              <span class="drop-down-trigger"></span>
            </a>
            <ul>
              <li class="page_item page-item-783"><a href="http://puppetlabs.com/services/overview/">Overview</a></li>
<li class="page_item page-item-1052"><a href="http://puppetlabs.com/services/customer-support/">Customer Support</a></li>
<li class="page_item page-item-11022"><a href="http://puppetlabs.com/services/support-plans/">Support Plans</a></li>
<li class="page_item page-item-845"><a href="http://puppetlabs.com/services/training-workshops/">On-Site Education</a></li>
<li class="page_item page-item-4899"><a href="http://puppetlabs.com/services/consulting/">Professional Services</a></li>
<li class="page_item page-item-849"><a href="http://puppetlabs.com/category/events/upcoming/">Events &amp; Workshops</a></li>
<li class="page_item page-item-851"><a href="http://puppetlabs.com/services/partners/">Partners</a></li>
            </ul>
          </li>
                    <li id="resources-tab" class="with-submenu">
            <a href="http://puppetlabs.com/resources/">
              <span>Resources</span>
              <span class="drop-down-trigger"></span>
            </a>
            <ul>
              <li class="page_item page-item-1048"><a href="http://puppetlabs.com/resources/overview-2/">Overview</a></li>
<li class="page_item page-item-1040"><a href="http://docs.puppetlabs.com">Documentation</a></li>
<li class="page_item page-item-872"><a href="http://info.puppetlabs.com/register-download">Downloads</a></li>
<li class="page_item page-item-1961"><a href="http://forge.puppetlabs.com">Puppet Forge</a></li>
<li class="page_item page-item-835"><a href="http://info.puppetlabs.com/download-whitepapers.html">White Papers</a></li>
<li class="page_item page-item-1967"><a href="http://projects.puppetlabs.com/projects/puppet/wiki">Wiki</a></li>
<li class="page_item page-item-7279"><a href="http://puppetlabs.com/resources/webinars/">Upcoming Webinars</a></li>
<li class="page_item page-item-10183"><a href="http://puppetlabs.com/resources/newsletter/">Newsletter</a></li>
<li class="page_item page-item-12263"><a href="http://puppetlabs.com/resources/tech-notes/">Tech Notes</a></li>
<li class="page_item page-item-10265"><a href="http://info.puppetlabs.com/pe2-webinar.html">Webinars</a></li>
            </ul>
          </li>

          <li id="customers-tab" class="with-submenu">
            <a href="http://puppetlabs.com/customers/companies/">
              <span>Customers</span>
              <span class="drop-down-trigger"></span>
            </a>
            <ul>
			<li>
                <ul>
                  <a href="http://puppetlabs.com/customers/companies/">Companies</a>
                </ul>
              </li>
			  <li>
                <ul>
                  <a href="http://puppetlabs.com/customers/case-studies/">Case Studies</a>
                </ul>
              </li>
			  <li>
                <ul>
                  <a href="http://puppetlabs.com/customers/product-testimonials/">Product Testimonials</a>
                </ul>
              </li>
			    <li>
                <ul>
                  <a href="http://puppetlabs.com/customers/what-customers-are-saying/">Service Testimonials</a>
                </ul>
              </li>
            </ul>
          </li>
          <li id="community-tab" class="with-submenu">
            <a href="http://puppetlabs.com/community/">
              <span>Community</span>
              <span class="drop-down-trigger"></span>
            </a>

 <ul>
			<li>
                <ul>
                  <a href="http://puppetlabs.com/community/overview/">Overview</a>
                </ul>
              </li>
			<li>
                <ul>
                  <a href="http://puppetlabs.com/blog">Blog</a>
                </ul>
              </li>
			  <li>
                <ul>
                  <a href="http://puppetlabs.com/community/puppet-camp/">Puppet Camp</a>
                </ul>
              </li>
			  <li>
                <ul>
                  <a href="http://puppetlabs.com/community/user-groups-and-devops-groups/">Puppet User Groups & DevOps Groups</a>
                </ul>
              </li>
	          <li>
                <ul>
                  <a href="http://puppetlabs.com/community/presentations/">Presentations</a>
                </ul>
              </li>
			    <li>
                <ul>
                  <a href="http://puppetlabs.com/community/videos/">Videos</a>
                </ul>
              </li>
            </ul>

          <li id="company-tab" class="with-submenu">
            <a href="http://puppetlabs.com/company/">
              <span>Company</span>
              <span class="drop-down-trigger"></span>
            </a>
            <ul>
              <li class="page_item page-item-2316"><a href="http://puppetlabs.com/company/overview/">Overview</a></li>
<li class="page_item page-item-2179"><a href="http://puppetlabs.com/company/news/">News</a>
<ul class='children'>
	<li class="page_item page-item-2338"><a href="http://puppetlabs.com/company/news/press-releases/">Press Releases</a></li>
	<li class="page_item page-item-2383"><a href="http://puppetlabs.com/company/news/media-kit/">Media Kit</a></li>
</ul>
</li>
<li class="page_item page-item-1571"><a href="http://puppetlabs.com/company/careers/">Careers</a></li>
<li class="page_item page-item-10372"><a href="http://puppetlabs.com/company/management/">Management</a></li>
<li class="page_item page-item-10311"><a href="http://puppetlabs.com/company/board-and-advisors/">Board and Advisors</a></li>
<li class="page_item page-item-10367"><a href="http://puppetlabs.com/company/investors/">Investors</a></li>
<li class="page_item page-item-2313"><a href="http://puppetlabs.com/company/contact-us/">Contact Us</a></li>
<li class="page_item page-item-10579"><a href="http://puppetlabs.com/company/awards/">Awards</a></li>
            </ul>
          </li>
    		</ul>
          <div id="misc-navigation">
			  <ul>
				<li><a href="http://puppetlabs.com/security/">Security</a></li>
				<li><a href="http://docs.puppetlabs.com">Documentation</a></li>
				<li><a href="http://puppetlabs.com/resources/customer-support/">Support</a></li>
			        <li><a href="http://projects.puppetlabs.com/">Bug Tracker</a></li>
				<li><a href="http://puppetlabs.com/company/contact/contact-us">Contact Us</a></li>
				<li><a href="http://info.puppetlabs.com/download-pe2.html" class="gateway">Download</a></li>
			  </ul>
			<form action="http://www.google.com/cse" id="cse-search-box">
			  <div>
				<input type="hidden" name="cx" value="017668764424496204839:ubligvgbenm" />
				<input type="hidden" name="ie" value="UTF-8" />
				<input type="text" name="q" class="gsc-input" size="31" />
				<input type="submit" name="sa" class="searchbtn" value="Search" />
			  </div>
			</form>
			<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&lang=en"></script>
          </div>
      </nav>
    	</div>
    </header>

      <section id="masthead">
        <div class="site-width">
          <h1>Docs: <span class="section-name">Learning Puppet — Class Parameters</span></h1>
          <ul id="doc-navigation">
            <li><a href="./../index.html">Docs Home</a></li>
            <li class="with-submenu">
              <a href="#">
                <span>Quick Nav</span>
                <span class="drop-down-trigger"></span>
              </a>
               <!-- the following links can't be relative, unfortunately -->
               <!-- future: add some JS to disable this if running from file:// -->
                               <dl>
                  <dt>Puppet Documentation</dt>
                      <dd><a href="./../puppet/3/reference/index.html">Puppet 3 Reference Manual</a></dd>
                      <dd><a href="./../puppet/2.7/reference/index.html">Puppet 2.7 Reference Manual</a></dd>
                      <dd><a href="./../pe/latest/index.html">Puppet Enterprise User's Guide</a></dd>
                      <dd><a href="./../learning/index.html">Learning Puppet</a></dd>
                      <dd><a href="./../references/latest/type.html">Resource Types</a></dd>
                      <dd><a href="./../references/latest/function.html">Functions</a></dd>
                      <dd><a href="./../references/latest/configuration.html">Configuration</a></dd>
                      <dd><a href="./../references/latest/developer/index.html">Developer</a></dd>
                      <dd><a href="./../references/glossary.html">Glossary of Puppet Terms</a></dd>
                      <dd><a href="./../references/index.html">Older References</a></dd>
                  <dt>Facter</dt>
                      <dd><a href="./../facter/latest/core_facts.html">Core Facts Reference</a></dd>
                  <dt>PuppetDB</dt>
                      <dd><a href="./../puppetdb/1/index.html">PuppetDB 1 Manual</a></dd>
                  <dt>MCollective</dt>
                      <dd><a href="./../mcollective/index.html">Index</a></dd>
                      <dd><a href="./../mcollective/reference/index.html">References</a></dd>
                      <dd><a href="./../mcollective/simplerpc/index.html">Writing Plugins</a></dd>
                      <dd><a href="./../mcollective/releasenotes.html">Release Notes</a></dd>
                </dl>

            </li>
            <li><a href="./../contribute.html">Contribute</a></li>
          </ul>
        </div>
        <br />
      </section>

      <section id="content">
        <div class="site-width">
          <div class="primary-secondary-content">
            <div class="primary-content">
              <h1>Learning Puppet — Class Parameters</h1>
              <nav class="in-page" id="page-nav">
<ol class="toc">
  <li class="toc-lv2"><a href="#begin">Begin</a></li>
  <li class="toc-lv2"><a href="#investigating-vs-asking-for-help">Investigating vs. Asking For Help</a></li>
  <li class="toc-lv2"><a href="#class-parameters">Class Parameters</a>
<ol class="toc">
   <li class="toc-lv3"><a href="#default-values">Default Values</a></li>
   <li class="toc-lv3"><a href="#the-deal-with-resource-like-class-declarations">The Deal With Resource-Like Class Declarations</a></li>
   <li class="toc-lv3"><a href="#older-ways-to-configure-classes">Older Ways to Configure Classes</a></li>
</ol></li>
  <li class="toc-lv2"><a href="#example-ntp-again">Example: NTP (Again)</a></li>
  <li class="toc-lv2"><a href="#module-documentation">Module Documentation</a></li>
  <li class="toc-lv2"><a href="#next">Next</a></li>
</ol></nav>
              <h2 id="begin">Begin</h2>

<div class="highlight"><pre><code class="ruby">    <span class="k">class</span> <span class="n">echo_class</span> <span class="p">(</span><span class="vg">$to_echo</span> <span class="o">=</span> <span class="s2">&quot;default value&quot;</span><span class="p">)</span> <span class="p">{</span>
      <span class="n">notify</span> <span class="p">{</span><span class="s2">&quot;What are we echoing? ${to_echo}.&quot;</span><span class="p">:}</span>
    <span class="p">}</span>

    <span class="k">class</span> <span class="p">{</span><span class="s1">&#39;echo_class&#39;</span><span class="p">:</span>
      <span class="n">to_echo</span> <span class="o">=&gt;</span> <span class="s1">&#39;Custom value&#39;</span><span class="p">,</span>
    <span class="p">}</span>
</code></pre>
</div>

<p>There&#8217;s something different about that variable.</p>

<h2 id="investigating-vs-asking-for-help">Investigating vs. Asking For Help</h2>

<p>Most classes have to do slightly different things on different systems. You already know some ways to do that &#8212; all of the modules you&#8217;ve written so far have switched their behaviors by looking up system facts. Let&#8217;s say that they &#8220;investigate:&#8221; they expect some information to be in a specific place (in the case of facts, a top-scope variable), and go looking for it when they need it.</p>

<p>But this isn&#8217;t always the best way to do it, and it starts to break down once you need to switch a module&#8217;s behavior on information that doesn&#8217;t map cleanly to system facts. Is this a database server? A local NTP server? A test node? A production node? These aren&#8217;t necessarily facts; usually, they&#8217;re decisions made by a human.</p>

<p>In these cases, it&#8217;s often best to just <em>configure</em> the class, and tell it what it needs to know when you declare it. To enable this, classes need some way to ask for information from the outside world.</p>

<h2 id="class-parameters">Class Parameters</h2>

<p>When defining a class, you can give it a list of <strong>parameters.</strong> Parameters go in an optional set of parentheses, between the name and the first curly brace. Each parameter is a variable name, and can have an optional default value; each parameter is separated from the next with a comma.</p>

<div class="highlight"><pre><code class="ruby">    <span class="k">class</span> <span class="n">mysql</span> <span class="p">(</span><span class="vg">$user</span> <span class="o">=</span> <span class="s1">&#39;mysql&#39;</span><span class="p">,</span> <span class="vg">$port</span> <span class="o">=</span> <span class="mi">3306</span><span class="p">)</span> <span class="p">{</span>
      <span class="o">.</span><span class="n">.</span><span class="o">.</span>
    <span class="p">}</span>
</code></pre>
</div>

<p>This is a doorway for passing information into the class:</p>

<div class="highlight"><pre><code class="ruby">    <span class="k">class</span> <span class="p">{</span><span class="s1">&#39;mysql&#39;</span><span class="p">:</span>
      <span class="n">user</span> <span class="o">=&gt;</span> <span class="n">mysqlserver</span><span class="p">,</span>
    <span class="p">}</span>
</code></pre>
</div>

<ul>
  <li>If you declare the class with a <a href="./modules1.html#resource-like-class-declarations">resource-like class declaration</a>, the parameters are available as <strong>resource attributes.</strong></li>
  <li>Inside the definition of the class, they appear as <strong>local variables.</strong></li>
</ul>

<h3 id="default-values">Default Values</h3>

<p>When defining the class, you can give any parameter a default value. This makes it optional when you declare the class; if you don&#8217;t specify a value, it will use the default. Parameters without defaults become mandatory when declaring the class.</p>

<h3 id="the-deal-with-resource-like-class-declarations">The Deal With Resource-Like Class Declarations</h3>

<h4 id="in-puppet-enterprise-2x">In Puppet Enterprise 2.x</h4>

<p>In Puppet 2.7, which is used in the Puppet Enterprise 2.x series, you must use <a href="./../puppet/latest/reference/lang_classes.html#using-resource-like-declarations">resource-like class declarations</a> if you want to specify class parameters; you cannot specify parameters with <code>include</code> or in the PE console. If every parameter has a default and you don&#8217;t need to override any of them, you can declare the class with <code>include</code>; otherwise, you must use resource-like class declarations.</p>

<p>Resource-like declarations don&#8217;t play nicely with <code>include</code>, and if you&#8217;re using them, you need to organize your manifests so that they never attempt to declare a class more than once. This has traditionally been a pain, but class parameters are still superior to older ways of configuring classes, and the best practices developed over the course of the Puppet 2.7 series have made them much easier to deal with.</p>

<p>The best way to deal with class parameters in the Puppet Enterprise 2.x series is to create &#8220;role&#8221; and &#8220;profile&#8221; modules that combine your functional classes into more complete node descriptions. Once you find yourself managing multiple nodes with Puppet, you should <a href="http://www.craigdunn.org/2012/05/239/">read Craig Dunn&#8217;s &#8220;Roles and Profiles&#8221; essay</a>, which matches the best practices used by Puppet Labs&#8217;s services engineers.</p>

<p>To make your roles and profiles more flexible and avoid repeating yourself, you can also install and configure <a href="./../hiera/1/index.html">Hiera</a> on your puppet master and specify <a href="/hiera/1/puppet.html#hiera-lookup-functions">Hiera lookup functions</a> as the values of class parameters.</p>

<h4 id="why-include-cant-directly-take-class-parameters">Why <code>include</code> Can&#8217;t Directly Take Class Parameters</h4>

<p>The problem is that classes are singletons, parameters configure the way they behave, and <code>include</code> can declare the same class more than once.</p>

<p>If you were to declare a class multiple times with different parameter values, which set of values should win? The question didn&#8217;t seem to have a good answer. The <a href="#older-ways-to-configure-classes">older method of using magic variables</a> actually had this same problem &#8212; depending on parse order, there could be several different scope-chains that provided a given value, and the one you actually got would be effectively random. Icky.</p>

<p>The solution Puppet&#8217;s designers settled on was that parameter values either had to be explicit and unconflicting (the restrictions on resource-like class declarations), or had to come from somewhere <em>outside</em> Puppet and be already resolved by the time Puppet&#8217;s parsing begins (Puppet 3&#8217;s <a href="./../hiera/1/puppet.html#automatic-parameter-lookup">automatic parameter lookup</a>).</p>

<h3 id="older-ways-to-configure-classes">Older Ways to Configure Classes</h3>

<p>Class parameters were added to Puppet in version 2.6.0, to address a need for a standard and visible way to configure clases.</p>

<p>Prior to that, people generally configured classes by choosing an arbitrary and unique external variable name and having the class retrieve that variable with <a href="./../guides/scope_and_puppet.html">dynamically-scoped variable lookup</a>:</p>

<pre><code>$some_variable
include some_class
# This class will reach outside its own scope, and hope
# it finds a value for $some_variable.
</code></pre>

<p>There were a few problems with this:</p>

<ul>
  <li>Every class was competing for variable names in an effectively global name space. If you accidentally chose a non-unique name for your magic variables, something bad would happen.</li>
  <li>When writing modules to share with the world, you had to be very careful to document all of your magic variables; there wasn&#8217;t a standard place a user could look to see what data a class needed.</li>
  <li>This inspired many many people to try and make intricate data hierarchies with node inheritance, which rarely worked and had a tendency to fail dramatically and confusingly.</li>
</ul>

<h2 id="example-ntp-again">Example: NTP (Again)</h2>

<p>So let&#8217;s get back to our NTP module. The first thing we talked about wanting to configure was the set of servers, so that&#8217;s a good place to start. First, add a parameter:</p>

<div class="highlight"><pre><code class="ruby">    <span class="k">class</span> <span class="n">ntp</span> <span class="p">(</span><span class="vg">$servers</span> <span class="o">=</span> <span class="k">undef</span><span class="p">)</span> <span class="p">{</span>
      <span class="o">.</span><span class="n">.</span><span class="o">.</span>
</code></pre>
</div>

<p>Next, we&#8217;ll change how we set that <code>$servers_real</code> variable that the template uses:</p>

<div class="highlight"><pre><code class="ruby">      <span class="k">if</span> <span class="vg">$servers</span> <span class="o">==</span> <span class="k">undef</span> <span class="p">{</span>
        <span class="vg">$servers_real</span> <span class="o">=</span> <span class="vg">$default_servers</span>
      <span class="p">}</span>
      <span class="k">else</span> <span class="p">{</span>
        <span class="vg">$servers_real</span> <span class="o">=</span> <span class="vg">$servers</span>
      <span class="p">}</span>
</code></pre>
</div>

<p>If we specify an array of servers, use that; otherwise, use the defaults.</p>

<p>And&#8230; that&#8217;s all it takes. If you declare the class with no attributes&#8230;</p>

<div class="highlight"><pre><code class="ruby">    <span class="kp">include</span> <span class="n">ntp</span>
</code></pre>
</div>

<p>&#8230;it&#8217;ll work the same way it used to. If you declare it with a <code>servers</code> attribute containing an array of servers (with or without appended <code>iburst</code> and <code>dynamic</code> statements)&#8230;</p>

<div class="highlight"><pre><code class="ruby">    <span class="k">class</span> <span class="p">{</span><span class="s1">&#39;ntp&#39;</span><span class="p">:</span>
      <span class="n">servers</span> <span class="o">=&gt;</span> <span class="o">[</span> <span class="s2">&quot;ntp1.example.com dynamic&quot;</span><span class="p">,</span> <span class="s2">&quot;ntp2.example.com dynamic&quot;</span><span class="p">,</span> <span class="o">]</span><span class="p">,</span>
    <span class="p">}</span>
</code></pre>
</div>

<p>&#8230;it&#8217;ll override the default servers in the <code>ntp.conf</code> file.</p>

<p>There&#8217;s a bit of trickery to notice: setting a variable or parameter to <code>undef</code> might seem odd, and we&#8217;re only doing it because we want to be able to get the default servers without asking for them. (Remember, parameters can&#8217;t be optional without an explicit default value.)</p>

<p>Also, remember the business with the <code>$servers_real</code> variable? That was because the Puppet language won&#8217;t let us re-assign the <code>$servers</code> variable within a given scope. If the default value we wanted was the same regardless of OS, we could just use it as the parameter default, but the extra logic to accomodate the per-OS defaults means we have to make a copy of the variable.</p>

<p>While we&#8217;re in the NTP module, what else could we make into a parameter? Well, let&#8217;s say you sometimes wanted to prevent the NTP daemon from being used as a server by other nodes. Or maybe you want to install and configure NTP, but not keep the daemon running. You could expose all of these as extra class parameters, and make changes in the manifest or the templates to use them.</p>

<p>All of these changes are based on decisions from the free puppetlabs/ntp module. <a href="https://github.com/puppetlabs/puppetlabs-ntp">You can browse the source of this module</a> and see how these extra parameters play out in the manifest and templates.</p>

<h2 id="module-documentation">Module Documentation</h2>

<p>You have a fairly functional NTP module, at this point. About the only thing it&#8217;s missing is some documentation:</p>

<div class="highlight"><pre><code class="ruby">    <span class="c1"># = Class: ntp</span>
    <span class="c1">#</span>
    <span class="c1"># This class installs/configures/manages NTP. It can optionally disable NTP</span>
    <span class="c1"># on virtual machines. Only supported on Debian-derived and Red Hat-derived OSes.</span>
    <span class="c1">#</span>
    <span class="c1"># == Parameters:</span>
    <span class="c1">#</span>
    <span class="c1"># $servers:: An array of NTP servers, with or without +iburst+ and</span>
    <span class="c1">#            +dynamic+ statements appended. Defaults to the OS&#39;s defaults.</span>
    <span class="c1"># $enable::  Whether to start the NTP service on boot. Defaults to true. Valid</span>
    <span class="c1">#            values: true and false.</span>
    <span class="c1"># $ensure::  Whether to run the NTP service. Defaults to running. Valid values:</span>
    <span class="c1">#            running and stopped.</span>
    <span class="c1">#</span>
    <span class="c1"># == Requires:</span>
    <span class="c1">#</span>
    <span class="c1"># Nothing.</span>
    <span class="c1">#</span>
    <span class="c1"># == Sample Usage:</span>
    <span class="c1">#</span>
    <span class="c1">#   class {&#39;ntp&#39;:</span>
    <span class="c1">#     servers =&gt; [ &quot;ntp1.example.com dynamic&quot;,</span>
    <span class="c1">#                  &quot;ntp2.example.com dynamic&quot;, ],</span>
    <span class="c1">#   }</span>
    <span class="c1">#   class {&#39;ntp&#39;:</span>
    <span class="c1">#     enable =&gt; false,</span>
    <span class="c1">#     ensure =&gt; stopped,</span>
    <span class="c1">#   }</span>
    <span class="c1">#</span>
    <span class="k">class</span> <span class="n">ntp</span> <span class="p">(</span><span class="vg">$servers</span> <span class="o">=</span> <span class="k">undef</span><span class="p">,</span> <span class="vg">$enable</span> <span class="o">=</span> <span class="kp">true</span><span class="p">,</span> <span class="vg">$ensure</span> <span class="o">=</span> <span class="n">running</span><span class="p">)</span> <span class="p">{</span>
      <span class="k">case</span> <span class="vg">$operatingsystem</span> <span class="p">{</span> <span class="o">.</span><span class="n">.</span><span class="o">.</span>
      <span class="o">.</span><span class="n">.</span><span class="o">.</span>
</code></pre>
</div>

<p>This doesn&#8217;t have to be Tolstoy, but you should at least write down what the parameters are and what kind of data they take. Your future self will thank you. Also! If you write your documentation in <a href="http://links.puppetlabs.com/rdoc_markup">RDoc</a> format and put it in a comment block butted up directly against the start of the class definition, you can automatically generate a browsable Rdoc-style site with info for all your modules. You can test it now, actually:</p>

<pre><code># puppet doc --mode rdoc --outputdir ~/moduledocs --modulepath /etc/puppetlabs/puppet/modules
</code></pre>

<p>(Then just upload that <code>~/moduledocs</code> folder to some webspace you control, or grab it onto your desktop with SFTP.)</p>

<h2 id="next">Next</h2>

<p><strong>Next Lesson:</strong></p>

<p>Okay, we can pass parameters into classes now and change their behavior. Great! But classes are still always singletons; you can&#8217;t declare more than one copy and get two different sets of behavior simultaneously. And you&#8217;ll eventually want to do that! What if you had a collection of resources that created a virtual host definition for a web server, or cloned a Git repository, or managed a user account complete with group, SSH key, home directory contents, sudoers entry, and .bashrc/.vimrc/etc. files? What if you wanted more than one Git repo, user account, or vhost on a single machine?</p>

<p>Well, you&#8217;d <a href="./definedtypes.html">whip up a defined resource type</a>.</p>


              <blockquote><p style="font-size: 1.3em; text-align: center;"><a href="#content">↑ Back to top</a></p></blockquote>
            </div>
            <nav class="main">
                  <div id="subCol">


<ul>
  <li><a href="./../learning/index.html">Introduction</a></li>
  <li><strong>Part one: Serverless Puppet</strong>
    <ul>
      <li><a href="./../learning/ral.html">Resources and the RAL</a></li>
      <li><a href="./../learning/manifests.html">Manifests</a></li>
      <li><a href="./../learning/ordering.html">Ordering</a></li>
      <li><a href="./../learning/variables.html">Variables, Conditionals, Facts</a></li>
      <li><a href="./../learning/modules1.html">Modules and Classes</a></li>
      <li><a href="./../learning/templates.html">Templates</a></li>
      <li><span class="currentpage">Class Parameters</span></li>
      <li><a href="./../learning/definedtypes.html">Defined Types</a></li>
    </ul>
  </li>
  <li><strong>Part two: Master/Agent Puppet</strong>
    <ul>
      <li><a href="./../learning/agentprep.html">Preparing an Agent VM</a></li>
      <li><a href="./../learning/agent_master_basic.html">Basic Agent/Master Puppet</a></li>
    </ul>
  </li>
</ul>

                      <div style="margin-top: 1.5em; padding-bottom: 10px;">
                          <p style="font-family: 'Lucida Grande',Lucida,Verdana,sans-serif;font-size: 16px; font-weight: bold; line-height: 22px; margin-bottom: 10px;">Download the Docs</p>
                          <a href="http://info.puppetlabs.com/download-pdfs.html"><img src="./../images/smallbits_small_docs.png" alt="Puppet docs download"></a>
                      </div>
                      <div style="margin-top: 0; padding-bottom: 10px;">
                          <p style="font-family: 'Lucida Grande',Lucida,Verdana,sans-serif;font-size: 16px; font-weight: bold; line-height: 22px; margin-bottom: 10px;">Download Puppet Enterprise</p>
                          <a href="http://info.puppetlabs.com/download-pe.html"><img src="./../images/puppet_cert_home.jpg" alt="Puppet Enterprise promo"></a>
                      </div>
                  </div>
            </nav>
          </div>
        </div>
      </section>

		<footer id="footer">
      <div class="site-width">

        <div class="primary-secondary-content">
          <div class="primary-content">
            <section id="newsletter">
                 <h4>Puppet Labs is Hiring</h4>
                 <p><a href="http://www.puppetlabs.com/company/jobs/">Engineers, developers & consultants</a>
                  <p>
		<h4>Newsletter</h4>

              <p>Stay up to date on all things puppet</p>

				<form class="lpeRegForm formNotEmpty" method="post" enctype="application/x-www-form-urlencoded" action="http://info.puppetlabs.com/index.php/leadCapture/save"; id="mktForm_1013" name="mktForm_1013">

				<label>Email Address:</label><span class='mktInput'><input class='mktFormText mktFormEmail' name="Email" id="Email" type='text' value="" maxlength='255'  /><span class='mktFormMsg'></span></span>

				<input id='mktFrmSubmit' type='submit' class='btn' style="width: auto; overflow: visible; padding-left: .25em; padding-right: .25em;" value='Subscribe' name='submitButton' onclick='formSubmit(document.getElementById("mktForm_1013")); return false;' />

				<input style='display: none;' id='mktFrmReset' type='reset' value='Clear' name='resetButton' onclick='formReset(document.getElementById("mktForm_1013")); return false;' />

				<span style="display:none;"><input type="text" name="_marketo_comments" value="" /></span>
				<input type="hidden" name="lpId" value="-1" />
				<input type="hidden" name="subId" value="100" />

				<input type="hidden" name="kw" value="" />
				<input type="hidden" name="cr" value="" />

				<input type="hidden" name="searchstr" value="" />
				<input type="hidden" name="lpurl" value="http://info.puppetlabs.com/testsubscription.html?cr={creative}&kw={keyword}"; />
				<input type="hidden" name="formid" value="1013" />
				<input type="hidden" name="returnURL" value="http://www.puppetlabs.com/misc/subscription-thank-you/"; />
				<input type="hidden" name="retURL" value="http://www.puppetlabs.com/misc/subscription-thank-you/"; />
				<input type="hidden" name="_mkt_disp" value="return" />
				<input type="hidden" name="_mkt_trk" value="" />

				</form>
				<script type="text/javascript" src="http://info.puppetlabs.com/js/mktFormSupport.js"></script>

				<script type="text/javascript">
				function formSubmit(elt) {
				return Mkto.formSubmit(elt);
				}
				function formReset(elt) {
				return Mkto.formReset(elt);
				}
				</script>

<a href="http://info.puppetlabs.com/puppet-enterprise" class="fbtn">Try Puppet Enterprise FREE</a>

            </section>
            <section id="elsewhere">
              <h4>Get Involved</h4>
              <ul>

                <li class="chat"><a href="http://webchat.freenode.net/?channels=puppet" rel="external"><span class="indicator"></span><span>Chat with us on IRC</span></a></li>
		<li class="discussion"><a href="http://groups.google.com/group/puppet-dev" rel="external"><span class="indicator"></span><span>Join the Puppet Developer List</span></a></li>
                <li class="discussion"><a href="http://groups.google.com/group/puppet-users?pli=1" rel="external"><span class="indicator"></span><span>Join the Puppet User List</span></a></li>

                <li class="linkedin"><a href="http://www.linkedin.com/groups?about=&gid=696467&trk=anet_ug_grppro" rel="external"><span class="indicator"></span><span>Join the Puppet Users LinkedIn group</span></a></li>

              </ul>
		<p>
		              		<h4>Follow us&#8230;</h4>

              		<ul class="followus">


			<li><a href="http://feeds.feedburner.com/PuppetLabs" target="_blank"><img src="http://www.puppetlabs.com/wp-content/plugins/my-profiles/images/rss.png" border="0"></a></li>
			<li><a href="http://www.facebook.com/pages/Puppet-Labs/219089920711" target="_blank"><img src="http://www.puppetlabs.com//wp-content/plugins/my-profiles/images/facebook.png" border="0"></a></li>
			<li><a href="http://www.twitter.com/puppetlabs" target="_blank"><img src="http://www.puppetlabs.com//wp-content/plugins/my-profiles/images/twitter.png" border="0"></a></li>
			<li><a href="http://www.linkedin.com/groups?about=&amp;gid=696467&amp;trk=anet_ug_grppro" target="_blank"><img src="http://www.puppetlabs.com//wp-content/uploads/2011/01/LinkedIn_IN_Icon_32px.png" border="0"></a></li>    <li><a href="https://github.com/puppetlabs" target="_blank"><img src="http://www.puppetlabs.com//wp-content/uploads/2011/01/github_icon.png" border="0"></a></li>
			<li><a href="https://plus.google.com/112682055028218091774?rel=author" target="_blank"><img src="https://puppetlabs.com/wp-content/uploads/2013/05/google_plus32x32.png" alt="Find Us on Google+" border="0"></a></li>
					</ul>

              	</p>

            </section>
          </div>
          <div class="secondary-content">
            <section id="book-it">
              <h4>Get the book!</h4>

              <p>James Turnbull and Jeff McCune's book <a href="http://www.apress.com/9781430230571" rel="nofollow">Pro Puppet</a> is a comprehensive and up-to-date look at Puppet and MCollective. </p>
              <a href="http://www.apress.com/9781430230571" rel="nofollow"><img src="http://www.puppetlabs.com/wp-content/uploads/2011/05/propuppetthumb.png" /></a>
            </section>
          </div>
        </div>
      </div>
		</footer>

    <div id="copyright">
      <div class="site-width">
        &copy; 2011 <a href="http://www.puppetlabs.com/" title="Puppet Labs">Puppet Labs</a>
        <span class="vcard">
         <span class="org"></span>
         <a class="email" href="mailto:info@puppetlabs.com">info@puppetlabs.com</a>

          <span class="adr">
           <span class="street-address">926 NW 13th Avenue #210</span>
           /
           <span class="locality">Portland</span>,
           <span class="region">OR</span>
           <span class="postal-code">97209</span>

          </span>

         <span class="tel">1-877-575-9775</span>
        </span>
      </div>
    </div>

  	<script type="text/javascript">Cufon.now();</script>
  	<style type="text/css">h1, h2, .btn { visibility : visible; }</style>


	</body>
</html>
