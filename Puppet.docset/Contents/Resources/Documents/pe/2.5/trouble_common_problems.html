<!DOCTYPE html>
<html dir="ltr" lang="en-US">
  <head>
  	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  	<title>PE 2.5 » Troubleshooting » Common Problems & Solutions — Documentation — Puppet Labs</title>
  	<link rel="alternate" type="application/atom+xml" title="Puppet Labs Documentation Updates" href="https://github.com/puppetlabs/puppet-docs/commits/master.atom">
    <link rel="alternate" type="application/atom+xml" title="Puppet Labs Blog Feed" href="http://puppetlabs.com/feed/atom/">
    <link rel='index' title='Puppet Labs Documentation' href='http://docs.puppetlabs.com' />
    <link rel='icon' href='./../../favicon.ico' />


  <meta name="description" content="The Installer is FailingHere are the main problems that can cause an install to blow up.Is DNS Wrong?If name resolution at your site isn&#8217;t qu...">



    <!-- FIXME: absolute paths -->

    <script type='text/javascript' src='./../../files/javascripts/html5.js'></script>
    <script type='text/javascript' src='./../../files/javascripts/jquery-1.3.2.min.js'></script>
    <script type='text/javascript' src='./../../files/javascripts/drop_down.js'></script>
    <script type='text/javascript' src='./../../files/javascripts/cufon-yui.js'></script>
    <script type='text/javascript' src='./../../files/fonts/Klavika_400-Klavika_600.font.js'></script>
    <script type='text/javascript' src='./../../files/javascripts/ampersands.js'></script>
    <script type='text/javascript' src='./../../files/javascripts/navigation-accordion.js'></script>

    <script type="text/javascript" src="http://puppetlabs.com/wp-content/themes/puppetlabs/javascripts/leadcapture.js"></script>

    <!-- All in One SEO Pack 1.6.10.1 by Michael Torbert of Semper Fi Web Design[127,146] -->
    <meta name="keywords" content="Puppet, puppet labs, reductive labs, open source, system administrator, ruby, data center, automation, support" />
    <!-- /all in one seo pack -->

    <!-- Give us the option of setting a canonical URL in yaml frontmatter -NF -->
    <link rel="canonical" href="http://docs.puppetlabs.com/pe/latest/trouble_install.html" />

    <!-- FIXME: absolute paths -->

    <link rel="stylesheet" type="text/css" href="./../../files/stylesheets/style.css" media="screen">
    <link rel="stylesheet" type="text/css" href="./../../files/stylesheets/syntax.css" media="screen"> <!-- index -->
    <link rel="stylesheet" type="text/css" href="./../../files/stylesheets/adbanner.css" media="screen">

    <!--[if IE 7]>
	  <link rel="stylesheet" type="text/css" href="./../../files/stylesheets/ie_7.css" media="screen"> <!-- index -->
    <![endif]-->

    <!--[if IE 8]>
	    <link rel="stylesheet" type="text/css" href="./../../files/stylesheets/ie_8.css" media="screen"> <!-- index -->
    <![endif]-->

  	<script type="text/javascript">
      Cufon.replace('h1, h2', { fontWeight: '600' });
  	</script>
</head>




  <body id="puppetlabsdocs" class="docs">
  <style type="text/css">h1, h2{ visibility : hidden }</style>
  <!--[if IE 8]>
    <style type="text/css">h1, h2{ visibility : visible }</style>
  <![endif]-->

  	<header id="header">
      <div class="site-width">
    		<h1><a href="http://puppetlabs.com/"><span>Puppet Labs</span></a></h1>
        <a class="screen-reader-content" href="#content">Skip navigation</a>
        <nav>
    		<ul id="global-navigation">
          <li id="puppet-tab" class="with-submenu">
            <a href="http://puppetlabs.com/puppet/puppet-enterprise">
              <span>Products</span>
              <span class="drop-down-trigger"></span>
            </a>
            <ul>
			<li>
                <ul>
                   <a href="http://puppetlabs.com/puppet/what-is-puppet/">What is Puppet?</a>
                </ul>
              </li>
			       <li>
                <ul>
                   <a href="http://puppetlabs.com/puppet/puppet-enterprise/">Puppet Enterprise</a>
                </ul>
              </li>
            <li>
                <ul>
                   <a href="http://puppetlabs.com/puppet/whats-new/">What's New in 2.5</a>
                </ul>
              </li>
            <li>
                <ul>
                   <a href="http://puppetlabs.com/puppet/puppet-open-source/">Puppet Open Source</a>
                </ul>
              </li>
            <li>
                <ul>
                   <a href="http://puppetlabs.com/puppet/enterprise-vs-open-source/">Enterprise vs. Open Source</a>
                </ul>
              </li>
              <li>
                <ul>
                  <a href="http://forge.puppetlabs.com">Puppet Forge</a>
                </ul>
              </li>
              <li>
                <ul>
                  <a href="http://puppetlabs.com/puppet/requirements/">Components &amp; Requirements</a>
                </ul>
              </li>
              <li>
                <ul>
                  <a href="http://puppetlabs.com/puppet/faq/">FAQ</a>
                </ul>
              </li>
			  <li>
                <ul>
                  <a href="http://puppetlabs.com/puppet/how-to-buy/">How to Buy</a>
                </ul>
              </li>
            </ul>
          </li>
          <li id="solutions-tab" class="with-submenu">
            <a href="http://puppetlabs.com/solutions/">
              <span>Solutions</span>
              <span class="drop-down-trigger"></span>
            </a>
            <ul>
              <li class="page_item page-item-12296"><a href="http://puppetlabs.com/solutions/configuration-management/">Configuration Management</a></li>
<li class="page_item page-item-986"><a href="http://puppetlabs.com/solutions/virtualization-management/">Virtualization Management</a></li>
<li class="page_item page-item-993"><a href="http://puppetlabs.com/solutions/cloud-management/">Cloud Management</a></li>
<li class="page_item page-item-996"><a href="http://puppetlabs.com/solutions/it-compliance/">IT Compliance</a></li>
<li class="page_item page-item-9520"><a href="http://puppetlabs.com/solutions/devops/">DevOps</a></li>
<li class="page_item page-item-991"><a href="http://puppetlabs.com/solutions/manage-os-x-resources/">OS X Desktops</a></li>
            </ul>
          </li>
          <li id="services-tab" class="with-submenu">
            <a href="http://puppetlabs.com/services/">
              <span>Services</span>
              <span class="drop-down-trigger"></span>
            </a>
            <ul>
              <li class="page_item page-item-783"><a href="http://puppetlabs.com/services/overview/">Overview</a></li>
<li class="page_item page-item-1052"><a href="http://puppetlabs.com/services/customer-support/">Customer Support</a></li>
<li class="page_item page-item-11022"><a href="http://puppetlabs.com/services/support-plans/">Support Plans</a></li>
<li class="page_item page-item-845"><a href="http://puppetlabs.com/services/training-workshops/">On-Site Education</a></li>
<li class="page_item page-item-4899"><a href="http://puppetlabs.com/services/consulting/">Professional Services</a></li>
<li class="page_item page-item-849"><a href="http://puppetlabs.com/category/events/upcoming/">Events &amp; Workshops</a></li>
<li class="page_item page-item-851"><a href="http://puppetlabs.com/services/partners/">Partners</a></li>
            </ul>
          </li>
                    <li id="resources-tab" class="with-submenu">
            <a href="http://puppetlabs.com/resources/">
              <span>Resources</span>
              <span class="drop-down-trigger"></span>
            </a>
            <ul>
              <li class="page_item page-item-1048"><a href="http://puppetlabs.com/resources/overview-2/">Overview</a></li>
<li class="page_item page-item-1040"><a href="http://docs.puppetlabs.com">Documentation</a></li>
<li class="page_item page-item-872"><a href="http://info.puppetlabs.com/register-download">Downloads</a></li>
<li class="page_item page-item-1961"><a href="http://forge.puppetlabs.com">Puppet Forge</a></li>
<li class="page_item page-item-835"><a href="http://info.puppetlabs.com/download-whitepapers.html">White Papers</a></li>
<li class="page_item page-item-1967"><a href="http://projects.puppetlabs.com/projects/puppet/wiki">Wiki</a></li>
<li class="page_item page-item-7279"><a href="http://puppetlabs.com/resources/webinars/">Upcoming Webinars</a></li>
<li class="page_item page-item-10183"><a href="http://puppetlabs.com/resources/newsletter/">Newsletter</a></li>
<li class="page_item page-item-12263"><a href="http://puppetlabs.com/resources/tech-notes/">Tech Notes</a></li>
<li class="page_item page-item-10265"><a href="http://info.puppetlabs.com/pe2-webinar.html">Webinars</a></li>
            </ul>
          </li>

          <li id="customers-tab" class="with-submenu">
            <a href="http://puppetlabs.com/customers/companies/">
              <span>Customers</span>
              <span class="drop-down-trigger"></span>
            </a>
            <ul>
			<li>
                <ul>
                  <a href="http://puppetlabs.com/customers/companies/">Companies</a>
                </ul>
              </li>
			  <li>
                <ul>
                  <a href="http://puppetlabs.com/customers/case-studies/">Case Studies</a>
                </ul>
              </li>
			  <li>
                <ul>
                  <a href="http://puppetlabs.com/customers/product-testimonials/">Product Testimonials</a>
                </ul>
              </li>
			    <li>
                <ul>
                  <a href="http://puppetlabs.com/customers/what-customers-are-saying/">Service Testimonials</a>
                </ul>
              </li>
            </ul>
          </li>
          <li id="community-tab" class="with-submenu">
            <a href="http://puppetlabs.com/community/">
              <span>Community</span>
              <span class="drop-down-trigger"></span>
            </a>

 <ul>
			<li>
                <ul>
                  <a href="http://puppetlabs.com/community/overview/">Overview</a>
                </ul>
              </li>
			<li>
                <ul>
                  <a href="http://puppetlabs.com/blog">Blog</a>
                </ul>
              </li>
			  <li>
                <ul>
                  <a href="http://puppetlabs.com/community/puppet-camp/">Puppet Camp</a>
                </ul>
              </li>
			  <li>
                <ul>
                  <a href="http://puppetlabs.com/community/user-groups-and-devops-groups/">Puppet User Groups & DevOps Groups</a>
                </ul>
              </li>
	          <li>
                <ul>
                  <a href="http://puppetlabs.com/community/presentations/">Presentations</a>
                </ul>
              </li>
			    <li>
                <ul>
                  <a href="http://puppetlabs.com/community/videos/">Videos</a>
                </ul>
              </li>
            </ul>

          <li id="company-tab" class="with-submenu">
            <a href="http://puppetlabs.com/company/">
              <span>Company</span>
              <span class="drop-down-trigger"></span>
            </a>
            <ul>
              <li class="page_item page-item-2316"><a href="http://puppetlabs.com/company/overview/">Overview</a></li>
<li class="page_item page-item-2179"><a href="http://puppetlabs.com/company/news/">News</a>
<ul class='children'>
	<li class="page_item page-item-2338"><a href="http://puppetlabs.com/company/news/press-releases/">Press Releases</a></li>
	<li class="page_item page-item-2383"><a href="http://puppetlabs.com/company/news/media-kit/">Media Kit</a></li>
</ul>
</li>
<li class="page_item page-item-1571"><a href="http://puppetlabs.com/company/careers/">Careers</a></li>
<li class="page_item page-item-10372"><a href="http://puppetlabs.com/company/management/">Management</a></li>
<li class="page_item page-item-10311"><a href="http://puppetlabs.com/company/board-and-advisors/">Board and Advisors</a></li>
<li class="page_item page-item-10367"><a href="http://puppetlabs.com/company/investors/">Investors</a></li>
<li class="page_item page-item-2313"><a href="http://puppetlabs.com/company/contact-us/">Contact Us</a></li>
<li class="page_item page-item-10579"><a href="http://puppetlabs.com/company/awards/">Awards</a></li>
            </ul>
          </li>
    		</ul>
          <div id="misc-navigation">
			  <ul>
				<li><a href="http://puppetlabs.com/security/">Security</a></li>
				<li><a href="http://docs.puppetlabs.com">Documentation</a></li>
				<li><a href="http://puppetlabs.com/resources/customer-support/">Support</a></li>
			        <li><a href="http://projects.puppetlabs.com/">Bug Tracker</a></li>
				<li><a href="http://puppetlabs.com/company/contact/contact-us">Contact Us</a></li>
				<li><a href="http://info.puppetlabs.com/download-pe2.html" class="gateway">Download</a></li>
			  </ul>
			<form action="http://www.google.com/cse" id="cse-search-box">
			  <div>
				<input type="hidden" name="cx" value="017668764424496204839:ubligvgbenm" />
				<input type="hidden" name="ie" value="UTF-8" />
				<input type="text" name="q" class="gsc-input" size="31" />
				<input type="submit" name="sa" class="searchbtn" value="Search" />
			  </div>
			</form>
			<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&lang=en"></script>
          </div>
      </nav>
    	</div>
    </header>

      <section id="masthead">
        <div class="site-width">
          <h1>Docs: <span class="section-name">PE 2.5 » Troubleshooting » Common Problems & Solutions</span></h1>
          <ul id="doc-navigation">
            <li><a href="./../../index.html">Docs Home</a></li>
            <li class="with-submenu">
              <a href="#">
                <span>Quick Nav</span>
                <span class="drop-down-trigger"></span>
              </a>
               <!-- the following links can't be relative, unfortunately -->
               <!-- future: add some JS to disable this if running from file:// -->
                               <dl>
                  <dt>Puppet Documentation</dt>
                      <dd><a href="./../../puppet/3/reference/index.html">Puppet 3 Reference Manual</a></dd>
                      <dd><a href="./../../puppet/2.7/reference/index.html">Puppet 2.7 Reference Manual</a></dd>
                      <dd><a href="./../../pe/latest/index.html">Puppet Enterprise User's Guide</a></dd>
                      <dd><a href="./../../learning/index.html">Learning Puppet</a></dd>
                      <dd><a href="./../../references/latest/type.html">Resource Types</a></dd>
                      <dd><a href="./../../references/latest/function.html">Functions</a></dd>
                      <dd><a href="./../../references/latest/configuration.html">Configuration</a></dd>
                      <dd><a href="./../../references/latest/developer/index.html">Developer</a></dd>
                      <dd><a href="./../../references/glossary.html">Glossary of Puppet Terms</a></dd>
                      <dd><a href="./../../references/index.html">Older References</a></dd>
                  <dt>Facter</dt>
                      <dd><a href="./../../facter/latest/core_facts.html">Core Facts Reference</a></dd>
                  <dt>PuppetDB</dt>
                      <dd><a href="./../../puppetdb/1/index.html">PuppetDB 1 Manual</a></dd>
                  <dt>MCollective</dt>
                      <dd><a href="./../../mcollective/index.html">Index</a></dd>
                      <dd><a href="./../../mcollective/reference/index.html">References</a></dd>
                      <dd><a href="./../../mcollective/simplerpc/index.html">Writing Plugins</a></dd>
                      <dd><a href="./../../mcollective/releasenotes.html">Release Notes</a></dd>
                </dl>

            </li>
            <li><a href="./../../contribute.html">Contribute</a></li>
          </ul>
        </div>
        <br />
      </section>

      <section id="content">
        <div class="site-width">
          <div class="primary-secondary-content">
            <div class="primary-content">
              <h1>Troubleshooting Common Errors</h1>
              <nav class="in-page" id="page-nav">
<ol class="toc">
  <li class="toc-lv2"><a href="#the-installer-is-failing">The Installer is Failing</a>
<ol class="toc">
   <li class="toc-lv3"><a href="#is-dns-wrong">Is DNS Wrong?</a></li>
   <li class="toc-lv3"><a href="#are-the-security-settings-wrong">Are the Security Settings Wrong?</a></li>
   <li class="toc-lv3"><a href="#did-you-try-to-install-the-console-before-the-puppet-master">Did You Try to Install the Console Before the Puppet Master?</a></li>
   <li class="toc-lv3"><a href="#how-do-i-recover-from-a-failed-install">How Do I Recover From a Failed Install?</a></li>
</ol></li>
  <li class="toc-lv2"><a href="#agent-nodes-cant-retrieve-their-configurations">Agent Nodes Can&#8217;t Retrieve Their Configurations</a>
<ol class="toc">
   <li class="toc-lv3"><a href="#is-the-puppet-master-reachable-from-the-agents">Is the Puppet Master Reachable From the Agents?</a></li>
   <li class="toc-lv3"><a href="#can-the-puppet-master-reach-the-console">Can the Puppet Master Reach the Console?</a></li>
   <li class="toc-lv3"><a href="#do-your-agents-have-signed-certificates">Do Your Agents Have Signed Certificates?</a></li>
   <li class="toc-lv3"><a href="#do-agents-trust-the-masters-certificate">Do Agents Trust the Master&#8217;s Certificate?</a></li>
   <li class="toc-lv3"><a href="#can-agents-reach-the-filebucket-server">Can Agents Reach the Filebucket Server?</a></li>
</ol></li>
  <li class="toc-lv2"><a href="#nodevmware-and-nodeaws-arent-working">node_vmware and node_aws Aren&#8217;t Working</a></li>
  <li class="toc-lv2"><a href="#the-console-has-too-many-pending-tasks">The Console Has Too Many Pending Tasks</a></li>
  <li class="toc-lv2"><a href="#console-account-confirmation-emails-have-incorrect-links">Console Account Confirmation Emails Have Incorrect Links</a></li>
</ol></nav>
              <h2 id="the-installer-is-failing">The Installer is Failing</h2>

<p>Here are the main problems that can cause an install to blow up.</p>

<h3 id="is-dns-wrong">Is DNS Wrong?</h3>

<p>If name resolution at your site isn&#8217;t quite behaving right, PE&#8217;s installer can go haywire.</p>

<ul>
  <li>Puppet agent has to be able to reach the puppet master server at one of its valid DNS names. (Specifically, the name you identified as the master&#8217;s hostname during the installer interview.)</li>
  <li>The puppet master also has to be able to reach <strong>itself</strong> at the puppet master hostname you chose during installation.</li>
  <li>If you&#8217;ve split the master and console roles onto different servers, they have to be able to talk to each other as well. </li>
</ul>

<h3 id="are-the-security-settings-wrong">Are the Security Settings Wrong?</h3>

<p>The installer fails in a similar way when the system&#8217;s firewall or security group is restricting the ports Puppet uses.</p>

<ul>
  <li>Puppet communicates on <strong>ports 8140, 61613, and 443.</strong> If you are installing the puppet master and the console on the same server, it must accept inbound traffic on all three ports. If you&#8217;ve split the two roles, the master must accept inbound traffic on 8140 and 61613 and the console must accept inbound traffic on 8140 and 443.</li>
  <li>If your puppet master has multiple network interfaces, make sure it is allowing traffic via the IP address that its valid DNS names resolve to, not just via an internal interface. </li>
</ul>

<h3 id="did-you-try-to-install-the-console-before-the-puppet-master">Did You Try to Install the Console Before the Puppet Master?</h3>

<p>If you are installing the console and the puppet master on separate servers and tried to install the console first, the installer may fail. </p>

<h3 id="how-do-i-recover-from-a-failed-install">How Do I Recover From a Failed Install?</h3>

<p>First, fix any configuration problem that may have caused the install to fail. See above for a list of the most common errors. </p>

<p>Next, run the uninstaller script. <a href="./install_uninstalling.html">See the uninstallation instructions in this guide</a> for full details.</p>

<p>After you have run the uninstaller, you can safely run the installer again.</p>

<h2 id="agent-nodes-cant-retrieve-their-configurations">Agent Nodes Can&#8217;t Retrieve Their Configurations</h2>

<h3 id="is-the-puppet-master-reachable-from-the-agents">Is the Puppet Master Reachable From the Agents?</h3>

<p>Although this would probably have caused a problem during installation, it&#8217;s worth checking it first. You can check whether the master is reachable and active by trying:</p>

<pre><code>$ telnet &lt;puppet master's hostname&gt; 8140
</code></pre>

<p>If the puppet master is alive and reachable, you&#8217;ll get something like: </p>

<pre><code>Trying 172.16.158.132...
Connected to screech.example.com.
Escape character is '^]'.
</code></pre>

<p>Otherwise, it will return something like &#8220;name or service not known.&#8221;</p>

<p>To fix this, make sure the puppet master server is reachable at the DNS name your agents know it by and make sure that the <code>pe-httpd</code> service is running. </p>

<h3 id="can-the-puppet-master-reach-the-console">Can the Puppet Master Reach the Console?</h3>

<p>The puppet master depends on the console for the names of the classes an agent node should get. If it can&#8217;t reach the console, it can&#8217;t compile configurations for nodes.</p>

<p>Check the puppet agent logs <!-- TODO link to the logs --> on your nodes, or run <code>puppet agent --test</code> on one of them; if you see something like <code>err: Could not retrieve catalog from remote server: Error 400 on SERVER: Could not find node 'agent01.example.com'; cannot compile</code>, the master may be failing to find the console.</p>

<p>To fix this, make sure that the console is alive by <a href="./console_navigating.html">navigating to its web interface</a>. If it can&#8217;t be reached, make sure DNS is set up correctly for the console server and ensure that the <code>pe-httpd</code> service on it is running. </p>

<p>If the console is alive and reachable from the master but the master can&#8217;t retrieve node info from it, the master may be configured with the wrong console hostname. You&#8217;ll need to:</p>

<ul>
  <li>Edit the <code>reporturl</code> setting in the master&#8217;s <code>/etc/puppetlabs/puppet/puppet.conf</code> file to point to the correct host.</li>
  <li>Edit the <code>ENC_BASE_URL</code> variable in the master&#8217;s <code>/etc/puppetlabs/puppet-dashboard/external_node</code> file to point to the correct host. </li>
</ul>

<h3 id="do-your-agents-have-signed-certificates">Do Your Agents Have Signed Certificates?</h3>

<p>Check the puppet agent logs <!-- TODO log link --> on your nodes and look for something like the following: </p>

<pre><code>warning: peer certificate won't be verified in this SSL session
</code></pre>

<p>If you see this, it means the agent has submitted a certificate signing request which hasn&#8217;t yet been signed. Run <code>puppet cert list</code> on the puppet master to see a list of pending requests, then run <code>puppet cert sign &lt;NODE NAME&gt;</code> to sign a given node&#8217;s certificate. The node should successfully retrieve and apply its configuration the next time it runs. </p>

<h3 id="do-agents-trust-the-masters-certificate">Do Agents Trust the Master&#8217;s Certificate?</h3>

<p>Check the puppet agent logs <!-- TODO log link --> on your nodes and look for something like the following: </p>

<pre><code>err: Could not retrieve catalog from remote server: SSL_connect returned=1 errno=0
state=SSLv3 read server certificate B: certificate verify failed.  This is often
because the time is out of sync on the server or client
</code></pre>

<p>This could be one of several things. </p>

<h4 id="are-agents-contacting-the-master-at-a-valid-dns-name">Are Agents Contacting the Master at a Valid DNS Name?</h4>

<p>When you installed the puppet master role, you approved a list of valid DNS names to be included in the master&#8217;s certificate. <strong>Agents will ONLY trust the master if they contact it at one of THESE hostnames.</strong></p>

<p>To see the hostname agents are using to contact the master, run <code>puppet agent --configprint server</code>. If this does not return one of the valid DNS names you chose during installation of the master, edit the <code>server</code> setting in the agents&#8217; <code>/etc/puppetlabs/puppet/puppet.conf</code> files to point to a valid DNS name.</p>

<p>If you need to reset your puppet master&#8217;s valid DNS names, run the following:</p>

<pre><code>$ /etc/init.d/pe-httpd stop
$ puppet cert clean &lt;puppet master's certname&gt;
$ puppet cert generate &lt;puppet master's certname&gt; --dns_alt_names=&lt;comma-separated list of DNS names&gt;
$ /etc/init.d/pe-httpd start
</code></pre>

<h4 id="is-time-in-sync-on-your-nodes">Is Time in Sync on Your Nodes?</h4>

<p>&#8230;and was time in sync when your certificates were created?</p>

<p>Compare the output of <code>date</code> on your nodes. Then, run the following command on the puppet master to check the validity dates of a given certificate:</p>

<pre><code>$ openssl x509 -text -noout -in $(puppet master --configprint ssldir)/certs/&lt;NODE NAME&gt;.pem
</code></pre>

<ul>
  <li>If time is out of sync, get it in sync. Keep in mind that NTP can behave unreliably on virtual machines. </li>
  <li>If you have any certificates that aren&#8217;t valid until the future:
    <ul>
      <li>Delete the certificate on the puppet master with <code>puppet cert clean &lt;NODE NAME&gt;</code>.</li>
      <li>Delete the SSL directory on the offending agent with <code>rm -rf $(puppet agent --configprint ssldir)</code>.</li>
      <li>Run <code>puppet agent --test</code> on that agent to generate a new certificate request, then sign that request on the master with <code>puppet cert sign &lt;NODE NAME&gt;</code>.</li>
    </ul>
  </li>
</ul>

<h4 id="did-you-previously-have-an-unrelated-node-with-the-same-certname">Did You Previously Have an Unrelated Node With the Same Certname?</h4>

<p>If a node re-uses an old node&#8217;s certname and the master retains the previous node&#8217;s certificate, the new node will be unable to request a new certificate.</p>

<p>Run the following on the master:</p>

<pre><code>$ puppet cert clean &lt;NODE NAME&gt;
</code></pre>

<p>Then, run the following on the agent node:</p>

<pre><code>$ rm -rf $(puppet agent --configprint ssldir)
$ puppet agent --test
</code></pre>

<p>This should properly generate a new signing request.</p>

<h3 id="can-agents-reach-the-filebucket-server">Can Agents Reach the Filebucket Server?</h3>

<p>Agents attempt to back up files to the filebucket on the puppet master, but they get the filebucket hostname from the site manifest instead of their configuration file. If puppet agent is logging &#8220;could not back up&#8221; errors, your nodes are probably trying to back up files to the wrong hostname. These errors look like this: </p>

<pre><code>err: /Stage[main]/Pe_mcollective/File[/etc/puppetlabs/mcollective/server.cfg]/content:
change from {md5}778087871f76ce08be02a672b1c48bdc to
{md5}e33a27e4b9a87bb17a2bdff115c4b080 failed: Could not back up
/etc/puppetlabs/mcollective/server.cfg: getaddrinfo: Name or service not known
</code></pre>

<p>This usually happens when puppet master is installed with a certname that isn&#8217;t its hostname. To fix these errors, edit <code>/etc/puppetlabs/puppet/manifests/site.pp</code> <strong>on the puppet master</strong> so that the following resource&#8217;s <code>server</code> attribute points to the correct hostname:</p>

<div class="highlight"><pre><code class="ruby">    <span class="c1"># Define filebucket &#39;main&#39;:</span>
    <span class="n">filebucket</span> <span class="p">{</span> <span class="s1">&#39;main&#39;</span><span class="p">:</span>
      <span class="n">server</span> <span class="o">=&gt;</span> <span class="s1">&#39;&lt;PUPPET MASTER&#39;</span><span class="n">S</span> <span class="no">DNS</span> <span class="no">NAME</span><span class="o">&gt;</span><span class="err">&#39;</span><span class="p">,</span>
      <span class="n">path</span>   <span class="o">=&gt;</span> <span class="kp">false</span><span class="p">,</span>
    <span class="p">}</span>
</code></pre>
</div>

<p>Changing this on the puppet master will fix the error on all agent nodes.</p>

<h2 id="nodevmware-and-nodeaws-arent-working"><code>node_vmware</code> and <code>node_aws</code> Aren&#8217;t Working</h2>

<p>If the <a href="./cloudprovisioner_overview.html">cloud provisioning actions</a> are failing with an &#8220;err: Missing required arguments&#8221; message, you need to <a href="./cloudprovisioner_configuring.html">create a <code>~/.fog</code> file and populate it with the appropriate credentials</a>. </p>

<h2 id="the-console-has-too-many-pending-tasks">The Console Has Too Many Pending Tasks</h2>

<p>The console either does not have enough worker processes, or the worker processes have died and need to be restarted. </p>

<ul>
  <li><a href="./console_maintenance.html#restarting-the-background-tasks">See here to restart the worker processes</a></li>
  <li><a href="./config_advanced.html#fine-tuning-the-delayedjob-queue">See here to tune the number of worker processes</a></li>
</ul>

<h2 id="console-account-confirmation-emails-have-incorrect-links">Console Account Confirmation Emails Have Incorrect Links</h2>

<p>This can happen if the console&#8217;s authentication layer thinks it lives on a hostname that isn&#8217;t accessible to the rest of the world. The authentication system&#8217;s hostname is automatically detected during installation, and the installer can sometimes choose an internal-only hostname.</p>

<p>To fix this:</p>

<ol>
  <li>
    <p>Open the <code>/etc/puppetlabs/console_auth/cas_client_config.yml</code> file for editing. Locate the <code>cas_host</code> line, which is likely commented-out:</p>

    <pre><code> authentication:

   ## Use this configuration option if the CAS server is on a host different
   ## from the console-auth server.
   # cas_host: console.example.com:443
</code></pre>

    <p>Change its value to contain the <strong>public hostname</strong> of the console server, including the correct port. </p>
  </li>
  <li>
    <p>Open the <code>/etc/puppetlabs/console_auth/config.yml</code> file for editing. Locate the <code>console_hostname</code> line:</p>

    <pre><code> authentication:
   console_hostname: console.example.com
</code></pre>

    <p>Change its value if necessary. If you are serving the console on a port other than 443, be sure to add the port. (For example: <code>console.example.com:3000</code>)</p>
  </li>
</ol>

<hr />

<ul>
  <li><a href="./appendix.html">Next: Appendix</a></li>
</ul>

              <blockquote><p style="font-size: 1.3em; text-align: center;"><a href="#content">↑ Back to top</a></p></blockquote>
            </div>
            <nav class="main">
                  <div id="subCol">


<p class="versionnote">A newer version of Puppet Enterprise has been released!</p>
<ul class="versionnote">
  <li><a href="http://info.puppetlabs.com/download-pe.html">Download PE 3.0</a>.</li>
  <li><a href="./../../pe/3.0/index.html">PE 3.0 user's guide</a></li>
  <li><a href="./../../pe/latest/trouble_install.html">Jump to newest version of this page</a></li>
</ul>


<h3><a href="./index.html">Puppet Enterprise 2.5</a></h3>

<ul>
  <li><strong>Overview</strong>
    <ul>
      <li><a href="./overview_about_pe.html">About Puppet Enterprise</a></li>
      <li><a href="./overview_whats_new.html">New Features</a></li>
      <li><a href="./overview_getting_support.html">Getting Support</a></li>
    </ul>
  </li>
  <li><strong>Quick Start</strong>
    <ul>
        <li><a href="./quick_start.html">Quick Start: Using PE</a></li>
        <li><a href="./quick_writing.html">Quick Start: Writing Modules</a></li>
    </ul>
  </li>
  <li><strong>Installing Puppet Enterprise</strong>
    <ul>
      <li><a href="./install_system_requirements.html">System Requirements</a></li>
      <li><a href="./install_basic.html">Installing PE</a></li>
      <li><a href="./install_windows.html">Installing Windows Agents</a></li>
      <li><a href="./install_upgrading.html">Upgrading</a></li>
      <li><a href="./install_uninstalling.html">Uninstalling</a></li>
      <li><a href="./install_automated.html">Automated Installation</a></li>
      <li><a href="./install_answer_file_reference.html">Answer File Reference</a></li>
      <li><a href="./install_what_and_where.html">What gets installed where?</a></li>
    </ul>
  </li>
  <li><strong>The Console</strong>
    <ul>
      <li><a href="./console_accessing.html">Accessing the Console</a></li>
      <li><a href="./console_navigating.html">Navigating the Console</a></li>
      <li><a href="./console_reports.html">Viewing Reports and Inventory Data</a></li>
      <li><a href="./console_auth.html">Managing Users</a></li>
      <li><a href="./console_classes_groups.html">Grouping and Classifying Nodes</a></li>
      <li><a href="./console_live.html">Live Management</a></li>
      <li><a href="./console_live_resources.html">Live Management: Managing Resources</a></li>
      <li><a href="./console_live_puppet.html">Live Management: Controlling Puppet</a></li>
      <li><a href="./console_live_advanced.html">Live Management: Advanced Tasks</a></li>
      <li><a href="./console_maintenance.html">Console Maintenance</a></li>
    </ul>
  </li>
  <li><strong>Puppet</strong>
    <ul>
      <li><a href="./puppet_overview.html">Overview</a></li>
      <li><a href="./puppet_tools.html">Tools</a></li>
      <li><a href="./puppet_modules_manifests.html">Modules and Manifests</a></li>
      <li><a href="./puppet_data_library.html">Puppet Data Library</a></li>
      <li><a href="./puppet_references.html">References</a></li>
    </ul>
  </li>
   <li><strong>Configuring Puppet Enterprise</strong>
    <ul>
     <li><a href="./config_advanced.html">Advanced Configuration</a></li>
     <li><a href="./config_installing_additional.html">Installing Additional Components</a></li>
    </ul>
  </li>
  <li><strong>Orchestration</strong>
    <ul>
      <li><a href="./orchestration_overview.html">Overview</a></li>
      <li><a href="./orchestration_usage.html">Usage and Examples</a></li>
    </ul>
  </li>
  <li><strong>Cloud Provisioning</strong>
    <ul>
      <li><a href="./cloudprovisioner_overview.html">Overview</a></li>
      <li><a href="./cloudprovisioner_configuring.html">Installing & Configuring Cloud Provisioner</a></li>
      <li><a href="./cloudprovisioner_classifying_installing.html">Classifying Nodes & Remotely Installing Puppet</a></li>
      <li><a href="./cloudprovisioner_vmware.html">Provisioning with VMware</a></li>
      <li><a href="./cloudprovisioner_aws.html">Provisioning with AWS</a></li>
      <li><a href="./cloudprovisioner_workflow.html">Sample Workflow</a></li>
      <li><a href="./cloudprovisioner_troubleshooting.html">Troubleshooting</a></li>
    </ul>
  </li>
  <li><strong>The Compliance Workflow</strong>
    <ul>
      <li><a href="./compliance_basics.html">Basics and UI</a></li>
      <li><a href="./compliance_using.html">Using the Compliance Workflow</a></li>
      <li><a href="./compliance_tutorial.html">Tutorial</a></li>
    </ul>
  </li>
  <li><strong>The PE Accounts Module</strong>
    <ul>
      <li><a href="./accounts_user_type.html">The pe_accounts::user Type</a></li>
      <li><a href="./accounts_class.html">The pe_accounts Class</a></li>
    </ul>
  </li>
  <li><strong>Troubleshooting</strong>
    <ul>
     <li> <span class="currentpage">Common Problems & Solutions</span></li>
    </ul>
  </li>
  <li><strong>Appendix</strong>
    <ul>
      <li><a href="./appendix.html#release-notes">Release Notes</a></li>
      <li><a href="./appendix.html#known-issues">Known Issues</a></li>
    </ul>
  </li>
</ul>




                      <div style="margin-top: 1.5em; padding-bottom: 10px;">
                          <p style="font-family: 'Lucida Grande',Lucida,Verdana,sans-serif;font-size: 16px; font-weight: bold; line-height: 22px; margin-bottom: 10px;">Download the Docs</p>
                          <a href="http://info.puppetlabs.com/download-pdfs.html"><img src="./../../images/smallbits_small_docs.png" alt="Puppet docs download"></a>
                      </div>
                      <div style="margin-top: 0; padding-bottom: 10px;">
                          <p style="font-family: 'Lucida Grande',Lucida,Verdana,sans-serif;font-size: 16px; font-weight: bold; line-height: 22px; margin-bottom: 10px;">Download Puppet Enterprise</p>
                          <a href="http://info.puppetlabs.com/download-pe.html"><img src="./../../images/puppet_cert_home.jpg" alt="Puppet Enterprise promo"></a>
                      </div>
                  </div>
            </nav>
          </div>
        </div>
      </section>

		<footer id="footer">
      <div class="site-width">

        <div class="primary-secondary-content">
          <div class="primary-content">
            <section id="newsletter">
                 <h4>Puppet Labs is Hiring</h4>
                 <p><a href="http://www.puppetlabs.com/company/jobs/">Engineers, developers & consultants</a>
                  <p>
		<h4>Newsletter</h4>

              <p>Stay up to date on all things puppet</p>

				<form class="lpeRegForm formNotEmpty" method="post" enctype="application/x-www-form-urlencoded" action="http://info.puppetlabs.com/index.php/leadCapture/save"; id="mktForm_1013" name="mktForm_1013">

				<label>Email Address:</label><span class='mktInput'><input class='mktFormText mktFormEmail' name="Email" id="Email" type='text' value="" maxlength='255'  /><span class='mktFormMsg'></span></span>

				<input id='mktFrmSubmit' type='submit' class='btn' style="width: auto; overflow: visible; padding-left: .25em; padding-right: .25em;" value='Subscribe' name='submitButton' onclick='formSubmit(document.getElementById("mktForm_1013")); return false;' />

				<input style='display: none;' id='mktFrmReset' type='reset' value='Clear' name='resetButton' onclick='formReset(document.getElementById("mktForm_1013")); return false;' />

				<span style="display:none;"><input type="text" name="_marketo_comments" value="" /></span>
				<input type="hidden" name="lpId" value="-1" />
				<input type="hidden" name="subId" value="100" />

				<input type="hidden" name="kw" value="" />
				<input type="hidden" name="cr" value="" />

				<input type="hidden" name="searchstr" value="" />
				<input type="hidden" name="lpurl" value="http://info.puppetlabs.com/testsubscription.html?cr={creative}&kw={keyword}"; />
				<input type="hidden" name="formid" value="1013" />
				<input type="hidden" name="returnURL" value="http://www.puppetlabs.com/misc/subscription-thank-you/"; />
				<input type="hidden" name="retURL" value="http://www.puppetlabs.com/misc/subscription-thank-you/"; />
				<input type="hidden" name="_mkt_disp" value="return" />
				<input type="hidden" name="_mkt_trk" value="" />

				</form>
				<script type="text/javascript" src="http://info.puppetlabs.com/js/mktFormSupport.js"></script>

				<script type="text/javascript">
				function formSubmit(elt) {
				return Mkto.formSubmit(elt);
				}
				function formReset(elt) {
				return Mkto.formReset(elt);
				}
				</script>

<a href="http://info.puppetlabs.com/puppet-enterprise" class="fbtn">Try Puppet Enterprise FREE</a>

            </section>
            <section id="elsewhere">
              <h4>Get Involved</h4>
              <ul>

                <li class="chat"><a href="http://webchat.freenode.net/?channels=puppet" rel="external"><span class="indicator"></span><span>Chat with us on IRC</span></a></li>
		<li class="discussion"><a href="http://groups.google.com/group/puppet-dev" rel="external"><span class="indicator"></span><span>Join the Puppet Developer List</span></a></li>
                <li class="discussion"><a href="http://groups.google.com/group/puppet-users?pli=1" rel="external"><span class="indicator"></span><span>Join the Puppet User List</span></a></li>

                <li class="linkedin"><a href="http://www.linkedin.com/groups?about=&gid=696467&trk=anet_ug_grppro" rel="external"><span class="indicator"></span><span>Join the Puppet Users LinkedIn group</span></a></li>

              </ul>
		<p>
		              		<h4>Follow us&#8230;</h4>

              		<ul class="followus">


			<li><a href="http://feeds.feedburner.com/PuppetLabs" target="_blank"><img src="http://www.puppetlabs.com/wp-content/plugins/my-profiles/images/rss.png" border="0"></a></li>
			<li><a href="http://www.facebook.com/pages/Puppet-Labs/219089920711" target="_blank"><img src="http://www.puppetlabs.com//wp-content/plugins/my-profiles/images/facebook.png" border="0"></a></li>
			<li><a href="http://www.twitter.com/puppetlabs" target="_blank"><img src="http://www.puppetlabs.com//wp-content/plugins/my-profiles/images/twitter.png" border="0"></a></li>
			<li><a href="http://www.linkedin.com/groups?about=&amp;gid=696467&amp;trk=anet_ug_grppro" target="_blank"><img src="http://www.puppetlabs.com//wp-content/uploads/2011/01/LinkedIn_IN_Icon_32px.png" border="0"></a></li>    <li><a href="https://github.com/puppetlabs" target="_blank"><img src="http://www.puppetlabs.com//wp-content/uploads/2011/01/github_icon.png" border="0"></a></li>
			<li><a href="https://plus.google.com/112682055028218091774?rel=author" target="_blank"><img src="https://puppetlabs.com/wp-content/uploads/2013/05/google_plus32x32.png" alt="Find Us on Google+" border="0"></a></li>
					</ul>

              	</p>

            </section>
          </div>
          <div class="secondary-content">
            <section id="book-it">
              <h4>Get the book!</h4>

              <p>James Turnbull and Jeff McCune's book <a href="http://www.apress.com/9781430230571" rel="nofollow">Pro Puppet</a> is a comprehensive and up-to-date look at Puppet and MCollective. </p>
              <a href="http://www.apress.com/9781430230571" rel="nofollow"><img src="http://www.puppetlabs.com/wp-content/uploads/2011/05/propuppetthumb.png" /></a>
            </section>
          </div>
        </div>
      </div>
		</footer>

    <div id="copyright">
      <div class="site-width">
        &copy; 2011 <a href="http://www.puppetlabs.com/" title="Puppet Labs">Puppet Labs</a>
        <span class="vcard">
         <span class="org"></span>
         <a class="email" href="mailto:info@puppetlabs.com">info@puppetlabs.com</a>

          <span class="adr">
           <span class="street-address">926 NW 13th Avenue #210</span>
           /
           <span class="locality">Portland</span>,
           <span class="region">OR</span>
           <span class="postal-code">97209</span>

          </span>

         <span class="tel">1-877-575-9775</span>
        </span>
      </div>
    </div>

  	<script type="text/javascript">Cufon.now();</script>
  	<style type="text/css">h1, h2, .btn { visibility : visible; }</style>


	</body>
</html>
