<!DOCTYPE html>
<html dir="ltr" lang="en-US">
  <head>
  	<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  	<title>PE 3.0 » Console »  Configuration — Documentation — Puppet Labs</title>
  	<link rel="alternate" type="application/atom+xml" title="Puppet Labs Documentation Updates" href="https://github.com/puppetlabs/puppet-docs/commits/master.atom">
    <link rel="alternate" type="application/atom+xml" title="Puppet Labs Blog Feed" href="http://puppetlabs.com/feed/atom/">
    <link rel='index' title='Puppet Labs Documentation' href='http://docs.puppetlabs.com' />
    <link rel='icon' href='./../../favicon.ico' />


  <meta name="description" content="Configuring Console AuthenticationConfiguring the SMTP ServerThe console&#8217;s account system sends verification emails to new users, and require...">



    <!-- FIXME: absolute paths -->

    <script type='text/javascript' src='./../../files/javascripts/html5.js'></script>
    <script type='text/javascript' src='./../../files/javascripts/jquery-1.3.2.min.js'></script>
    <script type='text/javascript' src='./../../files/javascripts/drop_down.js'></script>
    <script type='text/javascript' src='./../../files/javascripts/cufon-yui.js'></script>
    <script type='text/javascript' src='./../../files/fonts/Klavika_400-Klavika_600.font.js'></script>
    <script type='text/javascript' src='./../../files/javascripts/ampersands.js'></script>
    <script type='text/javascript' src='./../../files/javascripts/navigation-accordion.js'></script>

    <script type="text/javascript" src="http://puppetlabs.com/wp-content/themes/puppetlabs/javascripts/leadcapture.js"></script>

    <!-- All in One SEO Pack 1.6.10.1 by Michael Torbert of Semper Fi Web Design[127,146] -->
    <meta name="keywords" content="Puppet, puppet labs, reductive labs, open source, system administrator, ruby, data center, automation, support" />
    <!-- /all in one seo pack -->

    <!-- Give us the option of setting a canonical URL in yaml frontmatter -NF -->
    <link rel="canonical" href="http://docs.puppetlabs.com/pe/latest/console_config.html" />

    <!-- FIXME: absolute paths -->

    <link rel="stylesheet" type="text/css" href="./../../files/stylesheets/style.css" media="screen">
    <link rel="stylesheet" type="text/css" href="./../../files/stylesheets/syntax.css" media="screen"> <!-- index -->
    <link rel="stylesheet" type="text/css" href="./../../files/stylesheets/adbanner.css" media="screen">

    <!--[if IE 7]>
	  <link rel="stylesheet" type="text/css" href="./../../files/stylesheets/ie_7.css" media="screen"> <!-- index -->
    <![endif]-->

    <!--[if IE 8]>
	    <link rel="stylesheet" type="text/css" href="./../../files/stylesheets/ie_8.css" media="screen"> <!-- index -->
    <![endif]-->

  	<script type="text/javascript">
      Cufon.replace('h1, h2', { fontWeight: '600' });
  	</script>
</head>




  <body id="puppetlabsdocs" class="docs">
  <style type="text/css">h1, h2{ visibility : hidden }</style>
  <!--[if IE 8]>
    <style type="text/css">h1, h2{ visibility : visible }</style>
  <![endif]-->

  	<header id="header">
      <div class="site-width">
    		<h1><a href="http://puppetlabs.com/"><span>Puppet Labs</span></a></h1>
        <a class="screen-reader-content" href="#content">Skip navigation</a>
        <nav>
    		<ul id="global-navigation">
          <li id="puppet-tab" class="with-submenu">
            <a href="http://puppetlabs.com/puppet/puppet-enterprise">
              <span>Products</span>
              <span class="drop-down-trigger"></span>
            </a>
            <ul>
			<li>
                <ul>
                   <a href="http://puppetlabs.com/puppet/what-is-puppet/">What is Puppet?</a>
                </ul>
              </li>
			       <li>
                <ul>
                   <a href="http://puppetlabs.com/puppet/puppet-enterprise/">Puppet Enterprise</a>
                </ul>
              </li>
            <li>
                <ul>
                   <a href="http://puppetlabs.com/puppet/whats-new/">What's New in 2.5</a>
                </ul>
              </li>
            <li>
                <ul>
                   <a href="http://puppetlabs.com/puppet/puppet-open-source/">Puppet Open Source</a>
                </ul>
              </li>
            <li>
                <ul>
                   <a href="http://puppetlabs.com/puppet/enterprise-vs-open-source/">Enterprise vs. Open Source</a>
                </ul>
              </li>
              <li>
                <ul>
                  <a href="http://forge.puppetlabs.com">Puppet Forge</a>
                </ul>
              </li>
              <li>
                <ul>
                  <a href="http://puppetlabs.com/puppet/requirements/">Components &amp; Requirements</a>
                </ul>
              </li>
              <li>
                <ul>
                  <a href="http://puppetlabs.com/puppet/faq/">FAQ</a>
                </ul>
              </li>
			  <li>
                <ul>
                  <a href="http://puppetlabs.com/puppet/how-to-buy/">How to Buy</a>
                </ul>
              </li>
            </ul>
          </li>
          <li id="solutions-tab" class="with-submenu">
            <a href="http://puppetlabs.com/solutions/">
              <span>Solutions</span>
              <span class="drop-down-trigger"></span>
            </a>
            <ul>
              <li class="page_item page-item-12296"><a href="http://puppetlabs.com/solutions/configuration-management/">Configuration Management</a></li>
<li class="page_item page-item-986"><a href="http://puppetlabs.com/solutions/virtualization-management/">Virtualization Management</a></li>
<li class="page_item page-item-993"><a href="http://puppetlabs.com/solutions/cloud-management/">Cloud Management</a></li>
<li class="page_item page-item-996"><a href="http://puppetlabs.com/solutions/it-compliance/">IT Compliance</a></li>
<li class="page_item page-item-9520"><a href="http://puppetlabs.com/solutions/devops/">DevOps</a></li>
<li class="page_item page-item-991"><a href="http://puppetlabs.com/solutions/manage-os-x-resources/">OS X Desktops</a></li>
            </ul>
          </li>
          <li id="services-tab" class="with-submenu">
            <a href="http://puppetlabs.com/services/">
              <span>Services</span>
              <span class="drop-down-trigger"></span>
            </a>
            <ul>
              <li class="page_item page-item-783"><a href="http://puppetlabs.com/services/overview/">Overview</a></li>
<li class="page_item page-item-1052"><a href="http://puppetlabs.com/services/customer-support/">Customer Support</a></li>
<li class="page_item page-item-11022"><a href="http://puppetlabs.com/services/support-plans/">Support Plans</a></li>
<li class="page_item page-item-845"><a href="http://puppetlabs.com/services/training-workshops/">On-Site Education</a></li>
<li class="page_item page-item-4899"><a href="http://puppetlabs.com/services/consulting/">Professional Services</a></li>
<li class="page_item page-item-849"><a href="http://puppetlabs.com/category/events/upcoming/">Events &amp; Workshops</a></li>
<li class="page_item page-item-851"><a href="http://puppetlabs.com/services/partners/">Partners</a></li>
            </ul>
          </li>
                    <li id="resources-tab" class="with-submenu">
            <a href="http://puppetlabs.com/resources/">
              <span>Resources</span>
              <span class="drop-down-trigger"></span>
            </a>
            <ul>
              <li class="page_item page-item-1048"><a href="http://puppetlabs.com/resources/overview-2/">Overview</a></li>
<li class="page_item page-item-1040"><a href="http://docs.puppetlabs.com">Documentation</a></li>
<li class="page_item page-item-872"><a href="http://info.puppetlabs.com/register-download">Downloads</a></li>
<li class="page_item page-item-1961"><a href="http://forge.puppetlabs.com">Puppet Forge</a></li>
<li class="page_item page-item-835"><a href="http://info.puppetlabs.com/download-whitepapers.html">White Papers</a></li>
<li class="page_item page-item-1967"><a href="http://projects.puppetlabs.com/projects/puppet/wiki">Wiki</a></li>
<li class="page_item page-item-7279"><a href="http://puppetlabs.com/resources/webinars/">Upcoming Webinars</a></li>
<li class="page_item page-item-10183"><a href="http://puppetlabs.com/resources/newsletter/">Newsletter</a></li>
<li class="page_item page-item-12263"><a href="http://puppetlabs.com/resources/tech-notes/">Tech Notes</a></li>
<li class="page_item page-item-10265"><a href="http://info.puppetlabs.com/pe2-webinar.html">Webinars</a></li>
            </ul>
          </li>

          <li id="customers-tab" class="with-submenu">
            <a href="http://puppetlabs.com/customers/companies/">
              <span>Customers</span>
              <span class="drop-down-trigger"></span>
            </a>
            <ul>
			<li>
                <ul>
                  <a href="http://puppetlabs.com/customers/companies/">Companies</a>
                </ul>
              </li>
			  <li>
                <ul>
                  <a href="http://puppetlabs.com/customers/case-studies/">Case Studies</a>
                </ul>
              </li>
			  <li>
                <ul>
                  <a href="http://puppetlabs.com/customers/product-testimonials/">Product Testimonials</a>
                </ul>
              </li>
			    <li>
                <ul>
                  <a href="http://puppetlabs.com/customers/what-customers-are-saying/">Service Testimonials</a>
                </ul>
              </li>
            </ul>
          </li>
          <li id="community-tab" class="with-submenu">
            <a href="http://puppetlabs.com/community/">
              <span>Community</span>
              <span class="drop-down-trigger"></span>
            </a>

 <ul>
			<li>
                <ul>
                  <a href="http://puppetlabs.com/community/overview/">Overview</a>
                </ul>
              </li>
			<li>
                <ul>
                  <a href="http://puppetlabs.com/blog">Blog</a>
                </ul>
              </li>
			  <li>
                <ul>
                  <a href="http://puppetlabs.com/community/puppet-camp/">Puppet Camp</a>
                </ul>
              </li>
			  <li>
                <ul>
                  <a href="http://puppetlabs.com/community/user-groups-and-devops-groups/">Puppet User Groups & DevOps Groups</a>
                </ul>
              </li>
	          <li>
                <ul>
                  <a href="http://puppetlabs.com/community/presentations/">Presentations</a>
                </ul>
              </li>
			    <li>
                <ul>
                  <a href="http://puppetlabs.com/community/videos/">Videos</a>
                </ul>
              </li>
            </ul>

          <li id="company-tab" class="with-submenu">
            <a href="http://puppetlabs.com/company/">
              <span>Company</span>
              <span class="drop-down-trigger"></span>
            </a>
            <ul>
              <li class="page_item page-item-2316"><a href="http://puppetlabs.com/company/overview/">Overview</a></li>
<li class="page_item page-item-2179"><a href="http://puppetlabs.com/company/news/">News</a>
<ul class='children'>
	<li class="page_item page-item-2338"><a href="http://puppetlabs.com/company/news/press-releases/">Press Releases</a></li>
	<li class="page_item page-item-2383"><a href="http://puppetlabs.com/company/news/media-kit/">Media Kit</a></li>
</ul>
</li>
<li class="page_item page-item-1571"><a href="http://puppetlabs.com/company/careers/">Careers</a></li>
<li class="page_item page-item-10372"><a href="http://puppetlabs.com/company/management/">Management</a></li>
<li class="page_item page-item-10311"><a href="http://puppetlabs.com/company/board-and-advisors/">Board and Advisors</a></li>
<li class="page_item page-item-10367"><a href="http://puppetlabs.com/company/investors/">Investors</a></li>
<li class="page_item page-item-2313"><a href="http://puppetlabs.com/company/contact-us/">Contact Us</a></li>
<li class="page_item page-item-10579"><a href="http://puppetlabs.com/company/awards/">Awards</a></li>
            </ul>
          </li>
    		</ul>
          <div id="misc-navigation">
			  <ul>
				<li><a href="http://puppetlabs.com/security/">Security</a></li>
				<li><a href="http://docs.puppetlabs.com">Documentation</a></li>
				<li><a href="http://puppetlabs.com/resources/customer-support/">Support</a></li>
			        <li><a href="http://projects.puppetlabs.com/">Bug Tracker</a></li>
				<li><a href="http://puppetlabs.com/company/contact/contact-us">Contact Us</a></li>
				<li><a href="http://info.puppetlabs.com/download-pe2.html" class="gateway">Download</a></li>
			  </ul>
			<form action="http://www.google.com/cse" id="cse-search-box">
			  <div>
				<input type="hidden" name="cx" value="017668764424496204839:ubligvgbenm" />
				<input type="hidden" name="ie" value="UTF-8" />
				<input type="text" name="q" class="gsc-input" size="31" />
				<input type="submit" name="sa" class="searchbtn" value="Search" />
			  </div>
			</form>
			<script type="text/javascript" src="http://www.google.com/cse/brand?form=cse-search-box&lang=en"></script>
          </div>
      </nav>
    	</div>
    </header>

      <section id="masthead">
        <div class="site-width">
          <h1>Docs: <span class="section-name">PE 3.0 » Console »  Configuration</span></h1>
          <ul id="doc-navigation">
            <li><a href="./../../index.html">Docs Home</a></li>
            <li class="with-submenu">
              <a href="#">
                <span>Quick Nav</span>
                <span class="drop-down-trigger"></span>
              </a>
               <!-- the following links can't be relative, unfortunately -->
               <!-- future: add some JS to disable this if running from file:// -->
                               <dl>
                  <dt>Puppet Documentation</dt>
                      <dd><a href="./../../puppet/3/reference/index.html">Puppet 3 Reference Manual</a></dd>
                      <dd><a href="./../../puppet/2.7/reference/index.html">Puppet 2.7 Reference Manual</a></dd>
                      <dd><a href="./../../pe/latest/index.html">Puppet Enterprise User's Guide</a></dd>
                      <dd><a href="./../../learning/index.html">Learning Puppet</a></dd>
                      <dd><a href="./../../references/latest/type.html">Resource Types</a></dd>
                      <dd><a href="./../../references/latest/function.html">Functions</a></dd>
                      <dd><a href="./../../references/latest/configuration.html">Configuration</a></dd>
                      <dd><a href="./../../references/latest/developer/index.html">Developer</a></dd>
                      <dd><a href="./../../references/glossary.html">Glossary of Puppet Terms</a></dd>
                      <dd><a href="./../../references/index.html">Older References</a></dd>
                  <dt>Facter</dt>
                      <dd><a href="./../../facter/latest/core_facts.html">Core Facts Reference</a></dd>
                  <dt>PuppetDB</dt>
                      <dd><a href="./../../puppetdb/1/index.html">PuppetDB 1 Manual</a></dd>
                  <dt>MCollective</dt>
                      <dd><a href="./../../mcollective/index.html">Index</a></dd>
                      <dd><a href="./../../mcollective/reference/index.html">References</a></dd>
                      <dd><a href="./../../mcollective/simplerpc/index.html">Writing Plugins</a></dd>
                      <dd><a href="./../../mcollective/releasenotes.html">Release Notes</a></dd>
                </dl>

            </li>
            <li><a href="./../../contribute.html">Contribute</a></li>
          </ul>
        </div>
        <br />
      </section>

      <section id="content">
        <div class="site-width">
          <div class="primary-secondary-content">
            <div class="primary-content">
              <h1>Configuring & Tuning the Console & Databases</h1>
              <nav class="in-page" id="page-nav">
<ol class="toc">
  <li class="toc-lv2"><a href="#configuring-console-authentication">Configuring Console Authentication</a>
<ol class="toc">
   <li class="toc-lv3"><a href="#configuring-the-smtp-server">Configuring the SMTP Server</a></li>
   <li class="toc-lv3"><a href="#allowing-anonymous-console-access">Allowing Anonymous Console Access</a></li>
   <li class="toc-lv3"><a href="#changing-session-duration">Changing Session Duration</a></li>
</ol></li>
  <li class="toc-lv2"><a href="#configuring-third-party-authentication-services">Configuring Third-Party Authentication Services</a>
<ol class="toc">
   <li class="toc-lv3"><a href="#configuring-casclientconfigyml">Configuring cas_client_config.yml</a></li>
   <li class="toc-lv3"><a href="#configuring-rubycas-serverconfigyml">Configuring rubycas-server/config.yml</a></li>
</ol></li>
  <li class="toc-lv2"><a href="#tuning-the-postgresql-buffer-pool-size">Tuning the PostgreSQL Buffer Pool Size</a></li>
  <li class="toc-lv2"><a href="#fine-tuning-the-delayedjob-queue">Fine-tuning the delayed_job Queue</a>
<ol class="toc">
   <li class="toc-lv3"><a href="#using-the-monitor-script">Using the monitor script</a></li>
</ol></li>
  <li class="toc-lv2"><a href="#changing-the-consoles-port">Changing the Console&#8217;s Port</a></li>
  <li class="toc-lv2"><a href="#disabling-update-checking">Disabling Update Checking</a></li>
</ol></nav>
              <h2 id="configuring-console-authentication">Configuring Console Authentication</h2>

<h3 id="configuring-the-smtp-server">Configuring the SMTP Server</h3>

<p>The console&#8217;s account system sends verification emails to new users, and requires an SMTP server to do so. If your site&#8217;s SMTP server requires a user and password, TLS, or a non-default port, you can configure these by editing the  <code>/etc/puppetlabs/console-auth/config.yml</code> file:</p>

<pre><code>smtp:
  address: mail.example.com
  port: 25
  use_tls: false
  ## Uncomment to enable SMTP authentication
  #username:  smtp_username
  #password:  smtp_password
</code></pre>

<h3 id="allowing-anonymous-console-access">Allowing Anonymous Console Access</h3>

<p>To allow anonymous, read-only access to the console, do the following:</p>

<ul>
  <li>Edit the <code>/etc/puppetlabs/console-auth/cas_client_config.yml</code> file and change the <code>global_unauthenticated_access</code> setting to <code>true</code>.</li>
  <li>Restart Apache by running <code>sudo /etc/init.d/pe-httpd restart</code>.</li>
</ul>

<h3 id="changing-session-duration">Changing Session Duration</h3>

<p>If you wish to change the duration of a user&#8217;s session before they have to re-authenticate you need to edit two settings. In <code>/etc/puppetlabs/rubycas-server/config.yml</code> change the <code>maximum_session_lifetime</code> setting by specifying, in seconds, how long the session should last. The default is &#8220;1200&#8221; (20 minutes).</p>

<p>Next, in <code>/etc/puppetlabs/console_auth/cas_client_config.yml</code>, edit the <code>session_timeout</code> setting so it is the same as <code>maximum_session_lifetime</code>. Again, the default is 1200 seconds.</p>

<h2 id="configuring-third-party-authentication-services">Configuring Third-Party Authentication Services</h2>

<p>User access can be managed with external, third-party authentication services, <a href="./console_auth.html#using-third-party-authentication-services">as described on the user management and authorization page</a>. The following external services are supported:</p>

<ul>
  <li>LDAP</li>
  <li>Active Directory (AD)</li>
  <li>Google accounts</li>
</ul>

<p>To use external authentication, the following two files must be correctly configured:</p>

<ul>
  <li><code>/etc/puppetlabs/console-auth/cas_client_config.yml</code> (<a href="#configuring-casclientconfigyml">see below</a>)</li>
  <li><code>/etc/puppetlabs/rubycas-server/config.yml</code> (<a href="#configuring-rubycas-serverconfigyml">see below</a>)</li>
</ul>

<p>(Note that YAML requires whitespace and tabs to match up exactly. Type carefully.)</p>

<p>After editing these files you must restart the <code>pe-httpd</code> and <code>pe-puppet-dashboard-workers</code> services via their <code>init.d</code> scripts.</p>

<h3 id="configuring-casclientconfigyml">Configuring <code>cas_client_config.yml</code></h3>

<p>The <code>/etc/puppetlabs/console-auth/cas_client_config.yml</code> file contains several commented-out lines under the <code>authorization:</code> key. Un-comment the lines that correspond to the RubyCAS authenticators you wish to use, and set a new <code>default_role</code> if desired.</p>

<p>Each entry consists of the following:</p>

<ul>
  <li>A common identifier (e.g. <code>local</code>, or <code>ldap</code>, etc.), which is used in the console_auth database and corresponds to the classname of the RubyCAS authenticator.</li>
  <li><code>default_role</code>, which defines the role to assign to users by default &#8212; allowed values are <code>read-only</code>, <code>read-write</code>, or <code>admin</code>.</li>
  <li><code>description</code>, which is simply a human readable description of the service.</li>
</ul>

<p>The order in which authentication services are listed in the <code>cas_client_config.yml</code> file is the order in which the services will be checked for valid accounts. In other words, the first service that returns an account matching the entered user credential is the service that will perform authentication and log-in.</p>

<p>This example shows how to edit the file if you want to use AD and the built-in (local) auth services while leaving Google and LDAP disabled:</p>

<div class="highlight"><pre><code class="yaml"><span class="c1">## This configuration file contains information required by any web</span>
<span class="c1">## service that makes use of the CAS server for authentication.</span>

<span class="l-Scalar-Plain">authentication</span><span class="p-Indicator">:</span>

  <span class="c1">## Use this configuration option if the CAS server is on a host different</span>
  <span class="c1">## from the console-auth server.</span>
  <span class="c1"># cas_host: master:443</span>

  <span class="c1">## The port CAS is listening on.  This is ignored if cas_host is set.</span>
  <span class="c1"># cas_port: 443</span>

  <span class="c1">## The session secret is randomly generated during installation of Puppet</span>
  <span class="c1">## Enterprise and will be regenerated any time console-auth is enabled or disabled.</span>
  <span class="l-Scalar-Plain">session_key</span><span class="p-Indicator">:</span> <span class="s">&#39;puppet_enterprise_console&#39;</span>
  <span class="l-Scalar-Plain">session_secret</span><span class="p-Indicator">:</span> <span class="p-Indicator">[</span><span class="nv">REDACTED</span><span class="p-Indicator">]</span>

  <span class="c1">## Set this to true to allow anonymous users read-only access to all of</span>
  <span class="c1">## Puppet Enterprise Console.</span>
  <span class="l-Scalar-Plain">global_unauthenticated_access</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">false</span>

<span class="l-Scalar-Plain">authorization</span><span class="p-Indicator">:</span>
  <span class="l-Scalar-Plain">local</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">default_role</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">read-only</span>
    <span class="l-Scalar-Plain">description</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">Local</span>
<span class="c1">#  ldap:</span>
<span class="c1">#    default_role: read-only</span>
<span class="c1">#    description: LDAP</span>
  <span class="l-Scalar-Plain">activedirectoryldap</span><span class="p-Indicator">:</span>
    <span class="l-Scalar-Plain">default_role</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">read-only</span>
    <span class="l-Scalar-Plain">description</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">Active Directory</span>
<span class="c1">#  google:</span>
<span class="c1">#    default_role: read-only</span>
<span class="c1">#    description: Google</span>
</code></pre>
</div>

<blockquote>
  <p><strong>Note:</strong> If your console server ever ran PE 2.5, the commented-out sections may not be present in this file. To find example config text that can be copied and pasted into place, look for a <code>cas_client_config.yml.rpmnew</code> or <code>cas_client_config.yml.dpkg-new</code> file in the same directory.</p>
</blockquote>

<h3 id="configuring-rubycas-serverconfigyml">Configuring <code>rubycas-server/config.yml</code></h3>

<p>The <code>/etc/puppetlabs/rubycas-server/config.yml</code> file is used to configure RubyCAS to use external authentication services. As before, you will need to un-comment the section for the third-party services you wish to enable and configure them as necessary. The values for the listed keys are LDAP and ActiveDirectory standards. If you are not the administrator of those databases, you should check with that administrator for the correct values.</p>

<p>The authenticators are listed in the file in the following manner (note how this example disables the Google authenticator but enables both AD and LDAP):</p>

<div class="highlight"><pre><code class="yaml"><span class="l-Scalar-Plain">authenticator</span><span class="p-Indicator">:</span>
  <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">class</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">CASServer::Authenticators::SQLEncrypted</span>
    <span class="l-Scalar-Plain">database</span><span class="p-Indicator">:</span>
      <span class="l-Scalar-Plain">adapter</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">postgresql</span>
      <span class="l-Scalar-Plain">database</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">console_auth</span>
      <span class="l-Scalar-Plain">username</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">console_auth</span>
      <span class="l-Scalar-Plain">password</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">easnthycea098iu7aeo6oeu</span> <span class="c1"># installer-generated password</span>
      <span class="l-Scalar-Plain">server</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">localhost</span>
    <span class="l-Scalar-Plain">user_table</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">users</span>
    <span class="l-Scalar-Plain">username_column</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">username</span>
  <span class="c1">#- class: CASServer::Authenticators::Google</span>
  <span class="c1">#   restricted_domain: example.com</span>
  <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">class</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">CASServer::Authenticators::LDAP</span>
    <span class="l-Scalar-Plain">ldap</span><span class="p-Indicator">:</span>
      <span class="l-Scalar-Plain">host</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">tb-driver.example.com</span>
      <span class="l-Scalar-Plain">port</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">389</span>
      <span class="l-Scalar-Plain">base</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">dc=example,dc=test</span>
      <span class="l-Scalar-Plain">filter</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">(objectClass=person)</span>
      <span class="l-Scalar-Plain">username_attribute</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">mail</span>
  <span class="p-Indicator">-</span> <span class="l-Scalar-Plain">class</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">CASServer::Authenticators::ActiveDirectoryLDAP</span>
    <span class="l-Scalar-Plain">ldap</span><span class="p-Indicator">:</span>
      <span class="l-Scalar-Plain">host</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">winbox.example.com</span>
      <span class="l-Scalar-Plain">port</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">389</span>
      <span class="l-Scalar-Plain">base</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">dc=example,dc=dev</span>
      <span class="l-Scalar-Plain">filter</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">(memberOf=CN=Example Users,CN=Users,DC=example,DC=dev)</span>
      <span class="l-Scalar-Plain">auth_user</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">cn=Test I. Am,cn=users,dc=example,dc=dev</span>
      <span class="l-Scalar-Plain">auth_password</span><span class="p-Indicator">:</span> <span class="l-Scalar-Plain">P4ssword</span>
</code></pre>
</div>

<blockquote>
  <p><strong>Note:</strong> If your console server ever ran PE 2.5, the commented-out sections may not be present in this file. To find example config text that can be copied and pasted into place, look for a <code>config.yml.rpmnew</code> or <code>config.yml.dpkg-new</code> file in the same directory.</p>
</blockquote>

<blockquote>
  <p><strong>Note:</strong> The commented-out examples in the config file may or may not have a line break between after the hyphen; both are valid YAML.</p>

  <pre><code># OK
- class: CASServer::Authenticators::SQLEncrypted

# Also OK
-
  class: CASServer::Authenticators::SQLEncrypted
</code></pre>
</blockquote>

<p>As the above example shows, it&#8217;s generally best to specify just <code>dc=</code> attributes in the <code>base</code> key. The criteria for the Organizational Unit (<code>OU</code>) and Common Name (<code>CN</code>) should be specified in the <code>filter</code> key. The value of the <code>filter:</code> key is where authorized users should be located in the AD organizational structure. Generally speaking, the <code>filter:</code> key is where you would specify an OU or an AD Group. In order to authenticate, users will need to be in the specified OU or Group.</p>

<p>Also note that the value for the <code>filter:</code> key must be the full name for the leftmost <code>cn=</code>; you cannot use the user ID or logon name. In addition, the <code>auth_user:</code> key requires the full Distinguished Name (DN), including any CNs associated with the user and all of the <code>dc=</code> attributes used in the DN.</p>

<h2 id="tuning-the-postgresql-buffer-pool-size">Tuning the PostgreSQL Buffer Pool Size</h2>

<p>If you are experiencing performance issues or instability with the console, you may need to adjust the buffer memory settings for PostgreSQL. The most important PostgreSQL memory settings for PE are <code>shared_buffers</code> and <code>work_mem</code>.  Generally speaking, you should allocate about 25% of your hardware&#8217;s RAM to <code>shared_buffers</code>. If you have a large and/or complex deployment you will probably need to increase <code>work_mem</code> from the default of 1mb. For more detail, see in the <a href="http://www.postgresql.org/docs/9.2/static/runtime-config-resource.html">PostgreSQL documentation</a>.</p>

<p>After changing any of these settings, you should restart the PostgreSQL server:</p>

<pre><code>$ sudo /etc/init.d/pe-postgresql restart
</code></pre>

<h2 id="fine-tuning-the-delayedjob-queue">Fine-tuning the <code>delayed_job</code> Queue</h2>

<p>The console uses a <a href="https://github.com/collectiveidea/delayed_job/"><code>delayed_job</code></a> queue to asynchronously process resource-intensive tasks such as report generation. Although the console won&#8217;t lose any data sent by puppet masters if these jobs don&#8217;t run, you&#8217;ll need to be running at least one delayed job worker (and preferably one per CPU core) to get the full benefit of the console&#8217;s UI.</p>

<p>Currently, to manage the <code>delayed_job</code> workers, you must either use the provided monitor script or start non-daemonized workers individually with the provided rake task.</p>

<h3 id="using-the-monitor-script">Using the monitor script</h3>

<p>The console ships with a worker process manager, which can be found at <code>script/delayed_job</code>. This tool&#8217;s interface resembles an init script, but it can launch any number of worker processes as well as a monitor process to babysit these workers; run it with <code>--help</code> for more details. <code>delayed_job</code> requires that you specify <code>RAILS_ENV</code> as an environment variable. To start four worker processes and the monitor process:</p>

<pre><code># env RAILS_ENV=production script/delayed_job -p dashboard -n 4 -m start
</code></pre>

<p>In most configurations, you should run exactly as many workers as the machine has CPU cores.</p>

<h2 id="changing-the-consoles-port">Changing the Console&#8217;s Port</h2>

<p>By default, a new installation of PE will serve the console on port 443. However, previous versions of PE served the console&#8217;s predecessor on port 3000. If you upgraded and want to change to the more convenient new default, or if you need port 443 for something else and want to shift the console somewhere else, perform the following steps:</p>

<ul>
  <li>
    <p>Stop the <code>pe-httpd</code> service:</p>

    <pre><code>  $ sudo /etc/init.d/pe-httpd stop
</code></pre>
  </li>
  <li>Edit <code>/etc/puppetlabs/httpd/conf.d/puppetdashboard.conf</code> on the console server, and change the port number in the <code>Listen 443</code> and <code>&lt;VirtualHost *:443&gt;</code> directives. (These directives will contain the current port, which is not necessarily 443.)</li>
  <li>Edit <code>/etc/puppetlabs/puppet/puppet.conf</code> on the puppet master server, and change the <code>reporturl</code> setting to use your preferred port.</li>
  <li>Edit <code>/etc/puppetlabs/puppet-dashboard/external_node</code> on the puppet master server, and change the <code>ENC_BASE_URL</code> to use your preferred port.</li>
  <li>Edit <code>/etc/puppetlabs/console-auth/config.yml </code> on the puppet master server, and change the <code>cas_url</code> to use your preferred port.</li>
  <li>Edit <code>/etc/puppetlabs/rubycas-server/config.yml </code> on the puppet master server, and change the <code>console_base_url</code> to use your preferred port.</li>
  <li>Make sure to allow access to the new port in your system&#8217;s firewall rules.</li>
  <li>
    <p>Start the <code>pe-httpd</code> service:</p>

    <pre><code>  $ sudo /etc/init.d/pe-httpd start
</code></pre>
  </li>
</ul>

<h2 id="disabling-update-checking">Disabling Update Checking</h2>

<p>When the console&#8217;s web server (<code>pe-httpd</code>) starts or restarts, it checks for updates. To get the correct update info, the server will pass some basic, anonymous info to Puppet Labs&#8217; servers. Specifically, it will transmit:</p>

<ul>
  <li>the IP address of the client</li>
  <li>the type and version of the client&#8217;s OS</li>
  <li>the installed version of PE</li>
</ul>

<p>If you wish to disable update checks (e.g. if your company policy forbids transmitting this information), you will need to add the following line to the <code>/etc/puppetlabs/installer/answers.install</code> file:</p>

<pre><code>q_pe_check_for_updates=n
</code></pre>

<p>Keep in mind that if you delete the <code>/etc/puppetlabs/installer/answers.install</code> file, update checking will resume.</p>

<hr />

<ul>
  <li><a href="./puppet_overview.html">Next: Puppet Core Overview </a></li>
</ul>

              <blockquote><p style="font-size: 1.3em; text-align: center;"><a href="#content">↑ Back to top</a></p></blockquote>
            </div>
            <nav class="main">
                  <div id="subCol">


<h3><a href="./index.html">Puppet Enterprise 3.0</a></h3>

<ul>
  <li><strong>Overview</strong>
    <ul>
      <li><a href="./overview_about_pe.html">About Puppet Enterprise</a></li>
      <li><a href="./overview_whats_new.html">New Features</a></li>
      <li><a href="./overview_getting_support.html">Getting Support</a></li>
    </ul>
  </li>
  <li><strong>Quick Start</strong>
    <ul>
        <li><a href="./quick_start.html">Quick Start: Using PE</a></li>
        <li><a href="./quick_writing.html">Quick Start: Writing Modules</a></li>
    </ul>
  </li>
  <li><strong>Installing Puppet Enterprise</strong>
    <ul>
      <li><a href="./install_system_requirements.html">System Requirements</a></li>
      <li><a href="./install_basic.html">Installing PE</a></li>
      <li><a href="./install_windows.html">Installing Windows Agents</a></li>
      <li><a href="./install_upgrading.html">Upgrading</a></li>
      <li><a href="./install_uninstalling.html">Uninstalling</a></li>
      <li><a href="./install_automated.html">Automated Installation</a></li>
      <li><a href="./install_answer_file_reference.html">Answer File Reference</a></li>
      <li><a href="./install_what_and_where.html">What gets installed where?</a></li>
    </ul>
  </li>
  <li><strong>The PE Console</strong>
    <ul>
      <li><a href="./console_accessing.html">Accessing the Console</a></li>
      <li><a href="./console_navigating.html">Navigating the Console</a></li>
      <li><a href="./console_navigating_live_mgmt.html">Navigating the Live Management Page</a></li>
      <li><a href="./console_cert_mgmt.html">Managing Node Requests</a></li>
      <li><a href="./console_classes_groups.html">Grouping & Classifying Nodes</a></li>
      <li><a href="./console_reports.html">Viewing Reports & Inventory Data</a></li>
      <li><a href="./console_auth.html">Managing Users</a></li>
      <li><a href="./console_inventory_search.html">Inventory Search</a></li>
      <li><a href="./console_rake_api.html">Rake API and List of Tasks</a></li>
      <li><a href="./console_rake_api_old.html">Rake API: List of Tasks (Old Argument Style)</a></li>
      <li><span class="currentpage">Configuring the Console</span></li>
    </ul>
  </li>
  <li><strong>Puppet Core</strong>
    <ul>
      <li><a href="./puppet_overview.html">Overview</a></li>
      <li><a href="./puppet_modules_manifests.html">Modules & Manifests</a></li>
      <li><a href="./puppet_assign_configurations.html">Assigning Configurations to Nodes</a></li>
      <li><a href="./puppet_tools.html">Tools</a></li>
      <li><a href="./puppet_data_library.html">Puppet Data Library</a></li>
      <li><a href="./puppet_references.html">References</a></li>
      <li><a href="./puppet_config.html">Configuring Puppet Core</a></li>
    </ul>
  </li>
  <li><strong>Orchestration</strong>
    <ul>
      <li><a href="./orchestration_overview.html">Overview</a></li>
      <li><a href="./orchestration_invoke_cli.html">Invoking Actions</a></li>
      <li><a href="./orchestration_puppet.html">Controlling Puppet</a></li>
      <li><a href="./orchestration_resources.html">Browsing Resources</a></li>
      <li><a href="./orchestration_actions.html">List of Built-In Actions</a></li>
      <li><a href="./orchestration_adding_actions.html">Adding New Actions</a></li>
      <!-- <li><a href="./orchestration_integrating.html">Integrating Applications</a></li> -->
      <li><a href="./orchestration_config.html">Configuring Orchestration</a></li>
    </ul>
  </li>
  <li><strong>Cloud Provisioning</strong>
    <ul>
      <li><a href="./cloudprovisioner_overview.html">Overview</a></li>
      <li><a href="./cloudprovisioner_configuring.html">Installing & Configuring Cloud Provisioner</a></li>
      <li><a href="./cloudprovisioner_classifying_installing.html">Classifying Nodes & Remotely Installing Puppet</a></li>
      <li><a href="./cloudprovisioner_vmware.html">Provisioning with VMware</a></li>
      <li><a href="./cloudprovisioner_aws.html">Provisioning with AWS</a></li>
      <li><a href="./cloudprovisioner_workflow.html">Sample Workflow</a></li>
    </ul>
  </li>
  <li><strong>The PE Accounts Module</strong>
    <ul>
      <li><a href="./accounts_user_type.html">The pe_accounts::user Type</a></li>
      <li><a href="./accounts_class.html">The pe_accounts Class</a></li>
    </ul>
  </li>
   <li><strong>Maintenance</strong>
    <ul>
      <li> <a href="./maintain_console-db.html">Console & Database Maintenance</a></li>
      <!--
<li> <a href="./maintain_puppet.html">Puppet Core Maintenance</a></li>
      <li> <a href="./maintain_orchestration.html">Orchestration Maintenance</a></li>
 -->
    </ul>
  </li>
  <li><strong>Troubleshooting</strong>
    <ul>
     <li> <a href="./trouble_install.html">Troubleshooting the Installer</a></li>
     <li> <a href="./trouble_comms.html">Troubleshooting Connections & Communications</a></li>
     <li> <a href="./trouble_console-db.html">Troubleshooting the Console & Database</a></li>
     <li> <a href="./trouble_puppet.html">Troubleshooting the Puppet Core</a></li>
     <li> <a href="./trouble_orchestration.html">Troubleshooting Orchestration</a></li>
     <li> <a href="./trouble_cloudprovisioner.html">Troubleshooting Cloud Provisioner</a></li>
     <li> <a href="./trouble_windows.html">Troubleshooting Windows</a></li>
    </ul>
  </li>
  <li><strong>Appendix</strong>
    <ul>
      <li><a href="./appendix.html#release-notes">Release Notes</a></li>
      <li><a href="./appendix.html#known-issues">Known Issues</a></li>
       <li><a href="./compliance_alt.html">Compliance Alternate Workflow</a></li>
    <!--    <li><a href="./cloning_alt.html">Cloning Alternate Workflow</a></li> -->
    </ul>
  </li>
</ul>

                      <div style="margin-top: 1.5em; padding-bottom: 10px;">
                          <p style="font-family: 'Lucida Grande',Lucida,Verdana,sans-serif;font-size: 16px; font-weight: bold; line-height: 22px; margin-bottom: 10px;">Download the Docs</p>
                          <a href="http://info.puppetlabs.com/download-pdfs.html"><img src="./../../images/smallbits_small_docs.png" alt="Puppet docs download"></a>
                      </div>
                      <div style="margin-top: 0; padding-bottom: 10px;">
                          <p style="font-family: 'Lucida Grande',Lucida,Verdana,sans-serif;font-size: 16px; font-weight: bold; line-height: 22px; margin-bottom: 10px;">Download Puppet Enterprise</p>
                          <a href="http://info.puppetlabs.com/download-pe.html"><img src="./../../images/puppet_cert_home.jpg" alt="Puppet Enterprise promo"></a>
                      </div>
                  </div>
            </nav>
          </div>
        </div>
      </section>

		<footer id="footer">
      <div class="site-width">

        <div class="primary-secondary-content">
          <div class="primary-content">
            <section id="newsletter">
                 <h4>Puppet Labs is Hiring</h4>
                 <p><a href="http://www.puppetlabs.com/company/jobs/">Engineers, developers & consultants</a>
                  <p>
		<h4>Newsletter</h4>

              <p>Stay up to date on all things puppet</p>

				<form class="lpeRegForm formNotEmpty" method="post" enctype="application/x-www-form-urlencoded" action="http://info.puppetlabs.com/index.php/leadCapture/save"; id="mktForm_1013" name="mktForm_1013">

				<label>Email Address:</label><span class='mktInput'><input class='mktFormText mktFormEmail' name="Email" id="Email" type='text' value="" maxlength='255'  /><span class='mktFormMsg'></span></span>

				<input id='mktFrmSubmit' type='submit' class='btn' style="width: auto; overflow: visible; padding-left: .25em; padding-right: .25em;" value='Subscribe' name='submitButton' onclick='formSubmit(document.getElementById("mktForm_1013")); return false;' />

				<input style='display: none;' id='mktFrmReset' type='reset' value='Clear' name='resetButton' onclick='formReset(document.getElementById("mktForm_1013")); return false;' />

				<span style="display:none;"><input type="text" name="_marketo_comments" value="" /></span>
				<input type="hidden" name="lpId" value="-1" />
				<input type="hidden" name="subId" value="100" />

				<input type="hidden" name="kw" value="" />
				<input type="hidden" name="cr" value="" />

				<input type="hidden" name="searchstr" value="" />
				<input type="hidden" name="lpurl" value="http://info.puppetlabs.com/testsubscription.html?cr={creative}&kw={keyword}"; />
				<input type="hidden" name="formid" value="1013" />
				<input type="hidden" name="returnURL" value="http://www.puppetlabs.com/misc/subscription-thank-you/"; />
				<input type="hidden" name="retURL" value="http://www.puppetlabs.com/misc/subscription-thank-you/"; />
				<input type="hidden" name="_mkt_disp" value="return" />
				<input type="hidden" name="_mkt_trk" value="" />

				</form>
				<script type="text/javascript" src="http://info.puppetlabs.com/js/mktFormSupport.js"></script>

				<script type="text/javascript">
				function formSubmit(elt) {
				return Mkto.formSubmit(elt);
				}
				function formReset(elt) {
				return Mkto.formReset(elt);
				}
				</script>

<a href="http://info.puppetlabs.com/puppet-enterprise" class="fbtn">Try Puppet Enterprise FREE</a>

            </section>
            <section id="elsewhere">
              <h4>Get Involved</h4>
              <ul>

                <li class="chat"><a href="http://webchat.freenode.net/?channels=puppet" rel="external"><span class="indicator"></span><span>Chat with us on IRC</span></a></li>
		<li class="discussion"><a href="http://groups.google.com/group/puppet-dev" rel="external"><span class="indicator"></span><span>Join the Puppet Developer List</span></a></li>
                <li class="discussion"><a href="http://groups.google.com/group/puppet-users?pli=1" rel="external"><span class="indicator"></span><span>Join the Puppet User List</span></a></li>

                <li class="linkedin"><a href="http://www.linkedin.com/groups?about=&gid=696467&trk=anet_ug_grppro" rel="external"><span class="indicator"></span><span>Join the Puppet Users LinkedIn group</span></a></li>

              </ul>
		<p>
		              		<h4>Follow us&#8230;</h4>

              		<ul class="followus">


			<li><a href="http://feeds.feedburner.com/PuppetLabs" target="_blank"><img src="http://www.puppetlabs.com/wp-content/plugins/my-profiles/images/rss.png" border="0"></a></li>
			<li><a href="http://www.facebook.com/pages/Puppet-Labs/219089920711" target="_blank"><img src="http://www.puppetlabs.com//wp-content/plugins/my-profiles/images/facebook.png" border="0"></a></li>
			<li><a href="http://www.twitter.com/puppetlabs" target="_blank"><img src="http://www.puppetlabs.com//wp-content/plugins/my-profiles/images/twitter.png" border="0"></a></li>
			<li><a href="http://www.linkedin.com/groups?about=&amp;gid=696467&amp;trk=anet_ug_grppro" target="_blank"><img src="http://www.puppetlabs.com//wp-content/uploads/2011/01/LinkedIn_IN_Icon_32px.png" border="0"></a></li>    <li><a href="https://github.com/puppetlabs" target="_blank"><img src="http://www.puppetlabs.com//wp-content/uploads/2011/01/github_icon.png" border="0"></a></li>
			<li><a href="https://plus.google.com/112682055028218091774?rel=author" target="_blank"><img src="https://puppetlabs.com/wp-content/uploads/2013/05/google_plus32x32.png" alt="Find Us on Google+" border="0"></a></li>
					</ul>

              	</p>

            </section>
          </div>
          <div class="secondary-content">
            <section id="book-it">
              <h4>Get the book!</h4>

              <p>James Turnbull and Jeff McCune's book <a href="http://www.apress.com/9781430230571" rel="nofollow">Pro Puppet</a> is a comprehensive and up-to-date look at Puppet and MCollective. </p>
              <a href="http://www.apress.com/9781430230571" rel="nofollow"><img src="http://www.puppetlabs.com/wp-content/uploads/2011/05/propuppetthumb.png" /></a>
            </section>
          </div>
        </div>
      </div>
		</footer>

    <div id="copyright">
      <div class="site-width">
        &copy; 2011 <a href="http://www.puppetlabs.com/" title="Puppet Labs">Puppet Labs</a>
        <span class="vcard">
         <span class="org"></span>
         <a class="email" href="mailto:info@puppetlabs.com">info@puppetlabs.com</a>

          <span class="adr">
           <span class="street-address">926 NW 13th Avenue #210</span>
           /
           <span class="locality">Portland</span>,
           <span class="region">OR</span>
           <span class="postal-code">97209</span>

          </span>

         <span class="tel">1-877-575-9775</span>
        </span>
      </div>
    </div>

  	<script type="text/javascript">Cufon.now();</script>
  	<style type="text/css">h1, h2, .btn { visibility : visible; }</style>


	</body>
</html>
